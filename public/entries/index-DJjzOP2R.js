const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["chunks/PhotoUploadService-C1w0eNR1.js","chunks/react-vendor-DtX1tuCI.js","chunks/api-vendor-Agjpt42k.js","chunks/state-vendor-BM-fP32G.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,a,o)=>((t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o)(t,"symbol"!=typeof a?a+"":a,o);import{r as a,a as o,R as s}from"../chunks/react-vendor-DtX1tuCI.js";import{s as n,o as r,a as i,n as l,b as c,c as d,Z as u,r as h,_ as p,u as m,d as g}from"../chunks/api-vendor-Agjpt42k.js";import{c as f}from"../chunks/state-vendor-BM-fP32G.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var v={exports:{}},x={},y=a,b=Symbol.for("react.element"),w=Symbol.for("react.fragment"),N=Object.prototype.hasOwnProperty,j=y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,a){var o,s={},n=null,r=null;for(o in void 0!==a&&(n=""+a),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(r=t.ref),t)N.call(t,o)&&!k.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===s[o]&&(s[o]=t[o]);return{$$typeof:b,type:e,key:n,ref:r,props:s,_owner:j.current}}x.Fragment=w,x.jsx=S,x.jsxs=S,v.exports=x;var C,E=v.exports,L=o;C=L.createRoot,L.hydrateRoot;const A={},T={},I=class e{constructor(){t(this,"baseUrl"),this.baseUrl=this.resolveApiBase()}static getInstance(){return e.instance||(e.instance=new e),e.instance}resolveApiBase(){if("undefined"==typeof window)return"http://localhost:3007";const e=null==T?void 0:T.VITE_API_URL;if(e)return e;if("8888"===window.location.port)return"/.netlify/functions";if("localhost"!==window.location.hostname)return"/.netlify/functions";return"/api"}createAbortController(e=3e4){const t=new AbortController;return setTimeout(()=>t.abort(),e),t}sleep(e){return new Promise(t=>setTimeout(t,e))}createApiError(e,t){const a=new Error((null==t?void 0:t.error)||(null==t?void 0:t.message)||`HTTP ${e.status}: ${e.statusText}`);return a.name="ApiError",a.status=e.status,a.statusText=e.statusText,a.body=t,a}async request(e,t={},a={}){const{timeout:o=3e4,retryAttempts:s=1,retryDelay:n=1e3}=a,r=`${this.baseUrl}${e}`;let i;for(let d=0;d<s;d++){d>0&&await this.sleep(n);const e=this.createAbortController(o);try{const a={...t,signal:e.signal};!t.body||"object"!=typeof t.body||t.body instanceof FormData?a.headers||(a.headers={Accept:"application/json",...t.headers}):(a.headers={"Content-Type":"application/json",Accept:"application/json",...t.headers},a.body=JSON.stringify(t.body));const o=await fetch(r,a);let s;try{const e=o.headers.get("content-type");s=e&&e.includes("application/json")?await o.json():await o.text()}catch(l){s=null}if(!o.ok)throw this.createApiError(o,s);return s}catch(c){if(i=c instanceof Error?c:new Error("Unknown error"),c instanceof Error&&"AbortError"===c.name)throw new Error(`Request timeout after ${o}ms`);if(c instanceof Error&&c.status){const e=c;if(e.status>=400&&e.status<500)throw c}c instanceof Error&&c.message;if(d===s-1)throw c}}throw i}async requestFormData(e,t,a={}){return this.request(e,{method:"POST",body:t,headers:{Accept:"application/json"}},a)}get(e,t){return this.request(e,{method:"GET"},t)}post(e,t,a){return this.request(e,{method:"POST",body:t},a)}put(e,t,a){return this.request(e,{method:"PUT",body:t},a)}delete(e,t){return this.request(e,{method:"DELETE"},t)}};t(I,"instance");const D=I.getInstance(),O=n().regex(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?Z?$/,"Invalid ISO date format"),P=n().regex(/^[a-z0-9-]+$/,"Invalid slug format"),M=n().regex(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,"Invalid GUID format");r({dateISO:O,locationSlug:P,teamSlug:P.optional(),sessionId:M,eventName:n().optional(),teamName:n().optional(),locationName:n().optional(),locationTitle:n().optional()});const $=r({photoUrl:n().url("Invalid photo URL"),publicId:n().min(1,"Public ID required"),locationSlug:P,title:n().min(1,"Title required"),uploadedAt:O});$.extend({locationId:n().min(1,"Location ID required")}),r({collageUrl:n().url("Invalid collage URL"),uploaded:i(r({publicId:n(),secureUrl:n().url(),title:n()}))}),r({collageUrl:n().url("Invalid collage URL"),imageCount:l().int().positive("Image count must be positive"),publicIds:i(n())});const V=r({key:n().min(1,"Key required"),value:c(),indexes:i(r({key:n(),member:n()})).optional()}),B=r({key:n(),value:c(),exists:d()}),R=r({keys:i(n()),total:l().int().nonnegative()});function F(e,t,a){try{return e.parse(t)}catch(o){if(o instanceof u){const e=o.errors.map(e=>`${e.path.join(".")}: ${e.message}`).join(", ");throw new Error(`Schema validation failed${a?` for ${a}`:""}: ${e}`)}throw o}}r({id:M,location:n().min(1,"Location required"),startTime:O,userAgent:n().optional(),teamName:n().optional(),eventName:n().optional()}),r({location:n().min(1,"Location required"),team:n().optional(),event:n().optional(),updatedAt:O}),r({error:n().min(1,"Error message required"),details:n().optional(),status:l().int().optional()});class z{static validateMediaFile(e){if(!e)return{isValid:!1,error:"No file provided"};const t=this.ALLOWED_IMAGE_TYPES.includes(e.type),a=this.ALLOWED_VIDEO_TYPES.includes(e.type);if(!t&&!a)return{isValid:!1,error:"File must be an image or video"};const o=t?"image":"video",s=t?this.MAX_IMAGE_SIZE:this.MAX_VIDEO_SIZE,n=t?"12MB":"200MB";return e.size>s?{isValid:!1,error:`File size must be under ${n}`}:{isValid:!0,mediaType:o}}static async uploadMedia(e,t,a,o){var s,n;const r=this.validateMediaFile(e);if(!r.isValid)throw new Error(r.error||"Invalid file");if(!t)throw new Error("Location title is required");if(!a)throw new Error("Session ID is required");const i=r.mediaType,l=new FormData;l.append("media",e),l.append("locationTitle",t),l.append("sessionId",a),l.append("resourceType",i),o.teamName&&l.append("teamName",o.teamName),o.locationName&&l.append("locationName",o.locationName),o.eventName&&l.append("eventName",o.eventName),o.orgSlug&&l.append("orgSlug",o.orgSlug),o.huntSlug&&l.append("huntSlug",o.huntSlug),o.stopId&&l.append("stopId",o.stopId);try{const e="video"===i?"/video-upload":"/photo-upload",t="video"===i?3e5:6e4,a=await D.requestFormData(e,l,{timeout:t,retryAttempts:1}),o=F($,a,"media upload");return{...o,mediaType:i,posterUrl:"video"===i?null==(s=o.photoUrl)?void 0:s.replace("/upload/","/upload/f_jpg,q_auto/"):void 0,thumbnailUrl:null==(n=o.photoUrl)?void 0:n.replace("/upload/","/upload/c_thumb,w_200,h_200,g_face/")}}catch(c){throw c}}static async uploadPhoto(e,t,a,o,s,n){const r=await this.uploadMedia(e,t,a,{resourceType:"image",teamName:o,locationName:s,eventName:n});return{photoUrl:r.photoUrl,publicId:r.publicId,locationSlug:r.locationSlug,title:r.title,uploadedAt:r.uploadedAt}}static generateUploadFolder(e,t,a){const o=`${e}/${t}`;return a?`${o}/stops/${a}`:o}static generateUploadTags(e){const t=["vail-hunt",e.mediaType,`org:${e.orgSlug}`];return e.huntId&&t.push(`hunt:${e.huntId}`),e.teamName&&t.push(`team:${e.teamName}`),e.stopId&&t.push(`stop:${e.stopId}`),t}}t(z,"MAX_IMAGE_SIZE",12582912),t(z,"MAX_VIDEO_SIZE",209715200),t(z,"ALLOWED_IMAGE_TYPES",["image/jpeg","image/png","image/gif","image/webp"]),t(z,"ALLOWED_VIDEO_TYPES",["video/mp4","video/webm","video/ogg","video/quicktime"]);class U{static async getPhotosByCompanyEvent(e,t){try{if(!e||!t)return[];return(await D.request(`/photos/company/${encodeURIComponent(e)}/event/${encodeURIComponent(t)}`,{method:"GET"})).photos||[]}catch(a){return[]}}static async getPhotosByTeam(e,t,a){try{if(!e||!t||!a)return[];return(await D.request(`/photos/company/${encodeURIComponent(e)}/event/${encodeURIComponent(t)}/team/${encodeURIComponent(a)}`,{method:"GET"})).photos||[]}catch(o){return[]}}static async saveTeamPhoto(e,t,a,o){try{return(await D.request(`/photos/company/${encodeURIComponent(e)}/event/${encodeURIComponent(t)}/team/${encodeURIComponent(a)}`,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}})).success||!1}catch(s){return!1}}static async deleteTeamPhoto(e,t,a,o){try{return(await D.request(`/photos/company/${encodeURIComponent(e)}/event/${encodeURIComponent(t)}/team/${encodeURIComponent(a)}/location/${encodeURIComponent(o)}`,{method:"DELETE"})).success||!1}catch(s){return!1}}}class H{static get(e){try{if("undefined"==typeof localStorage)return null;const t=localStorage.getItem(e);if(null===t)return null;try{return JSON.parse(t)}catch{return t}}catch(t){return null}}static set(e,t){try{if("undefined"==typeof localStorage)return!1;const a=JSON.stringify(t);return localStorage.setItem(e,a),!0}catch(a){return a.name,!1}}static delete(e){try{return"undefined"!=typeof localStorage&&(localStorage.removeItem(e),!0)}catch(t){return!1}}static listKeys(e=""){try{if("undefined"==typeof localStorage)return[];const t=[];for(let a=0;a<localStorage.length;a++){const o=localStorage.key(a);e&&!o.startsWith(e)||t.push(o)}return t.sort()}catch(t){return[]}}static getAll(e=""){try{const t={},a=this.listKeys(e);for(const e of a)t[e]=this.get(e);return t}catch(t){return{}}}static setMultiple(e){const t={success:[],failed:[],total:Object.keys(e).length};for(const[a,o]of Object.entries(e))this.set(a,o)?t.success.push(a):t.failed.push(a);return t}static clear(e=""){try{if("undefined"==typeof localStorage)return 0;if(e){const t=this.listKeys(e);return t.forEach(e=>localStorage.removeItem(e)),t.length}{const e=localStorage.length;return localStorage.clear(),e}}catch(t){return 0}}static isAvailable(){try{if("undefined"==typeof localStorage)return!1;const e="__localStorage_test__";return localStorage.setItem(e,"test"),localStorage.removeItem(e),!0}catch{return!1}}static getStorageInfo(){try{if(!this.isAvailable())return{available:!1,used:0,total:0,percentage:0,keyCount:0};let e=0;const t=localStorage.length;for(let o=0;o<localStorage.length;o++){const t=localStorage.key(o),a=localStorage.getItem(t);e+=t.length+a.length}const a=5242880;return{available:!0,used:e,total:a,percentage:Math.round(e/a*100),keyCount:t,formattedUsed:this.formatBytes(e),formattedTotal:this.formatBytes(a)}}catch(e){return{available:!1,used:0,total:0,percentage:0,keyCount:0}}}static formatBytes(e){if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]}static exportData(e=""){try{const t=this.getAll(e);return JSON.stringify(t,null,2)}catch(t){return"{}"}}static importData(e,t=!1){try{const a=JSON.parse(e),o={imported:[],skipped:[],failed:[],total:Object.keys(a).length};for(const[e,s]of Object.entries(a))t||null===this.get(e)?this.set(e,s)?o.imported.push(e):o.failed.push(e):o.skipped.push(e);return o}catch(a){return{imported:[],skipped:[],failed:[],total:0,error:a.message}}}}class _{static async set(e,t,a=[]){const o={localStorage:!1,server:!1,errors:[]};try{H.set(e,t)?o.localStorage=!0:o.errors.push("localStorage failed (quota exceeded?)")}catch(s){o.errors.push(`localStorage error: ${s instanceof Error?s.message:"Unknown error"}`)}try{const s={key:e,value:t,indexes:a.length>0?a:void 0},n=F(V,s,"KV upsert payload");await D.post("/kv-upsert",n);o.server=!0}catch(s){const e=s instanceof Error?s.message:"Unknown server error";o.errors.push(`Server error: ${e}`)}return o}static async get(e){try{const t=H.get(e);if(null!==t)return t}catch(t){}try{const a=await D.get(`/kv-get/${encodeURIComponent(e)}`),o=F(B,a,"KV get response");if(o.exists&&null!==o.value){try{H.set(e,o.value)}catch(t){}return o.value}}catch(t){}return null}static async list(e=!1){try{const t="/kv-list"+(e?"?includeValues=true":""),a=await D.get(t),o=F(R,a,"KV list response");return e&&Array.isArray(a.items)?a.items:o.keys}catch(t){throw t}}static async delete(e){const t={localStorage:!1,server:!1,errors:[]};try{H.delete(e),t.localStorage=!0}catch(a){t.errors.push(`localStorage delete error: ${a instanceof Error?a.message:"Unknown error"}`)}try{await D.delete(`/kv-delete/${encodeURIComponent(e)}`),t.server=!0}catch(a){const e=a instanceof Error?a.message:"Unknown server error";t.errors.push(`Server delete error: ${e}`)}return t}static async createSession(e,t){const a=`session:${e}`,o=[{key:"index:sessions",member:e},{key:"index:sessions-by-location",member:`${t.location}:${e}`}];return this.set(a,t,o)}static async saveSettings(e){return this.set("app-settings",e,[{key:"index:settings",member:"app-settings"}])}}const q={"app-settings":{location:"BHHS",team:"",event:"Vail",updatedAt:"2025-09-07T07:40:00.000Z"},organizations:[{id:"bhhs",name:"BHHS",displayName:"Berkshire Hathaway HomeServices",events:["Vail"],teams:["RED","BLUE","GREEN","PINK"],locations:"bhhs-locations.json"}],events:[{id:"vail",name:"Vail",displayName:"Vail Hunt Challenge",organizationId:"bhhs",organizationName:"BHHS",description:"Explore Vail Village and complete the ultimate scavenger hunt!",teams:["RED","BLUE","GREEN","PINK"],status:"active",startDate:"2025-09-07T00:00:00.000Z",endDate:"2025-12-31T23:59:59.000Z"}],teams:[{id:"red",name:"RED",displayName:"Team Red",color:"#DC2626",organizationId:"bhhs",eventId:"vail",members:["Sarah M.","Mike T.","Jessica L.","David R."],completedStops:["bhhs-vail-office","covered-bridge"],photos:[{locationId:"bhhs-vail-office",photoUrl:"https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800&h=600&fit=crop&crop=center",title:"Team Red at BHHS Office",uploadedAt:"2025-09-07T10:30:00.000Z"},{locationId:"covered-bridge",photoUrl:"https://images.unsplash.com/photo-1545558014-8692077e9b5c?w=800&h=600&fit=crop&crop=center",title:"Team Red on Covered Bridge",uploadedAt:"2025-09-07T11:15:00.000Z"}]},{id:"blue",name:"BLUE",displayName:"Team Blue",color:"#2563EB",organizationId:"bhhs",eventId:"vail",members:["Alex P.","Emma W.","Chris B.","Maya K."],completedStops:["clock-tower","gore-creek-views"],photos:[{locationId:"clock-tower",photoUrl:"https://images.unsplash.com/photo-1551632811-561732d1e306?w=800&h=600&fit=crop&crop=center",title:"Team Blue at Clock Tower",uploadedAt:"2025-09-07T10:45:00.000Z"},{locationId:"gore-creek-views",photoUrl:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=600&fit=crop&crop=center",title:"Team Blue by Gore Creek",uploadedAt:"2025-09-07T11:30:00.000Z"}]},{id:"green",name:"GREEN",displayName:"Team Green",color:"#059669",organizationId:"bhhs",eventId:"vail",members:["Jordan F.","Taylor S.","Morgan D.","Casey V."],completedStops:["luxury-mountain-home"],photos:[{locationId:"luxury-mountain-home",photoUrl:"https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=800&h=600&fit=crop&crop=center",title:"Team Green at Mountain Property",uploadedAt:"2025-09-07T11:00:00.000Z"}]}],"sample-progress":{RED:{"bhhs-vail-office":{done:!0,notes:"Found the office! Great team photo by the BHHS sign. 📸",photo:"https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=800&h=600&fit=crop&crop=center",revealedHints:2,completedAt:"2025-09-07T10:30:00.000Z"},"covered-bridge":{done:!0,notes:"Beautiful bridge! Perfect romantic spot for photos. 💕",photo:"https://images.unsplash.com/photo-1545558014-8692077e9b5c?w=800&h=600&fit=crop&crop=center",revealedHints:1,completedAt:"2025-09-07T11:15:00.000Z"},"community-gathering":{done:!1,notes:"Looking for the community center...",photo:null,revealedHints:1}},BLUE:{"clock-tower":{done:!0,notes:"Found the iconic clock tower - great meeting spot! ⏰",photo:"https://images.unsplash.com/photo-1551632811-561732d1e306?w=800&h=600&fit=crop&crop=center",revealedHints:1,completedAt:"2025-09-07T10:45:00.000Z"},"gore-creek-views":{done:!0,notes:"Amazing creek views - definitely increases property value! 🏞️",photo:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=800&h=600&fit=crop&crop=center",revealedHints:2,completedAt:"2025-09-07T11:30:00.000Z"},"family-friendly-area":{done:!1,notes:"Still searching for the family recreation zone...",photo:null,revealedHints:1}},GREEN:{"luxury-mountain-home":{done:!0,notes:"Wow! This property showcases amazing mountain architecture! 🏔️",photo:"https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=800&h=600&fit=crop&crop=center",revealedHints:1,completedAt:"2025-09-07T11:00:00.000Z"},"mountain-access-point":{done:!1,notes:"Heading to find the mountain adventure gateway...",photo:null,revealedHints:2},"ski-slope-access":{done:!1,notes:"",photo:null,revealedHints:1}}},"today-events":{"BHHS-Vail-Hunt":{orgName:"BHHS",eventName:"Vail Hunt Challenge",orgSlug:"bhhs",startAt:"2025-09-07T09:00:00.000Z",endAt:"2025-09-07T18:00:00.000Z",description:"Explore Vail Village and discover amazing mountain properties!",teams:["RED","BLUE","GREEN"],totalStops:9,completedStops:{RED:2,BLUE:2,GREEN:1},status:"active"},"BHHS-Winter-Challenge":{orgName:"BHHS",eventName:"Winter Mountain Explorer",orgSlug:"bhhs",startAt:"2025-09-07T10:00:00.000Z",endAt:"2025-09-07T16:00:00.000Z",description:"Discover the best of Vail's winter mountain properties!",teams:["POWDER","SNOW","ICE"],totalStops:6,completedStops:{POWDER:0,SNOW:0,ICE:0},status:"starting-soon"}}},W=class e{constructor(){}static getInstance(){return e.instance||(e.instance=new e),e.instance}async seedAppData(e={}){try{await this.seedAppSettings(e.skipExisting),await this.seedTodaysEvents(e.skipExisting),e.seedProgress&&await this.seedSampleProgress(e.teams)}catch(t){throw t}}async seedAppSettings(e=!0){try{const t=await _.get("app-settings");if(e&&t)return;const a=q["app-settings"];await _.set("app-settings",a)}catch(t){throw t}}async seedTodaysEvents(e=!0){try{const t=new Date,a=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,o=q["today-events"];for(const[s,n]of Object.entries(o)){const t=`events/${a}/${n.orgSlug}.json`;if(e){if(await _.get(t))continue}await _.set(t,n)}}catch(t){throw t}}async seedSampleProgress(e){if(!e||0===e.length)return;const t=q["sample-progress"];for(const o of e)if(t[o])try{const e=`progress:BHHS:Vail:${o}`,a=t[o];if(await _.get(e))continue;await _.set(e,a)}catch(a){}}getAvailableTeams(){return q.teams.map(e=>e.name)}getOrganization(e){return q.organizations.find(t=>t.id===e)}getEvent(e){return q.events.find(t=>t.id===e)}async clearSeedData(){try{await _.delete("app-settings");const e=new Date,t=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,a=q["today-events"];for(const[s,n]of Object.entries(a)){const e=`events/${t}/${n.orgSlug}.json`;await _.delete(e)}const o=this.getAvailableTeams();for(const s of o){const e=`progress:BHHS:Vail:${s}`;await _.delete(e)}}catch(e){throw e}}};t(W,"instance");const G=W.getInstance();const K=s.memo(({percent:e,completeCount:t,totalStops:a,stops:o,progress:s})=>E.jsxs("div",{className:"mt-4",role:"region","aria-labelledby":"progress-heading",children:[E.jsx("h2",{id:"progress-heading",className:"sr-only",children:"Scavenger Hunt Progress"}),E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsx("span",{className:"text-xs font-medium uppercase tracking-wider",style:{color:"var(--color-medium-grey)"},children:"Progress"}),E.jsxs("span",{className:"text-sm font-bold",style:{color:"var(--color-cabernet)"},"aria-live":"polite",children:[e,"% Complete"]})]}),E.jsxs("div",{className:"relative",role:"progressbar","aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"100","aria-label":`Progress: ${t} of ${a} stops completed, ${e} percent`,children:[E.jsx("div",{className:"overflow-hidden h-3 rounded-full shadow-inner",style:{backgroundColor:"var(--color-light-grey)"},children:E.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out relative overflow-hidden",style:{background:"linear-gradient(to right, var(--color-cabernet), var(--color-cabernet-hover))",width:`${e}%`},children:E.jsx("div",{className:"absolute inset-0 animate-pulse",style:{background:"linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent)"}})})}),E.jsx("div",{className:"absolute top-0 left-0 w-full h-3 flex items-center justify-between px-1","aria-hidden":"true",children:o.map((e,t)=>{var a,o,n;return E.jsx("div",{className:"w-2 h-2 rounded-full transition-all duration-500 "+((null==(a=s[e.id])?void 0:a.done)?"bg-white shadow-sm scale-110":"scale-75"),style:{backgroundColor:(null==(o=s[e.id])?void 0:o.done)?"white":"var(--color-warm-grey)"},title:`Stop ${t+1}: ${(null==(n=s[e.id])?void 0:n.done)?"Completed":"Not completed"}`},e.id)})})]}),E.jsxs("div",{className:"flex justify-between mt-2",children:[E.jsxs("span",{className:"text-xs",style:{color:"var(--color-medium-grey)"},children:[t," of ",a," stops"]}),t>0&&t<a&&E.jsxs("span",{className:"text-xs font-medium",style:{color:"var(--color-cabernet)"},children:[a-t," to go!"]})]})]})),Y=s.memo(({collageUrl:e,imageUrl:t,initialExpanded:o=!0})=>{const[s,n]=a.useState(o),[r,i]=a.useState(!1);return a.useEffect(()=>{i(!1)},[t]),a.useEffect(()=>{n(o)},[e,o]),e?E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"mt-6 shadow-sm border rounded-lg bg-white p-4 "+(s?"border-blue-200":"border-gray-200"),children:[E.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>n(!s),children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-lg",children:"📸"}),E.jsx("h3",{className:"text-lg font-semibold text-slate-700",children:"Album"})]}),E.jsx("span",{className:"text-blue-500",children:s?"▼":"▶"})]}),s&&r&&E.jsx("div",{className:"flex justify-center transition-all duration-300 ease-in-out mt-4",children:E.jsx("img",{src:t,alt:"Full size collage",className:"max-w-full h-auto rounded-lg shadow-md",style:{maxHeight:"70vh"}})})]}),t&&!r&&E.jsx("img",{src:t,alt:"Preloading collage",className:"hidden",onLoad:()=>i(!0),onError:()=>i(!0)})]}):null}),J=e=>(t,a,o)=>{const s=o.subscribe;o.subscribe=(e,t,a)=>{let n=e;if(t){const s=(null==a?void 0:a.equalityFn)||Object.is;let r=e(o.getState());n=a=>{const o=e(a);if(!s(r,o)){const e=r;t(r=o,e)}},(null==a?void 0:a.fireImmediately)&&t(r,r)}return s(n)};return e(t,a,o)};function Z(e,t){let a;try{a=e()}catch(o){return}return{getItem:e=>{var t;const o=e=>null===e?null:JSON.parse(e,void 0),s=null!=(t=a.getItem(e))?t:null;return s instanceof Promise?s.then(o):o(s)},setItem:(e,t)=>a.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>a.removeItem(e)}}const Q=e=>t=>{try{const a=e(t);return a instanceof Promise?a:{then:e=>Q(e)(a),catch(e){return this}}}catch(a){return{then(e){return this},catch:e=>Q(e)(a)}}},X=(e,t)=>(a,o,s)=>{let n={storage:Z(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},r=!1;const i=new Set,l=new Set;let c=n.storage;if(!c)return e((...e)=>{a(...e)},o,s);const d=()=>{const e=n.partialize({...o()});return c.setItem(n.name,{state:e,version:n.version})},u=s.setState;s.setState=(e,t)=>(u(e,t),d());const h=e((...e)=>(a(...e),d()),o,s);let p;s.getInitialState=()=>h;const m=()=>{var e,t;if(!c)return;r=!1,i.forEach(e=>{var t;return e(null!=(t=o())?t:h)});const s=(null==(t=n.onRehydrateStorage)?void 0:t.call(n,null!=(e=o())?e:h))||void 0;return Q(c.getItem.bind(c))(n.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];if(n.migrate){const t=n.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}}return[!1,void 0]}).then(e=>{var t;const[s,r]=e;if(p=n.merge(r,null!=(t=o())?t:h),a(p,!0),s)return d()}).then(()=>{null==s||s(p,void 0),p=o(),r=!0,l.forEach(e=>e(p))}).catch(e=>{null==s||s(void 0,e)})};return s.persist={setOptions:e=>{n={...n,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>m(),hasHydrated:()=>r,onHydrate:e=>(i.add(e),()=>{i.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},n.skipHydration||m(),p||h},ee=f()(X(e=>({locationName:"BHHS",eventName:"Vail",teamName:"",lockedByQuery:!1,openEventSettingsOnce:!1,setLocationName:t=>e({locationName:t}),setEventName:t=>e({eventName:t}),setTeamName:t=>e({teamName:t}),setLockedByQuery:t=>e({lockedByQuery:t}),requestOpenEventSettings:()=>e({openEventSettingsOnce:!0}),clearOpenEventSettings:()=>e({openEventSettingsOnce:!1})}),{name:"event-store",partialize:e=>({locationName:e.locationName,eventName:e.eventName,teamName:e.teamName,lockedByQuery:e.lockedByQuery,openEventSettingsOnce:e.openEventSettingsOnce})}));function te({isMenuOpen:e,onToggleMenu:t,completeCount:a,totalStops:o,percent:s,onReset:n,onToggleTips:r,onNavigate:i}){const{locationName:l}=ee();return E.jsxs("header",{className:"sticky top-0 z-20 backdrop-blur-md border-b",style:{backgroundColor:"var(--color-cabernet)",borderBottomColor:"var(--color-blush-pink)"},children:[E.jsxs("div",{className:"max-w-screen-sm mx-auto px-4 py-3 flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[E.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[E.jsx("div",{className:"w-7 h-7 rounded-full border-2 border-white/30 flex items-center justify-center",children:E.jsx("span",{className:"text-xs font-bold text-white",children:a})}),E.jsxs("div",{className:"text-xs text-white/90 hidden sm:block whitespace-nowrap",children:[s,"% Complete"]})]}),E.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[E.jsx("div",{className:"flex-shrink-0",children:E.jsxs("svg",{width:"24",height:"20",viewBox:"0 0 32 20",className:"text-white",children:[E.jsx("path",{d:"M8 8 L16 1 L24 8 L24 16 L20 16 L20 10 L12 10 L12 16 L8 16 Z",fill:"white"}),E.jsx("rect",{x:"15",y:"3",width:"2",height:"4",fill:"white"})]})}),E.jsxs("div",{className:"min-w-0 flex-1",children:[E.jsxs("div",{className:"hidden sm:block",children:[E.jsx("div",{className:"text-sm font-bold text-white leading-tight",children:l||"BERKSHIRE HATHAWAY"}),E.jsx("div",{className:"text-xs text-white/90 leading-tight",children:"HomeServices"})]}),E.jsx("div",{className:"sm:hidden",children:E.jsx("div",{className:"text-sm font-bold text-white",children:l||"BHHS"})})]})]})]}),E.jsx("button",{onClick:t,className:"flex-shrink-0 p-2.5 rounded-lg transition-all duration-200 active:scale-95",style:{backgroundColor:"rgba(255, 255, 255, 0.1)"},onMouseEnter:e=>e.target.style.backgroundColor="rgba(255, 255, 255, 0.2)",onMouseLeave:e=>e.target.style.backgroundColor="rgba(255, 255, 255, 0.1)","aria-label":"Toggle menu","aria-expanded":e,children:E.jsxs("div",{className:"w-5 h-4 flex flex-col justify-between relative",children:[E.jsx("span",{className:"absolute top-0 left-0 h-0.5 bg-white transform transition-all duration-300 "+(e?"rotate-45 translate-y-1.5 w-5":"w-5")}),E.jsx("span",{className:"absolute top-1/2 left-0 h-0.5 bg-white transition-all duration-300 "+(e?"opacity-0 w-5":"w-4"),style:{transform:"translateY(-50%)"}}),E.jsx("span",{className:"absolute bottom-0 left-0 h-0.5 bg-white transform transition-all duration-300 "+(e?"-rotate-45 -translate-y-1.5 w-5":"w-3")})]})})]}),e&&E.jsx("div",{className:"absolute top-full right-0 left-0 shadow-lg border-t",style:{backgroundColor:"var(--color-white)",borderTopColor:"var(--color-blush-pink)",animation:"slideDown 0.2s ease-out forwards",transformOrigin:"top"},children:E.jsx("div",{className:"max-w-screen-sm mx-auto px-4 py-4",children:E.jsxs("nav",{className:"space-y-2",children:[E.jsxs("button",{onClick:()=>{r(),t()},className:"w-full text-left px-4 py-4 rounded-lg transition-all duration-150 transform hover:scale-[1.01] active:scale-[0.99] flex items-center gap-3 opacity-0",onMouseEnter:e=>e.target.style.backgroundColor="var(--color-light-pink)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",onMouseDown:e=>e.target.style.backgroundColor="var(--color-blush-pink)",onMouseUp:e=>e.target.style.backgroundColor="var(--color-light-pink)",style:{animation:"fadeInSlide 0.3s ease-out 0.1s forwards"},children:[E.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),E.jsx("span",{className:"text-gray-700",children:"Rules"})]}),E.jsxs("button",{onClick:()=>{n(),t()},className:"w-full text-left px-4 py-4 rounded-lg transition-all duration-150 transform hover:scale-[1.01] active:scale-[0.99] flex items-center gap-3 opacity-0",onMouseEnter:e=>e.target.style.backgroundColor="var(--color-light-pink)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",onMouseDown:e=>e.target.style.backgroundColor="var(--color-blush-pink)",onMouseUp:e=>e.target.style.backgroundColor="var(--color-light-pink)",style:{animation:"fadeInSlide 0.3s ease-out 0.15s forwards"},children:[E.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),E.jsx("span",{className:"text-gray-700",children:"Reset"})]}),E.jsx("div",{className:"pt-3 mt-3 border-t opacity-0",style:{borderTopColor:"var(--color-light-grey)",animation:"fadeInSlide 0.3s ease-out 0.2s forwards"},children:E.jsxs("div",{className:"px-4 py-2 text-sm text-gray-500",children:["Progress: ",a,"/",o," stops complete (",s,"%)"]})})]})})})]})}const ae={},oe=(e,t,a,o)=>{ie(a)&&ae[a]||(ie(a)&&(ae[a]=new Date),((e,t,a,o)=>{var s,n,r,i;const l=[a,{code:t,...o||{}}];if(null==(n=null==(s=null==e?void 0:e.services)?void 0:s.logger)?void 0:n.forward)return e.services.logger.forward(l,"warn","react-i18next::",!0);ie(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),(null==(i=null==(r=null==e?void 0:e.services)?void 0:r.logger)?void 0:i.warn)?e.services.logger.warn(...l):null==console||console.warn})(e,t,a,o))},se=(e,t)=>()=>{if(e.isInitialized)t();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),t()};e.on("initialized",a)}},ne=(e,t,a)=>{e.loadNamespaces(t,se(e,a))},re=(e,t,a,o)=>{if(ie(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(t)>-1)return ne(e,a,o);a.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,se(e,o))},ie=e=>"string"==typeof e,le=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ce={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},de=e=>ce[e];let ue={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(le,de)};let he;const pe={type:"3rdParty",init(e){((e={})=>{ue={...ue,...e}})(e.options.react),(e=>{he=e})(e)}},me=a.createContext();class ge{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const fe=(e,t,a,o)=>e.getFixedT(t,a,o),ve=(e,t={})=>{var o,s,n,r;const{i18n:i}=t,{i18n:l,defaultNS:c}=a.useContext(me)||{},d=i||l||he;if(d&&!d.reportNamespaces&&(d.reportNamespaces=new ge),!d){oe(d,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>{return ie(t)?t:"object"==typeof(a=t)&&null!==a&&ie(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var a},t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}(null==(o=d.options.react)?void 0:o.wait)&&oe(d,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const u={...ue,...d.options.react,...t},{useSuspense:h,keyPrefix:p}=u;let m=c||(null==(s=d.options)?void 0:s.defaultNS);m=ie(m)?[m]:m||["translation"],null==(r=(n=d.reportNamespaces).addUsedNamespaces)||r.call(n,m);const g=(d.isInitialized||d.initializedStoreOnce)&&m.every(e=>((e,t,a={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:a.lng,precheck:(t,o)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!o(t.isLanguageChangingTo,e))return!1}}):(oe(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0))(e,d,u)),f=((e,t,o,s)=>a.useCallback(fe(e,t,o,s),[e,t,o,s]))(d,t.lng||null,"fallback"===u.nsMode?m:m[0],p),v=()=>f,x=()=>fe(d,t.lng||null,"fallback"===u.nsMode?m:m[0],p),[y,b]=a.useState(v);let w=m.join();t.lng&&(w=`${t.lng}${w}`);const N=((e,t)=>{const o=a.useRef();return a.useEffect(()=>{o.current=e},[e,t]),o.current})(w),j=a.useRef(!0);a.useEffect(()=>{const{bindI18n:e,bindI18nStore:a}=u;j.current=!0,g||h||(t.lng?re(d,t.lng,m,()=>{j.current&&b(x)}):ne(d,m,()=>{j.current&&b(x)})),g&&N&&N!==w&&j.current&&b(x);const o=()=>{j.current&&b(x)};return e&&(null==d||d.on(e,o)),a&&(null==d||d.store.on(a,o)),()=>{j.current=!1,d&&e&&(null==e||e.split(" ").forEach(e=>d.off(e,o))),a&&d&&a.split(" ").forEach(e=>d.store.off(e,o))}},[d,w]),a.useEffect(()=>{j.current&&g&&b(v)},[d,p,g]);const k=[y,d,g];if(k.t=y,k.i18n=d,k.ready=g,g)return k;if(!g&&!h)return k;throw new Promise(e=>{t.lng?re(d,t.lng,m,()=>e()):ne(d,m,()=>e())})};function xe(e){const t=a.useRef(null),o=a.useRef(null);a.useEffect(()=>{{t.current=document.activeElement;setTimeout(()=>{if(o.current){const e=ye(o.current);e.length>0&&e[0].focus()}},100);const e=e=>{"Tab"===e.key&&o.current&&function(e,t){const a=ye(t);if(0===a.length)return;const o=a[0],s=a[a.length-1];e.shiftKey?document.activeElement===o&&(e.preventDefault(),s.focus()):document.activeElement===s&&(e.preventDefault(),o.focus())}(e,o.current),"Escape"===e.key&&s()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}},[e]);const s=()=>{const e=new CustomEvent("focusManagementEscape");document.dispatchEvent(e)};return{trapRef:o}}function ye(e){const t=["button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","a[href]",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'].join(", ");return Array.from(e.querySelectorAll(t))}function be({locationName:e,teamName:t,eventName:o,onChangeLocation:s,onChangeTeam:n,onChangeEvent:r,onSave:i,onCancel:l}){const{t:c}=ve(),{trapRef:d}=xe(!0);return a.useEffect(()=>{const e=()=>{l()};return document.addEventListener("focusManagementEscape",e),()=>{document.removeEventListener("focusManagementEscape",e)}},[l]),E.jsxs("div",{ref:d,id:"settings-panel",className:"mt-4",role:"dialog","aria-labelledby":"settings-heading","aria-describedby":"settings-description","aria-modal":"true",children:[E.jsx("h2",{id:"settings-heading",className:"sr-only",children:c("settings.heading")}),E.jsx("p",{id:"settings-description",className:"sr-only",children:c("settings.description")}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"organization-select",className:"block text-sm font-medium text-gray-700 mb-2",children:c("settings.organization")}),E.jsxs("select",{id:"organization-select",value:e,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent opacity-50 cursor-not-allowed",disabled:!0,"aria-describedby":"organization-help",children:[E.jsx("option",{value:"BHHS",children:"BHHS"}),E.jsx("option",{value:"Vail Valley",children:"Vail Valley"}),E.jsx("option",{value:"Vail Village",children:"Vail Village"}),E.jsx("option",{value:"TEST",children:"TEST"})]}),E.jsx("div",{id:"organization-help",className:"sr-only",children:c("settings.organizationHelp")})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"event-input",className:"block text-sm font-medium text-gray-700 mb-2",children:c("settings.event")}),E.jsx("input",{id:"event-input",type:"text",value:o,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:c("settings.eventPlaceholder"),"aria-describedby":"event-help",autoComplete:"off"}),E.jsx("div",{id:"event-help",className:"sr-only",children:c("settings.eventHelp")})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"team-input",className:"block text-sm font-medium text-gray-700 mb-2",children:c("settings.team")}),E.jsx("input",{id:"team-input",type:"text",value:t,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:c("settings.teamPlaceholder"),"aria-describedby":"team-help",autoComplete:"off"}),E.jsx("div",{id:"team-help",className:"sr-only",children:c("settings.teamHelp")})]}),E.jsxs("div",{className:"flex gap-3",role:"group","aria-label":c("accessibility.settingsActions"),children:[E.jsx("button",{onClick:i,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),i())},className:"flex-1 px-4 py-2 text-white font-medium rounded-md transition-all duration-150 transform hover:scale-[1.02] active:scale-[0.98] focus:ring-2 focus:ring-offset-2 focus:ring-opacity-50",style:{backgroundColor:"var(--color-cabernet)"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-cabernet-hover)",onMouseLeave:e=>e.target.style.backgroundColor="var(--color-cabernet)",onFocus:e=>e.target.style.backgroundColor="var(--color-cabernet-hover)",onBlur:e=>e.target.style.backgroundColor="var(--color-cabernet)",onMouseDown:e=>e.target.style.backgroundColor="var(--color-cabernet-active)",onMouseUp:e=>e.target.style.backgroundColor="var(--color-cabernet-hover)","aria-describedby":"save-help",children:c("settings.saveChanges")}),E.jsx("div",{id:"save-help",className:"sr-only",children:c("settings.saveHelp")}),E.jsx("button",{onClick:l,onKeyDown:e=>{"Enter"===e.key||" "===e.key?(e.preventDefault(),l()):"Escape"===e.key&&l()},className:"flex-1 px-4 py-2 font-medium rounded-md transition-all duration-150 transform hover:scale-[1.02] active:scale-[0.98] focus:ring-2 focus:ring-offset-2 focus:ring-opacity-50",style:{backgroundColor:"var(--color-light-grey)",color:"var(--color-dark-neutral)"},onMouseEnter:e=>{e.target.style.backgroundColor="var(--color-warm-grey)",e.target.style.color="var(--color-white)"},onMouseLeave:e=>{e.target.style.backgroundColor="var(--color-light-grey)",e.target.style.color="var(--color-dark-neutral)"},onFocus:e=>{e.target.style.backgroundColor="var(--color-warm-grey)",e.target.style.color="var(--color-white)"},onBlur:e=>{e.target.style.backgroundColor="var(--color-light-grey)",e.target.style.color="var(--color-dark-neutral)"},onMouseDown:e=>e.target.style.backgroundColor="var(--color-blush-pink)",onMouseUp:e=>e.target.style.backgroundColor="var(--color-warm-grey)","aria-describedby":"cancel-help",children:c("settings.cancel")}),E.jsx("div",{id:"cancel-help",className:"sr-only",children:c("settings.cancelHelp")})]})]})]})}const we="var(--color-cabernet)",Ne="var(--color-success)",je="var(--color-light-pink)",ke="var(--color-blush-pink)",Se="var(--color-white)",Ce="var(--color-warm-grey)",Ee=36,Le=28,Ae=160,Te="0.6s cubic-bezier(0.34, 1.56, 0.64, 1)",Ie=.15;const De=a.memo(function({number:e,isCompleted:t,size:o=36,strokeWidth:s=3}){const{radius:n,circumference:r,center:i}=a.useMemo(()=>({radius:(o-s)/2,circumference:(o-s)/2*2*Math.PI,center:o/2}),[o,s]);return t?E.jsx("div",{className:"inline-flex items-center justify-center rounded-full font-semibold text-white",style:{width:.67*o+"px",height:.67*o+"px",backgroundColor:"#10B981",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.25)",fontSize:.31*o+"px"},children:e}):E.jsxs("div",{className:"relative inline-flex items-center justify-center",style:{width:o,height:o},children:[E.jsxs("svg",{width:o,height:o,className:"transform -rotate-90",children:[E.jsx("circle",{cx:i,cy:i,r:n,fill:"none",stroke:"#e5e7eb",strokeWidth:s}),E.jsx("circle",{cx:i,cy:i,r:n,fill:"none",stroke:"#3B82F6",strokeWidth:s,strokeLinecap:"round",strokeDasharray:r,strokeDashoffset:.25*r,style:{animation:"progressPulse 2s ease-in-out infinite"}})]}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-bold text-slate-700",style:{fontSize:.39*o+"px"},children:e})]})}),Oe=a.memo(function({stop:e,state:t,expanded:a,index:o,onRevealNextHint:s,totalHints:n}){return E.jsxs("div",{className:"flex items-center justify-between gap-2",children:[E.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[t.done?E.jsx("div",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-green-500 text-white flex-shrink-0",children:E.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):E.jsx(De,{number:e.originalNumber??o+1,isCompleted:!1,size:Ee}),E.jsx("h3",{className:"text-base font-semibold truncate",style:{color:we},children:e.title})]}),E.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(!t.done||a)&&t.revealedHints<n&&E.jsxs("button",{onClick:e=>{e.stopPropagation(),e.preventDefault(),s()},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.stopPropagation(),e.preventDefault(),s())},className:"px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 focus:ring-2 focus:ring-opacity-50 focus:outline-none","aria-label":`Reveal hint ${t.revealedHints+1} of ${n} for ${e.title}`,style:{backgroundColor:we,color:"white",border:"none",zIndex:1e3,position:"relative"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--color-deep-wine)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=we},children:["💡 Hint ",t.revealedHints+1]}),t.done&&E.jsx("span",{className:"text-lg transition-transform duration-200",style:{color:we,transform:a?"rotate(90deg)":"rotate(0deg)"},children:"▶"})]})]})}),Pe=a.memo(function({stop:e,state:t,expanded:a}){const o=!t.done||a,s=e.hints.slice(0,t.revealedHints);return o?E.jsxs("div",{className:"mt-2",children:[E.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs text-slate-500",children:[E.jsx("span",{children:t.revealedHints>0?`Hint ${Math.min(t.revealedHints,e.hints.length)} of ${e.hints.length}`:"Hints"}),E.jsx("div",{className:"flex gap-1",children:e.hints.map((e,a)=>E.jsx("div",{className:"w-2 h-2 rounded-full transition-colors duration-200",style:{backgroundColor:a<t.revealedHints?we:"#E5E7EB"}},a))})]}),E.jsx("div",{className:"space-y-1",children:s.map((e,t)=>{const a=((e,t)=>{const a=(e||"").toLowerCase();let o="💡",s="General",n="#6B7280";a.includes("look")||a.includes("find")||a.includes("near")||a.includes("behind")?(o="📍",s="Location",n="#10B981"):a.includes("color")||a.includes("shape")||a.includes("see")||a.includes("notice")?(o="👀",s="Visual",n="#3B82F6"):a.includes("history")||a.includes("built")||a.includes("named")||a.includes("fact")?(o="📚",s="History",n="#8B5CF6"):(a.includes("people")||a.includes("ask")||a.includes("local")||a.includes("staff"))&&(o="👥",s="Social",n="#F59E0B");const r=Math.min(t+1,3);return{category:o,categoryName:s,categoryColor:n,difficulty:r,costPoints:r,difficultyLabel:1===r?"Easy":2===r?"Medium":"Hard"}})(e,t);return E.jsx("div",{className:"border-l-4 p-2 rounded-r-xl transition-all duration-300 shadow-sm",style:{backgroundColor:`${a.categoryColor}10`,borderColor:a.categoryColor,opacity:1,transform:"translateX(0)",transition:"all 0.3s ease-out"},children:E.jsxs("div",{className:"flex items-start justify-between gap-3",children:[E.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[E.jsx("span",{className:"flex-shrink-0 text-white text-sm font-bold rounded-full flex items-center justify-center",style:{backgroundColor:a.categoryColor,width:`${Le}px`,height:`${Le}px`},children:a.category}),E.jsx("div",{className:"flex-1",children:E.jsx("p",{className:"text-sm leading-snug mb-1",style:{color:a.categoryColor},children:e})})]}),E.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:E.jsx("div",{className:"px-2 py-1 rounded-full text-[10px] font-medium",style:{backgroundColor:`${a.categoryColor}20`,color:a.categoryColor},children:a.categoryName})})]})},t)})})]}):null}),Me=a.memo(function({stop:e,state:t,expanded:a,displayImage:o}){var s,n,r,i;if(t.done&&!a)return null;const l=null==(s=t.preview)?void 0:s.objectUrl,c=t.photo;return l||c?E.jsx("div",{className:"mt-2 rounded-xl border p-3 shadow-sm",style:{backgroundColor:Se},children:l?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"text-xs uppercase tracking-wide mb-2",style:{color:we},children:"👁️ Preview"}),E.jsx("img",{src:t.preview.objectUrl,alt:`Preview for ${e.title}`,className:"rounded-md object-cover w-full mb-2",style:{height:`${Ae}px`},onError:e=>{e.target.style.display="none"}}),E.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-slate-500",children:["📝 ",null==(r=null==(n=t.preview)?void 0:n.fileMeta)?void 0:r.name," • ",(null==(i=t.preview)?void 0:i.fileMeta)&&Math.round(t.preview.fileMeta.size/1024),"KB"]})]}):E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"text-xs uppercase tracking-wide mb-2",style:{color:Ne},children:"✅ Photo Complete"}),E.jsx("img",{src:o,alt:`Photo for ${e.title}`,className:"rounded-md object-cover w-full mb-2",style:{height:`${Ae}px`},onError:e=>{e.target.style.display="none"}}),E.jsx("div",{className:"mt-2 flex items-center gap-2 text-xs text-slate-500",children:"✨ Your photo"})]})}):E.jsx("div",{className:"mt-2"})}),$e=a.createContext(void 0);function Ve({children:e,defaultDuration:t=5e3}){const[o,s]=a.useState([]),n=a.useRef(new Map),r=a.useCallback(e=>{s(t=>t.filter(t=>t.id!==e));const t=n.current.get(e);t&&(clearTimeout(t),n.current.delete(e))},[]),i=a.useCallback((e,a="info",o={})=>{const i=`toast-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{duration:l=t,dismissible:c=!0}=o,d={id:i,message:e,variant:a,duration:l,dismissible:c};if(s(e=>[...e,d]),l>0){const e=setTimeout(()=>{r(i)},l);n.current.set(i,e)}return i},[t,r]),l=a.useCallback(()=>{n.current.forEach(e=>clearTimeout(e)),n.current.clear(),s([])},[]),c={toasts:o,addToast:i,removeToast:r,clearAllToasts:l};return E.jsxs($e.Provider,{value:c,children:[e,E.jsx(Be,{})]})}function Be(){const{toasts:e,removeToast:t}=Fe();return 0===e.length?null:E.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2","aria-live":"polite","aria-label":"Notifications",children:e.map(e=>E.jsx(Re,{toast:e,onDismiss:t},e.id))})}function Re({toast:e,onDismiss:t}){return E.jsxs("div",{className:`\n        min-w-[300px] max-w-md p-4 rounded-lg border-2 shadow-lg\n        transform transition-all duration-300 ease-in-out\n        ${{success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"}[e.variant]}\n      `,role:"status","aria-live":"polite",children:[E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("span",{className:"text-lg flex-shrink-0","aria-hidden":"true",children:{success:"✅",error:"❌",warning:"⚠️",info:"ℹ️"}[e.variant]}),E.jsx("div",{className:"flex-1 min-w-0",children:E.jsx("p",{className:"text-sm font-medium break-words",children:e.message})}),e.dismissible&&E.jsx("button",{onClick:()=>t(e.id),className:"flex-shrink-0 ml-2 text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 rounded","aria-label":"Dismiss notification",children:E.jsx("span",{className:"text-lg","aria-hidden":"true",children:"×"})})]}),e.duration&&e.duration>0&&E.jsx("div",{className:"mt-2 bg-gray-200 rounded-full h-1 overflow-hidden",children:E.jsx("div",{className:"bg-current h-full rounded-full transition-all ease-linear w-full",style:{transitionDuration:`${e.duration}ms`,width:"0%"}})})]})}function Fe(){const e=a.useContext($e);if(void 0===e)throw new Error("useToasts must be used within a ToastProvider");return e}function ze(){const{addToast:e}=Fe();return{success:(t,a)=>e(t,"success",a),error:(t,a)=>e(t,"error",a),warning:(t,a)=>e(t,"warning",a),info:(t,a)=>e(t,"info",a)}}const Ue=f()(X((e,t)=>({progress:{},setProgress:t=>e({progress:t}),updateStopProgress:(t,a)=>e(e=>({progress:{...e.progress,[t]:a}})),resetProgress:()=>e({progress:{}}),resetHints:()=>e(e=>{const t={...e.progress};return Object.keys(t).forEach(e=>{t[e]={...t[e],revealedHints:1}}),{progress:t}}),selectPhoto:(t,a)=>{const o=URL.createObjectURL(a),s=new FileReader;s.onload=s=>{var n;const r=null==(n=s.target)?void 0:n.result;e(e=>{var s,n,i;const l=null==(s=e.progress[t])?void 0:s.preview;(null==l?void 0:l.objectUrl)&&URL.revokeObjectURL(l.objectUrl);const c={objectUrl:o,dataUrl:r,fileMeta:{name:a.name,type:a.type,size:a.size},savedLocally:!0,savedAt:Date.now()};return{progress:{...e.progress,[t]:{...e.progress[t],done:!1,notes:(null==(n=e.progress[t])?void 0:n.notes)||"",photo:null,revealedHints:(null==(i=e.progress[t])?void 0:i.revealedHints)||1,preview:c}}}})};const n=document.createElement("canvas"),r=n.getContext("2d"),i=new Image;i.onload=()=>{const e=800;let{width:t,height:a}=i;t>a?t>e&&(a=a*e/t,t=e):a>e&&(t=t*e/a,a=e),n.width=t,n.height=a,null==r||r.drawImage(i,0,0,t,a),n.toBlob(e=>{e&&s.readAsDataURL(e)},"image/jpeg",.8)},i.src=o},hydratePreviewsFromStorage:()=>{},cancelPreview:t=>{e(e=>{var a,o,s,n,r;const i=null==(a=e.progress[t])?void 0:a.preview;return(null==i?void 0:i.objectUrl)&&URL.revokeObjectURL(i.objectUrl),{progress:{...e.progress,[t]:{...e.progress[t],done:(null==(o=e.progress[t])?void 0:o.done)||!1,notes:(null==(s=e.progress[t])?void 0:s.notes)||"",photo:(null==(n=e.progress[t])?void 0:n.photo)||null,revealedHints:(null==(r=e.progress[t])?void 0:r.revealedHints)||1,preview:void 0}}}})}}),{name:"progress-store",partialize:e=>({progress:e.progress})}));function He({stop:e,state:t,expanded:o,isUploading:s,onUpload:n}){var r;const[i,l]=a.useState(null),[c,d]=a.useState(null),{success:u,error:h}=ze(),{selectPhoto:p,cancelPreview:m}=Ue();a.useEffect(()=>{s&&l(null)},[s]);const g=null==(r=t.preview)?void 0:r.objectUrl;if(t.done&&!o||t.photo&&!g)return null;const f=a.useCallback(async t=>{var a;try{l(null),await n(e.id,t);const a=t.type.startsWith("video/")?"Video":"Photo";u(`${a} uploaded successfully for ${e.title}!`)}catch(o){let e="Upload failed. Please try again.";try{const t=o,s=(null==(a=null==t?void 0:t.body)?void 0:a.error)||(null==t?void 0:t.message)||(null==t?void 0:t.statusText);s&&(e=`Upload failed: ${s}`),(null==t?void 0:t.status)&&(e+=` (HTTP ${t.status})`)}catch{}l(e),h(e)}},[n,e.id,u,h,e.title]),v=a.useCallback(t=>{var a;const o=null==(a=t.target.files)?void 0:a[0];if(o&&(o.type.startsWith("image/")||o.type.startsWith("video/"))){const a=o.type.startsWith("video/"),s=a?209715200:12582912,n=a?"200MB":"12MB";if(o.size>s)return h(`File size must be under ${n}`),void(t.target.value="");d(o),p(e.id,o)}else h("Please select an image or video file");t.target.value=""},[p,e.id,h]),x=a.useCallback(()=>{c&&f(c)},[c,f]);return E.jsxs("div",{className:"mt-3 space-y-2",children:[E.jsx("input",{type:"file",accept:"image/*,video/*",onChange:v,className:"sr-only",id:`file-${e.id}`,"aria-describedby":`upload-help-${e.id}`}),g?E.jsxs("div",{className:"space-y-2",children:[E.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),c&&f(c)},disabled:s||!c,className:"w-full px-6 py-4 text-white text-lg font-semibold rounded-xl flex items-center justify-center gap-3 transition-all duration-200 transform focus:ring-2 focus:ring-offset-2 focus:ring-opacity-50 focus:outline-none shadow-lg "+(s||!c?"cursor-wait opacity-75":"hover:scale-[1.02] active:scale-[0.98] hover:shadow-xl"),style:{backgroundColor:s?Ce:we},"aria-label":s?"Saving media":`Save media for ${e.title}`,children:s?E.jsxs(E.Fragment,{children:[E.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving Media..."]}):E.jsxs(E.Fragment,{children:[E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Media"]})}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("label",{htmlFor:`file-${e.id}`,className:"flex-1 px-4 py-3 bg-gray-600 hover:bg-gray-700 focus:bg-gray-700 focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50 focus:outline-none text-white text-sm font-medium rounded-lg cursor-pointer flex items-center justify-center gap-2 transition-colors duration-200",onClick:e=>e.stopPropagation(),onKeyDown:t=>{var a;"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),null==(a=document.getElementById(`file-${e.id}`))||a.click())},tabIndex:0,role:"button","aria-label":`Change media for ${e.title}`,children:"🔄 Change"}),E.jsx("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),m(e.id),d(null),l(null)},className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 focus:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 focus:outline-none text-white text-sm font-medium rounded-lg transition-colors duration-200","aria-label":`Cancel media selection for ${e.title}`,children:"❌ Cancel"})]})]}):E.jsx("label",{htmlFor:`file-${e.id}`,className:"w-full px-6 py-4 text-white text-lg font-semibold rounded-xl cursor-pointer flex items-center justify-center gap-3 transition-all duration-200 transform focus:ring-2 focus:ring-offset-2 focus:ring-opacity-50 focus:outline-none shadow-lg "+(s?"cursor-wait":"hover:scale-[1.02] active:scale-[0.98] hover:shadow-xl"),style:{backgroundColor:s?Ce:we},onMouseEnter:e=>{s||(e.target.style.backgroundColor="var(--color-deep-wine)")},onMouseLeave:e=>{s||(e.target.style.backgroundColor=we)},onFocus:e=>{s||(e.target.style.backgroundColor="var(--color-deep-wine)")},onBlur:e=>{s||(e.target.style.backgroundColor=we)},onClick:e=>e.stopPropagation(),onKeyDown:t=>{var a;"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),null==(a=document.getElementById(`file-${e.id}`))||a.click())},tabIndex:0,role:"button","aria-disabled":s,"aria-label":s?"Processing media upload":`Upload photo or video for ${e.title}`,children:s?E.jsxs(E.Fragment,{children:[E.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading Media..."]}):E.jsxs(E.Fragment,{children:[E.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2-2V9z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Upload Photo/Video"]})}),E.jsx("p",{className:"text-xs text-center text-slate-500 px-2",children:"Take a creative photo or video together at this location to complete the challenge"}),i&&c&&!s&&E.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 space-y-2",children:[E.jsxs("div",{className:"flex items-start gap-2",children:[E.jsx("span",{className:"text-red-500 flex-shrink-0","aria-hidden":"true",children:"⚠️"}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("p",{className:"text-sm text-red-700 font-medium",children:i}),E.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Selected: ",c.name]})]})]}),E.jsx("button",{onClick:x,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),x())},className:"w-full px-4 py-2 bg-red-600 hover:bg-red-700 focus:bg-red-700 focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 focus:outline-none text-white text-sm font-medium rounded-lg transition-colors duration-200","aria-label":`Retry uploading ${c.name} for ${e.title}`,children:"🔄 Retry Upload"})]}),E.jsx("div",{id:`upload-help-${e.id}`,className:"sr-only",children:"Select an image or video file to upload as your media for this stop"})]})}const _e=a.memo(function({stop:e,state:t,expanded:a}){return!t.done||t.done&&!a?null:E.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm italic",style:{color:we},children:[E.jsx("span",{children:"❤"})," ",e.funFact]})}),qe=a.memo(function({stop:e,progress:t,onUpload:o,onToggleExpanded:s,expanded:n,uploadingStops:r,transitioningStops:i,revealNextHint:l,index:c}){const d=Ue(t=>t.progress[e.id])||{done:!1,notes:"",photo:null,revealedHints:1},{displayImage:u,isTransitioning:h,isUploading:p}=function({stop:e,progress:t,uploadingStops:o,transitioningStops:s,index:n}){const r=a.useMemo(()=>t[e.id]||{done:!1,notes:"",photo:null,revealedHints:1},[t,e.id,e.hints.length]),i=a.useMemo(()=>r.photo||"/images/selfie-placeholder.svg",[r.photo,e.id]),l=a.useMemo(()=>s.has(e.id),[s,e.id]),c=a.useMemo(()=>o.has(e.id),[o,e.id]);return{state:r,displayImage:i,isTransitioning:l,isUploading:c}}({stop:e,progress:t,uploadingStops:r,transitioningStops:i,index:c}),m=a.useCallback(()=>{d.done&&!h&&s(e.id)},[s,e.id,d.done,h]);return E.jsxs(E.Fragment,{children:[E.jsx("article",{className:"mt-3 shadow-lg border rounded-xl p-3 transition-all duration-1000 ease-in-out "+(d.done?"cursor-pointer hover:shadow-xl hover:scale-[1.02] transition-all focus:shadow-xl focus:ring-2 focus:ring-opacity-50":"hover:shadow-xl"),onClick:m,onKeyDown:e=>{!d.done||h||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m())},tabIndex:d.done?0:-1,role:d.done?"button":"article","aria-expanded":d.done?n:void 0,"aria-label":d.done?`${n?"Collapse":"Expand"} completed stop: ${e.title}`:void 0,style:{backgroundColor:h?je:Se,borderColor:h?Ne:d.done?ke:"#6B728030",borderWidth:h?"2px":"1px",transform:h?"scale(1.05) translateY(-4px)":"scale(1)",transition:Te,animation:`fadeInSlide 0.4s ease-out ${c*Ie}s forwards`,opacity:0},children:E.jsx(Oe,{stop:e,state:d,expanded:n,index:c,onRevealNextHint:l,totalHints:e.hints.length})}),E.jsx(Pe,{stop:e,state:d,expanded:n}),E.jsx(Me,{stop:e,state:d,expanded:n,displayImage:u}),(!d.done||n)&&E.jsx(He,{stop:e,state:d,expanded:n,isUploading:p,onUpload:o}),E.jsx(_e,{stop:e,state:d,expanded:n})]})}),We=a.memo(function({src:e,alt:t,className:o="",style:s={},placeholder:n="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMCAwaDIwMHYyMDBIMHoiIGZpbGw9IiNmNWY1ZjUiLz48cGF0aCBkPSJNOTMuMDIgNzguMzNjLTIuNzQgMC01IDIuMjYtNSA1IDAgMi43NCAyLjI2IDUgNSA1IDIuNzQgMCA1LTIuMjYgNS01IDAtMi43NC0yLjI2LTUtNS01em0tNCAyMS45NWMyLjczLTEuNiA5LjQ0LTMuNSAxOC4wNi0zLjVzMTUuMzMgMS45IDE4LjA2IDMuNWMwIDAtNy4zLTIuNTQtMTguMDYtMi41NHMtMTguMDYgMi41NC0xOC4wNiAyLjU0eiIgZmlsbD0iI2Q5ZDlkOSIvPjwvc3ZnPg==",onError:r,loading:i="lazy",webpSrc:l}){const[c,d]=a.useState(!1),[u,h]=a.useState(!1),[p,m]=a.useState(n),g=a.useRef(null);a.useEffect(()=>{const t=()=>new Promise(e=>{const t=new Image;t.onload=t.onerror=()=>e(2===t.height),t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"});(async()=>{if("IntersectionObserver"in window&&"lazy"===i&&g.current){const a=new IntersectionObserver(o=>{o.forEach(async o=>{if(o.isIntersecting){const s=!!l&&await t(),n=s&&l?l:e,r=new Image;r.onload=()=>{m(n),d(!0)},r.onerror=()=>{if(h(!0),l&&s){const t=new Image;t.onload=()=>{m(e),d(!0)},t.onerror=()=>h(!0),t.src=e}},r.src=n,a.unobserve(o.target)}})},{rootMargin:"50px",threshold:.1});return a.observe(g.current),()=>a.disconnect()}{const a=!!l&&await t();m(a&&l?l:e),d(!0)}})()},[e,l,i]);return E.jsxs("div",{className:`relative ${o}`,style:s,children:[E.jsx("img",{ref:g,src:p,alt:t,className:`transition-opacity duration-300 ${c&&!u?"opacity-100":"opacity-70"} ${o}`,style:s,onError:e=>{h(!0),r&&r(e)},onLoad:()=>{d(!0)},loading:i}),!c&&!u&&E.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:E.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-600"})}),u&&E.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 text-gray-500 text-sm",children:"Failed to load image"})]})}),Ge=a.memo(function({completedStops:e,expandedStops:t,progress:a,onToggleExpanded:o,completedSectionExpanded:s,onToggleCompletedSection:n}){return 0===e.length?null:E.jsxs("div",{className:"mt-6 border rounded-lg shadow-sm",style:{backgroundColor:"var(--color-white)",borderColor:"var(--color-light-grey)"},children:[E.jsxs("button",{className:"w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 focus:bg-gray-50 focus:ring-2 focus:ring-opacity-50 focus:outline-none transition-colors rounded-t-lg",onClick:n,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n())},"aria-expanded":s,"aria-controls":"completed-accordion-content",style:{backgroundColor:s?"var(--color-light-pink)":"transparent"},children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("span",{className:"text-lg font-semibold",style:{color:"var(--color-cabernet)"},children:"📋 Completed Locations"}),E.jsx("span",{className:"inline-flex items-center justify-center px-2 py-1 rounded-full text-sm font-bold text-white min-w-[28px] h-7",style:{backgroundColor:"#10B981",boxShadow:"0 2px 8px rgba(16, 185, 129, 0.25)",fontSize:"13px"},children:e.length})]}),E.jsx("span",{style:{color:"var(--color-cabernet)"},children:s?"▼":"▶"})]}),s&&E.jsx("div",{id:"completed-accordion-content",className:"border-t",style:{borderColor:"var(--color-light-grey)"},children:e.map(e=>{const s=a[e.id],n=t[e.id]||!1;return E.jsxs("div",{className:"p-4 border-b last:border-b-0",style:{borderColor:"var(--color-light-grey)"},children:[E.jsxs("div",{className:"w-full text-left flex items-center justify-between hover:bg-gray-50 focus-within:bg-gray-50 p-2 -m-2 rounded transition-colors",children:[E.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 cursor-pointer",onClick:()=>o(e.id),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),o(e.id))},tabIndex:0,role:"button","aria-expanded":n,"aria-controls":`completed-stop-${e.id}`,"aria-label":`${n?"Collapse":"Expand"} details for completed stop: ${e.title}`,children:[(null==s?void 0:s.photo)&&E.jsx(We,{src:s.photo,alt:`Completed photo for ${e.title}`,className:"w-12 h-12 rounded-lg shadow-sm border",style:{borderColor:"var(--color-success)"},loading:"lazy"}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("h3",{className:"text-base font-medium truncate",style:{color:"var(--color-dark-neutral)"},children:e.title}),(null==s?void 0:s.completedAt)&&E.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Completed ",new Date(s.completedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),E.jsx("span",{className:"text-sm transition-transform duration-200 ml-2",style:{color:"var(--color-cabernet)",transform:n?"rotate(90deg)":"rotate(0deg)"},children:"▶"})]}),E.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[E.jsx("button",{onClick:t=>{t.stopPropagation(),o(e.id)},onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),o(e.id))},className:"p-2 rounded-lg transition-colors hover:bg-gray-100 focus:bg-gray-100 focus:ring-2 focus:ring-opacity-50 focus:outline-none","aria-label":`${n?"Collapse":"View"} details for ${e.title}`,children:E.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(null==s?void 0:s.photo)&&E.jsx("button",{onClick:async t=>{t.stopPropagation();try{await navigator.share({title:`${e.title} - Completed!`,text:`I just completed "${e.title}" on my scavenger hunt!`,url:window.location.href})}catch(a){navigator.clipboard.writeText(window.location.href)}},onKeyDown:async t=>{if("Enter"===t.key||" "===t.key){t.preventDefault(),t.stopPropagation();try{await navigator.share({title:`${e.title} - Completed!`,text:`I just completed "${e.title}" on my scavenger hunt!`,url:window.location.href})}catch(a){navigator.clipboard.writeText(window.location.href)}}},className:"p-2 rounded-lg transition-colors hover:bg-gray-100 focus:bg-gray-100 focus:ring-2 focus:ring-opacity-50 focus:outline-none","aria-label":`Share completion of ${e.title}`,children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})})]})]}),n&&E.jsxs("div",{id:`completed-stop-${e.id}`,className:"px-4 pb-3",children:[s.photo&&E.jsx(We,{src:s.photo,alt:`Photo for ${e.title}`,className:"w-full max-w-sm mx-auto rounded-lg shadow-sm mt-3",style:{maxHeight:"300px",objectFit:"cover"},loading:"lazy"}),E.jsxs("div",{className:"mt-3 text-sm italic",style:{color:"var(--color-cabernet)"},children:[E.jsx("span",{children:"❤"})," ",e.funFact]})]})]},e.id)})})]})});function Ke({stops:e,progress:t,transitioningStops:a,completedSectionExpanded:o,onToggleCompletedSection:s,expandedStops:n,onToggleExpanded:r,uploadingStops:i,onPhotoUpload:l,setProgress:c,view:d="current"}){const{updateStopProgress:u}=Ue(),h=e.filter(e=>{var o;return(null==(o=t[e.id])?void 0:o.done)&&!a.has(e.id)}).sort((e,a)=>{var o,s;const n=(null==(o=t[e.id])?void 0:o.completedAt)||"0",r=(null==(s=t[a.id])?void 0:s.completedAt)||"0";return n.localeCompare(r)}),p=h.length,m={};h.forEach((e,t)=>{m[e.id]=t+1});const g=[...e].map(e=>{var o;const s=null==(o=t[e.id])?void 0:o.done,n=a.has(e.id);return s&&!n?{...e,originalNumber:m[e.id]||1}:{...e,originalNumber:p+1}}),f=0===a.size?g.find(e=>{var a;return!(null==(a=t[e.id])?void 0:a.done)}):null,v=g.filter(e=>a.has(e.id)),x=[];x.push(...v),f&&x.push(f);return"completed"===d?E.jsx(Ge,{completedStops:h,expandedStops:n,progress:t,onToggleExpanded:r,completedSectionExpanded:!0,onToggleCompletedSection:s}):E.jsx(E.Fragment,{children:x.map((o,s)=>E.jsx(qe,{stop:o,progress:t,onUpload:l,onToggleExpanded:r,expanded:n[o.id]||!1,uploadingStops:i,transitioningStops:a,revealNextHint:()=>(a=>{var o;const s=e.find(e=>e.id===a),n=t[a]||{done:!1,notes:"",photo:null,revealedHints:1};if(s&&n.revealedHints<((null==(o=null==s?void 0:s.hints)?void 0:o.length)||0)){const e={...n,revealedHints:n.revealedHints+1};u(a,e),setTimeout(()=>{Ue.getState().progress[a]},0)}})(o.id),index:s},o.id))})}function Ye({onEventClick:e,onChallengesClick:t,onSocialClick:o,eventEnabled:s=!0,challengesEnabled:n=!0,socialEnabled:r=!0,activePage:i,progressPercent:l=0,completeCount:c=0,totalStops:d=0}){const[u,h]=a.useState(!1);return a.useEffect(()=>{let e=window.innerHeight;const t=()=>{if(window.innerWidth<768){const t=window.innerHeight,a=e-t,o=document.activeElement&&("INPUT"===document.activeElement.tagName||"TEXTAREA"===document.activeElement.tagName||"true"===document.activeElement.contentEditable);h(a>200&&o)}else h(!1)};return e=window.innerHeight,window.addEventListener("resize",t),document.addEventListener("focusin",t),document.addEventListener("focusout",t),()=>{window.removeEventListener("resize",t),document.removeEventListener("focusin",t),document.removeEventListener("focusout",t)}},[]),E.jsxs("footer",{className:"fixed bottom-0 left-0 right-0 z-40 transition-transform duration-300 "+(u?"md:transform-none transform translate-y-full":"transform translate-y-0"),style:{backgroundColor:"var(--color-white)",borderTopColor:"var(--color-light-grey)",paddingBottom:u?"0":"env(safe-area-inset-bottom)",boxShadow:window.innerWidth>=768?"0 -1px 4px rgba(0, 0, 0, 0.05)":"0 -2px 8px rgba(0, 0, 0, 0.1)"},role:"contentinfo","aria-label":"Mobile navigation footer",children:[d>0&&E.jsx("div",{className:"h-1 bg-gray-200",children:E.jsx("div",{className:"h-full transition-all duration-500 ease-out",style:{width:`${l}%`,backgroundColor:"var(--color-cabernet)"}})}),E.jsx("div",{className:"border-t",style:{borderTopColor:"var(--color-light-grey)"},children:E.jsxs("nav",{role:"navigation",className:"flex items-center justify-around px-4 py-3 md:px-8 md:py-4 lg:max-w-4xl lg:mx-auto","aria-label":"Main navigation",children:[E.jsxs("button",{onClick:s?e||(()=>{}):void 0,disabled:!s,className:"flex flex-col items-center gap-1 px-3 py-2 md:px-4 md:py-3 rounded-lg transition-all duration-200 min-w-0 flex-1 md:max-w-32 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",style:{color:"event"===i?"var(--color-cabernet)":s?"var(--color-medium-grey)":"var(--color-light-grey)",backgroundColor:"event"===i?"var(--color-light-pink)":"transparent",cursor:s?"pointer":"not-allowed",opacity:s?1:.5},onMouseEnter:e=>{s&&(e.currentTarget.style.backgroundColor="var(--color-light-pink)",e.currentTarget.style.color="var(--color-cabernet)")},onMouseLeave:e=>{s&&(e.currentTarget.style.backgroundColor="event"===i?"var(--color-light-pink)":"transparent",e.currentTarget.style.color="event"===i?"var(--color-cabernet)":"var(--color-medium-grey)")},onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||!s||(t.preventDefault(),null==e||e())},"aria-label":"Navigate to event information and details",role:"button",tabIndex:0,children:[E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),E.jsx("span",{className:"text-xs font-medium truncate",children:"Event"})]}),E.jsxs("button",{onClick:n?t||(()=>{}):void 0,disabled:!n,className:"flex flex-col items-center gap-1 px-3 py-2 md:px-4 md:py-3 rounded-lg transition-all duration-200 min-w-0 flex-1 md:max-w-32 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",style:{color:"challenges"===i?"var(--color-cabernet)":n?"var(--color-medium-grey)":"var(--color-light-grey)",backgroundColor:"challenges"===i?"var(--color-light-pink)":"transparent",cursor:n?"pointer":"not-allowed",opacity:n?1:.5},onMouseEnter:e=>{n&&(e.currentTarget.style.backgroundColor="var(--color-light-pink)",e.currentTarget.style.color="var(--color-cabernet)")},onMouseLeave:e=>{n&&(e.currentTarget.style.backgroundColor="challenges"===i?"var(--color-light-pink)":"transparent",e.currentTarget.style.color="challenges"===i?"var(--color-cabernet)":"var(--color-medium-grey)")},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||!n||(e.preventDefault(),null==t||t())},"aria-label":"Navigate to hunt challenges and scavenger hunt activities",role:"button",tabIndex:0,children:[E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}),E.jsx("span",{className:"text-xs font-medium truncate",children:"Challenges"})]}),E.jsxs("button",{onClick:r?o||(()=>{}):void 0,disabled:!r,className:"flex flex-col items-center gap-1 px-3 py-2 md:px-4 md:py-3 rounded-lg transition-all duration-200 min-w-0 flex-1 md:max-w-32 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",style:{color:"social"===i?"var(--color-cabernet)":r?"var(--color-medium-grey)":"var(--color-light-grey)",backgroundColor:"social"===i?"var(--color-light-pink)":"transparent",cursor:r?"pointer":"not-allowed",opacity:r?1:.5},onMouseEnter:e=>{r&&(e.currentTarget.style.backgroundColor="var(--color-light-pink)",e.currentTarget.style.color="var(--color-cabernet)")},onMouseLeave:e=>{r&&(e.currentTarget.style.backgroundColor="social"===i?"var(--color-light-pink)":"transparent",e.currentTarget.style.color="social"===i?"var(--color-cabernet)":"var(--color-medium-grey)")},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||!r||(e.preventDefault(),null==o||o())},"aria-label":"Navigate to social feed and photo sharing",role:"button",tabIndex:0,children:[E.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),E.jsx("span",{className:"text-xs font-medium truncate",children:"Social"})]})]})})]})}function Je(e){return e.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}const Ze=a.createContext(null);function Qe({location:e="",team:t="",sessionId:a="",eventName:o="",locationSlug:s,teamSlug:n,children:r}){const i={dateISO:(new Date).toISOString().split("T")[0],locationSlug:s||(e?Je(e):""),teamSlug:n||(t?Je(t):""),sessionId:a,eventName:o};return E.jsx(Ze.Provider,{value:i,children:r})}const Xe=f()(X((e,t)=>({sessionId:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),teamPhotos:{},setSessionId:t=>e({sessionId:t}),saveTeamPhoto:(t,a,o,s)=>{e(e=>{const n={...e.teamPhotos};n[t]||(n[t]={}),n[t][a]||(n[t][a]={});const r=(n[t][a][o]||[]).filter(e=>e.locationId!==s.locationId);return r.push(s),n[t][a][o]=r,{teamPhotos:n}})},getTeamPhotos:(e,a,o)=>{var s,n;return(null==(n=null==(s=t().teamPhotos[e])?void 0:s[a])?void 0:n[o])||[]},clearTeamPhotos:(t,a,o)=>{e(e=>{var s,n;const r={...e.teamPhotos};return(null==(n=null==(s=r[t])?void 0:s[a])?void 0:n[o])&&delete r[t][a][o],{teamPhotos:r}})},clearAllTeamData:()=>{e({teamPhotos:{}})},switchTeam:(e,a,o)=>{var s,n;return(null==(n=null==(s=t().teamPhotos[a])?void 0:s[o])?void 0:n[e])||[]}}),{name:"vail-hunt-store",partialize:e=>({sessionId:e.sessionId,teamPhotos:e.teamPhotos})})),et=f()(X(e=>({currentPage:"hunt",taskTab:"current",navigate:t=>{e({currentPage:t})},setTaskTab:t=>{e({taskTab:t})}}),{name:"nav-store",partialize:e=>({currentPage:e.currentPage,taskTab:e.taskTab})}));const tt=[{id:"covered-bridge",title:"Covered Bridge",hints:["Begin where timber frames something precious flowing beneath.","Lovers pause under wooden shelter as water rushes below.","The iconic covered bridge spans Gore Creek in Vail Village."],funFact:"Vail's most popular proposal spot, decorated with thousands of twinkling lights in winter!",maps:"https://www.google.com/maps/search/?api=1&query=Covered+Bridge+Vail+Colorado"},{id:"betty-ford-gardens",title:"Betty Ford Alpine Gardens",hints:["Seek the highest place where wildflowers dance in mountain air.","A former First Lady's name graces this botanical sanctuary.","North America's highest botanical garden blooms at 8,200 feet."],funFact:"Features a dramatic 120-foot waterfall cascading through the Alpine Rock Garden!",maps:"https://www.google.com/maps/search/?api=1&query=Betty+Ford+Alpine+Gardens+Vail"},{id:"gondola-one",title:"Gondola One (Eagle Bahn)",hints:["Rise above the village where hearts take flight.","Soar like eagles in suspended chambers above the trees.","The Eagle Bahn Gondola lifts you from Lionshead Village."],funFact:"At over 10,000 feet, this is the top proposal spot with Mount of the Holy Cross views!",maps:"https://www.google.com/maps/search/?api=1&query=Eagle+Bahn+Gondola+Vail"},{id:"international-bridge",title:"International Bridge",hints:["Where many nations unite in colorful display above flowing water.","Flags of the world flutter as you cross from one side to another.","The International Bridge spans Gore Creek with flags from every continent."],funFact:"Features flags from every continent creating a United Nations of romance!",maps:"https://www.google.com/maps/search/?api=1&query=International+Bridge+Vail+Village"},{id:"vail-chapel",title:"Vail Interfaith Chapel",hints:["Find peace where all faiths gather by rushing waters.","A sanctuary nestled among pines where vows echo eternally.","The Interfaith Chapel sits quietly beside Gore Creek."],funFact:"Tyrolean design with modernist glue-laminated arches creates unique sacred geometry!",maps:"https://www.google.com/maps/search/?api=1&query=Vail+Interfaith+Chapel"},{id:"mountain-plaza",title:"Solaris Plaza",hints:["Where fire pits warm hearts beneath twinkling lights.","A gathering place where warmth glows beneath the stars.","Solaris Plaza offers cozy fire pits and evening ambiance."],funFact:"Features cozy fire pits perfect for roasting s'mores under the mountain stars!",maps:"https://www.google.com/maps/search/?api=1&query=Solaris+Plaza+Vail"},{id:"arrabelle",title:"Arrabelle at Vail Square",hints:["European elegance meets mountain majesty in luxury's embrace.","A grand hotel where alpine charm meets Continental sophistication.","The Arrabelle presides over Vail Square in Lionshead Village."],funFact:"Features an open-air ice skating rink in winter with European Old World charm!",maps:"https://www.google.com/maps/search/?api=1&query=Arrabelle+Vail+Square"},{id:"piney-river",title:"Piney River Ranch",hints:["Journey beyond the village to where wilderness meets wonder.","A rustic ranch sits at the edge of pristine mountain waters.","Piney River Ranch offers serenity beside a crystal clear lake."],funFact:"A hidden wilderness gem offering pristine mountain lake reflections away from crowds!",maps:"https://www.google.com/maps/search/?api=1&query=Piney+River+Ranch+Vail"},{id:"sculpture-garden",title:"Vail Village Sculpture Walk",hints:["Art speaks the language of love along winding pathways.","Bronze and stone creations line the cobblestone journey.","The Village Sculpture Walk displays art throughout Vail's pedestrian core."],funFact:"Features Einstein's bronze sculpture where you can sit and chat with a genius!",maps:"https://www.google.com/maps/search/?api=1&query=Vail+Village+Sculpture+Walk"},{id:"the-10th",title:"The 10th Restaurant",hints:["Ascend to where champagne bubbles meet thin mountain air.","At the mountain's peak, toast with panoramic alpine views.","The 10th Restaurant crowns Vail Mountain at 11,570 feet elevation."],funFact:"At 11,570 feet elevation, toast with champagne where thin air makes bubbles extra special!",maps:"https://www.google.com/maps/search/?api=1&query=The+10th+Restaurant+Vail+Mountain"},{id:"vista-bahn",title:"Vista Bahn Mid-Vail",hints:["Pause halfway to heaven where the valley spreads below.","A mid-mountain stop offers breathtaking panoramic views.","Vista Bahn's mid-station provides the perfect vantage point."],funFact:'The perfect "halfway to heaven" stop with breathtaking panoramic valley views!',maps:"https://www.google.com/maps/search/?api=1&query=Vista+Bahn+Mid-Vail"},{id:"ford-amphitheater",title:"Gerald R. Ford Amphitheater",hints:["Where music and mountains create magic under starlit skies.","A presidential namesake hosts performances in natural grandeur.","The Gerald R. Ford Amphitheater sits in a natural mountain bowl."],funFact:"Natural mountain amphitheater setting with wildflowers peaking in July under the stars!",maps:"https://www.google.com/maps/search/?api=1&query=Gerald+R.+Ford+Amphitheater+Vail"}],at=[{id:"international-bridge",title:"International Bridge",emoji:"🏞",hints:["Right next to the covered bridge, but this one is wide open to the sky.","It crosses Gore Creek where concerts and festivals often spill into the streets.","Look for the stone bridge lined with flags — you can't miss it."],answer:"International Bridge",challenge:"Sneak under the bridge and snap a playful selfie looking up — bonus points if you catch the flags above your head.",funFact:"The flags lining the bridge often change with events and seasons, making it a living backdrop for photos.",maps:"https://www.google.com/maps/search/?api=1&query=International+Bridge+Vail+Village+Colorado"},{id:"yama-sushi",title:"Yama Sushi",emoji:"🍣",hints:["Across from The Remedy Bar, this spot trades hot toddies for sake.","Small, modern, and often packed with locals after the slopes.","The Japanese restaurant near Solaris known for creative rolls and late-night vibes."],answer:"Yama Sushi",challenge:'Pretend your fingers are chopsticks and do a "sushi cheers" pose — no sushi required.',funFact:"A compact, locals-loved spot where chefs sometimes finish dishes with a quick torch right at the bar.",maps:"https://www.google.com/maps/search/?api=1&query=Yama+Sushi+Vail+Village+Colorado"},{id:"lodge-at-vail",title:"Lodge at Vail",emoji:"🏨",hints:["Just steps from Gondola One, across from the pirate ship playground.","One of Vail's original hotels, full of wood beams and alpine charm.","The classic mountain lodge where après ski feels timeless."],answer:"Lodge at Vail",challenge:'Slip through the lodge and take a secret "spy mission" photo in the elevator — just the two of you.',funFact:"Opened in 1962, it was Vail’s first hotel and helped kickstart the village’s alpine vibe.",maps:"https://www.google.com/maps/search/?api=1&query=Lodge+at+Vail+Colorado"},{id:"patagonia",title:"Patagonia",emoji:"🧥",hints:["Near Mountain Standard and Sweet Basil, but it sells jackets instead of food.","A favorite shop for climbers and skiers looking for gear with a purpose.","The outdoor store with the mountain logo and eco-friendly mission."],answer:"Patagonia",challenge:"Try on the goofiest gear you can find and pose like you're heading to climb Everest… tomorrow.",funFact:"The brand donates 1% of sales to environmental causes and encourages repairing gear instead of replacing it.",maps:"https://www.google.com/maps/search/?api=1&query=Patagonia+Store+Vail+Village+Colorado"},{id:"pirate-ship",title:"Pirate Ship",emoji:"🏴‍☠️",hints:["If you're by Gondola One, you're close — just follow the sound of kids laughing.","A wooden fort where little ones climb while parents sip coffee.","The playground shaped like a ship at the base of the mountain."],answer:"Pirate Ship Playground",challenge:'Climb aboard and strike your fiercest pirate pose — "Arrr!" required.',funFact:"A beloved Vail icon that’s been rebuilt over the years thanks to heavy kid (and kid-at-heart) traffic.",maps:"https://www.google.com/maps/search/?api=1&query=Pirate+Ship+Playground+Vail+Village+Colorado"},{id:"10th-mountain-memorial",title:"10th Mountain Memorial",emoji:"🪖",hints:["Between the Covered Bridge and International Bridge, look for bronze.","It honors ski soldiers who trained in Colorado before WWII.","A statue of a soldier with skis, saluting history."],answer:"10th Mountain Division Memorial",challenge:"Take a photo from the creekside, capturing the statue and the village bustle — like the soldier is still keeping watch.",funFact:"Vail’s founders included 10th Mountain Division veterans; many trained at nearby Camp Hale.",maps:"https://www.google.com/maps/search/?api=1&query=10th+Mountain+Division+Memorial+Vail+Village+Colorado"},{id:"covered-bridge",title:"Covered Bridge",emoji:"🌉",hints:["Right at the entrance to Vail Village — if you passed Starbucks, you're close.","The wooden bridge that frames almost every tourist photo.","The roofed walkway over Gore Creek that ushers you into the heart of town."],answer:"Covered Bridge",challenge:"Get creative and snap the bridge from an unusual angle — the weirder, the better.",funFact:"Often called the most-photographed spot in Vail, it frames the village like a postcard.",maps:"https://www.google.com/maps/search/?api=1&query=Covered+Bridge+Vail+Village+Colorado"},{id:"the-fitz",title:"The Fitz",emoji:"🍸",hints:["Steps from Ford Amphitheater, tucked inside Manor Vail Lodge.","Known for warm fireplaces and mountain cocktails.","The rustic-chic bar and restaurant just before you reach the gardens."],answer:"The Fitz",challenge:"Order one appetizer and share it like you're in a food commercial — extra points if you fake slow-motion bites.",funFact:"Locals swear by the mac & cheese and the cozy fireplace after a Ford Park concert.",maps:"https://www.google.com/maps/search/?api=1&query=The+Fitz+Manor+Vail+Lodge+Colorado"},{id:"betty-ford-alpine-garden",title:"Betty Ford Alpine Garden",emoji:"🌸",hints:["Across from Ford Amphitheater, where wildflowers and waterfalls bloom.","The highest botanical garden in the world, right in Vail's backyard.","Stroll into the garden named after America's First Lady, filled with alpine beauty."],answer:"Betty Ford Alpine Garden",challenge:"Take a long-exposure shot of the creek so it looks like magical flowing mist — bonus if you pose like nature spirits.",funFact:"At roughly 8,200 feet, it’s among the highest-elevation botanical gardens in the world.",maps:"https://www.google.com/maps/search/?api=1&query=Betty+Ford+Alpine+Garden+Vail+Colorado"}],ot=[{id:"bhhs-vail-office",title:"BHHS Vail Valley Office",hints:["Find the office where mountain dreams become reality.","Look for the Berkshire Hathaway HomeServices sign in Vail Village.","The professional team that helps families find their perfect Vail retreat."],funFact:"This office has helped countless families find their dream homes in the Rocky Mountains!",originalNumber:1,maps:"https://www.google.com/maps/search/?api=1&query=Berkshire+Hathaway+HomeServices+Vail"},{id:"covered-bridge",title:"Covered Bridge",hints:["Begin where timber frames something precious flowing beneath.","Lovers pause under wooden shelter as water rushes below.","The iconic covered bridge spans Gore Creek in Vail Village."],funFact:"Vail's most popular proposal spot, decorated with thousands of twinkling lights in winter!",originalNumber:2,maps:"https://www.google.com/maps/search/?api=1&query=Covered+Bridge+Vail"},{id:"luxury-mountain-home",title:"Premium Mountain Property",hints:["Find a home that showcases the best of Vail luxury living.","Look for architectural excellence with mountain views.","Spot a property that embodies BHHS quality and style."],funFact:"BHHS specializes in connecting buyers with exceptional mountain properties!",originalNumber:3,maps:"https://www.google.com/maps/search/?api=1&query=Luxury+Homes+Vail+Village"},{id:"clock-tower",title:"Clock Tower",hints:["Find the timekeeper at the heart of Vail Village.","A tower that marks time for both visitors and locals.","The central meeting point where BHHS clients often gather."],funFact:"The Clock Tower is where many BHHS property tours begin - it's the perfect meeting spot!",originalNumber:4,maps:"https://www.google.com/maps/search/?api=1&query=Clock+Tower+Vail"},{id:"gore-creek-views",title:"Gore Creek Waterfront",hints:["Discover where water adds value to every nearby property.","Find the creek that makes Vail Village properties so desirable.","Locate the natural feature that BHHS listings always highlight."],funFact:"Creek-front properties are among the most sought-after in Vail!",originalNumber:5,maps:"https://www.google.com/maps/search/?api=1&query=Gore+Creek+Vail"},{id:"family-friendly-area",title:"Family Recreation Zone",hints:["Find where Vail families create lasting memories.","Locate amenities that make properties perfect for families.","The kind of neighborhood feature that increases home values."],funFact:"Family-friendly amenities are what make BHHS properties truly valuable for growing families!",originalNumber:6,maps:"https://www.google.com/maps/search/?api=1&query=Vail+Village+Family+Activities"},{id:"mountain-access-point",title:"Mountain Adventure Gateway",hints:["Find where outdoor adventures begin steps from home.","Locate the access point that adds premium value to nearby properties.","The trailhead that makes Vail living extraordinary."],funFact:"Direct mountain access is the #1 feature BHHS clients request!",originalNumber:7,maps:"https://www.google.com/maps/search/?api=1&query=Vail+Mountain+Trails"},{id:"community-gathering",title:"Community Heart",hints:["Discover where neighbors become lifelong friends.","Find the social center that strengthens property values.","The gathering place that makes a neighborhood feel like home."],funFact:"Strong communities create the most desirable neighborhoods - that's the BHHS advantage!",originalNumber:8,maps:"https://www.google.com/maps/search/?api=1&query=Vail+Village+Community+Center"},{id:"ski-slope-access",title:"Slope-Side Living",hints:["Find where you can ski from your front door to world-class slopes.","Locate the ultimate ski-in, ski-out property feature.","The access point that defines true Vail luxury living."],funFact:"Ski-in, ski-out properties are the crown jewel of BHHS's Vail portfolio!",originalNumber:9,maps:"https://www.google.com/maps/search/?api=1&query=Vail+Ski+Slopes+Access"}];function st(e="BHHS",t){const a=function(e){switch(e){case"BHHS":default:return ot;case"Vail Village":return at;case"Vail Valley":return tt;case"TEST":return tt.slice(0,3)}}(e),o=[...a];for(let n=o.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[o[n],o[e]]=[o[e],o[n]]}const s="BHHS"===e?o.length:5;return o.slice(0,Math.min(s,o.length))}function nt({post:e,isLoading:t=!1}){if(t)return E.jsx(rt,{});return E.jsxs("article",{className:"bg-white border border-gray-200 rounded-lg shadow-sm mb-4 overflow-hidden",children:[E.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-lg",children:e.teamEmoji}),E.jsxs("div",{className:"flex-1",children:[E.jsx("h3",{className:"font-semibold text-gray-900",children:e.teamName}),E.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[E.jsx("span",{children:e.locationName}),E.jsx("span",{children:"•"}),E.jsx("span",{children:(e=>{const t=new Date,a=new Date(e),o=Math.floor((t.getTime()-a.getTime())/6e4);if(o<1)return"Just now";if(o<60)return`${o}m ago`;const s=Math.floor(o/60);if(s<24)return`${s}h ago`;return`${Math.floor(s/24)}d ago`})(e.timestamp)})]})]})]}),E.jsxs("div",{className:"relative aspect-square bg-gray-100",children:[E.jsx("img",{src:e.imageUrl,alt:`${e.teamName} at ${e.stopTitle}`,className:"w-full h-full object-cover",loading:"lazy",onError:e=>{e.target.src="/images/placeholder-image.svg"}}),E.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/50 to-transparent p-3",children:E.jsx("p",{className:"text-white text-sm font-medium",children:e.stopTitle})})]}),e.caption&&E.jsx("div",{className:"px-4 py-3",children:E.jsx("p",{className:"text-gray-900 text-sm leading-relaxed",children:e.caption})}),E.jsx("div",{className:"px-4 py-3 border-t border-gray-100 flex items-center justify-between",children:E.jsxs("div",{className:"flex items-center gap-6",children:[E.jsxs("button",{className:"flex items-center gap-2 text-gray-500 hover:text-red-500 transition-colors",children:[E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),E.jsx("span",{className:"text-sm",children:e.reactions.likes})]}),E.jsxs("button",{className:"flex items-center gap-2 text-gray-500 hover:text-blue-500 transition-colors",children:[E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),E.jsx("span",{className:"text-sm",children:e.reactions.comments})]})]})})]})}function rt(){return E.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm mb-4 overflow-hidden animate-pulse",children:[E.jsxs("div",{className:"px-4 py-3 flex items-center gap-3",children:[E.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200"}),E.jsxs("div",{className:"flex-1",children:[E.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-1"}),E.jsx("div",{className:"h-3 bg-gray-200 rounded w-32"})]})]}),E.jsx("div",{className:"aspect-square bg-gray-200"}),E.jsxs("div",{className:"px-4 py-3",children:[E.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),E.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]}),E.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex gap-6",children:[E.jsx("div",{className:"h-5 bg-gray-200 rounded w-12"}),E.jsx("div",{className:"h-5 bg-gray-200 rounded w-12"})]})]})}class it{static async getAllFeedPosts(e){try{if(!(null==e?void 0:e.locationName)||!(null==e?void 0:e.eventName))return[];const{locationName:t,eventName:a}=e,o=await U.getPhotosByCompanyEvent(t,a);if(!o||0===o.length)return[];const s=o.map(e=>{const a=this.extractTeamNameFromPhoto(e);return{id:`${a}-${e.locationId}-${e.publicId}`,teamName:a,teamEmoji:this.getTeamEmoji(a),locationName:t,stopTitle:this.getStopTitle(e.locationId),imageUrl:e.photoUrl,caption:e.title||this.generateCaption(a,e.locationId),timestamp:e.uploadedAt,reactions:{likes:Math.floor(15*Math.random())+1,comments:Math.floor(5*Math.random()),shares:Math.floor(3*Math.random())}}});return s.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()),s}catch(t){return[]}}static extractTeamNameFromPhoto(e){return e.teamName||"Unknown Team"}static getTeamEmoji(e){const t=e.toLowerCase();if(t.includes("rock"))return"🏔️";if(t.includes("alp"))return"🎿";if(t.includes("summit"))return"⛰️";if(t.includes("snow"))return"❄️";if(t.includes("eagle"))return"🦅";if(t.includes("bear"))return"🐻";if(t.includes("wolf"))return"🐺";if(t.includes("fire"))return"🔥";if(t.includes("storm"))return"⛈️";if(t.includes("star"))return"⭐";return{a:"🏔️",b:"🎿",c:"⛰️",d:"❄️",e:"🦅",f:"🔥",g:"🌲",h:"🏂",i:"🧗",j:"🎯",k:"🏕️",l:"🦌",m:"🏔️",n:"🎿",o:"⛰️",p:"🐻",q:"❄️",r:"🏔️",s:"⛷️",t:"🏔️",u:"🦅",v:"🏂",w:"🐺",x:"❄️",y:"⛰️",z:"🎿"}[e.charAt(0).toLowerCase()]||"🏔️"}static getStopTitle(e){return e.split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}static generateCaption(e,t){const a=[`Amazing experience at ${this.getStopTitle(t)}! 📸`,`${e} conquers another stop! 🎉`,"Perfect photo opportunity! ✨","Found it! Check out this awesome spot 🔍","Another one down! 💪","Great teamwork here! 👥","This place is incredible! 🤩"];return a[Math.floor(Math.random()*a.length)]}}function lt({onNavigate:e,percent:t,completeCount:o,totalStops:s}){const{locationName:n,eventName:r,teamName:i}=ee(),[l,c]=a.useState([]),[d,u]=a.useState(!0),[h,p]=a.useState(null);return a.useEffect(()=>{(async()=>{try{u(!0),p(null);const e={locationName:n||void 0,eventName:r||void 0},t=await it.getAllFeedPosts(e);c(t),t.length}catch(e){p("Failed to load feed posts. Please try again.")}finally{u(!1)}})()},[n,r,i]),E.jsxs("div",{className:"min-h-screen bg-gray-50",children:[E.jsx("main",{className:"max-w-screen-sm mx-auto px-4 py-5",style:{paddingBottom:"calc(72px + env(safe-area-inset-bottom))"},children:d?E.jsxs("div",{className:"space-y-4",children:[E.jsx(nt,{post:{},isLoading:!0}),E.jsx(nt,{post:{},isLoading:!0}),E.jsx(nt,{post:{},isLoading:!0})]}):h?E.jsxs("div",{className:"text-center py-12",children:[E.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 flex items-center justify-center",children:E.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.732 15.5c-.77.833.192 2.5 1.732 2.5z"})})}),E.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Something went wrong"}),E.jsx("p",{className:"text-gray-500",children:h})]}):l.length>0?E.jsx("div",{className:"space-y-4",children:l.map(e=>E.jsx(nt,{post:e},e.id))}):E.jsx("div",{className:"text-center py-16 px-4",children:E.jsxs("div",{className:"max-w-sm mx-auto",children:[E.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--color-light-pink)"},children:E.jsx("svg",{className:"w-12 h-12",style:{color:"var(--color-cabernet)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})})}),E.jsx("h3",{className:"text-xl font-semibold mb-3",style:{color:"var(--color-cabernet)"},children:"Be the First to Share!"}),E.jsxs("p",{className:"text-gray-600 mb-6 leading-relaxed",children:["No teams have uploaded photos for ",E.jsxs("span",{className:"font-medium",children:[n," - ",r]})," yet. Start your scavenger hunt and be the first to share your adventure!"]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("button",{onClick:()=>e("hunt"),className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg font-medium transition-all duration-200 hover:scale-105 active:scale-95 shadow-sm",style:{backgroundColor:"var(--color-cabernet)",color:"white"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--color-deep-wine)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--color-cabernet)"},children:[E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Start Your Hunt"]}),E.jsx("p",{className:"text-sm text-gray-500",children:"Complete challenges and upload photos to see them here"})]})]})})}),E.jsx(Ye,{activePage:"social",progressPercent:t,completeCount:o,totalStops:s,onEventClick:()=>{e("event")},onChallengesClick:()=>{e("hunt")},onSocialClick:()=>{}})]})}function ct({onNavigate:e,completeCount:t,totalStops:o,percent:s,stops:n,progress:r,onSaveSettings:i}){const{locationName:l,teamName:c,eventName:d,lockedByQuery:u,setLocationName:h,setTeamName:p,setEventName:m,openEventSettingsOnce:g,clearOpenEventSettings:f}=ee(),[v,x]=a.useState(!1);return a.useEffect(()=>{g&&(x(!1),f())},[g]),E.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-hidden",children:[E.jsxs("main",{className:"max-w-screen-sm mx-auto px-4 py-5",style:{paddingBottom:"calc(72px + env(safe-area-inset-bottom))"},children:[E.jsxs("section",{className:"border rounded-lg shadow-sm p-4 relative",style:{backgroundColor:"var(--color-white)",borderColor:"var(--color-light-grey)"},"aria-labelledby":"location-heading",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("h2",{id:"location-heading",className:"text-xl font-semibold",children:l}),E.jsx("button",{onClick:async()=>{try{const e="undefined"!=typeof window?window.location.origin:"",t=Je(l||""),a=Je(d||""),o=Je(c||""),s=`${e}${`/${t}/${a}/${o}`}`;await navigator.clipboard.writeText(s)}catch(e){}},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.target.click())},className:"p-3 rounded-full transition-all duration-150 hover:scale-110 active:scale-95 focus:ring-2 focus:ring-opacity-50",style:{color:"var(--color-warm-grey)",backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.color="var(--color-cabernet)",e.currentTarget.style.backgroundColor="var(--color-light-pink)"},onMouseLeave:e=>{e.currentTarget.style.color="var(--color-warm-grey)",e.currentTarget.style.backgroundColor="transparent"},onFocus:e=>{e.currentTarget.style.color="var(--color-cabernet)",e.currentTarget.style.backgroundColor="var(--color-light-pink)"},onBlur:e=>{e.currentTarget.style.color="var(--color-warm-grey)",e.currentTarget.style.backgroundColor="transparent"},"aria-label":"Copy shareable link to clipboard",children:E.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"1.5",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 010 5.656l-2 2a4 4 0 11-5.656-5.656l1-1"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.172 13.828a4 4 0 010-5.656l2-2a4 4 0 115.656 5.656l-1 1"})]})})]}),v?E.jsx(be,{locationName:l,teamName:c,eventName:d,onChangeLocation:h,onChangeTeam:p,onChangeEvent:m,onSave:()=>{i(),x(!1)},onCancel:()=>x(!1)}):E.jsxs(E.Fragment,{children:[c&&E.jsxs("p",{className:"text-blue-600 text-sm font-medium mt-2",children:["Team: ",c]}),100===s?E.jsxs("div",{className:"mt-2",role:"alert","aria-live":"assertive",children:[E.jsxs("p",{className:"text-lg font-semibold",style:{color:"var(--color-cabernet)"},children:[E.jsx("span",{role:"img","aria-label":"Party celebration",children:"🎉"}),"Congratulations! You completed the scavenger hunt."]}),E.jsxs("p",{className:"sr-only",children:["All ",t," stops have been completed successfully. Well done!"]})]}):E.jsx(E.Fragment,{children:E.jsx(K,{percent:s,completeCount:t,totalStops:o,stops:n,progress:r})})]})]}),E.jsxs("section",{className:"mt-4 border rounded-lg shadow-sm p-4",style:{backgroundColor:"var(--color-white)",borderColor:"var(--color-light-grey)"},children:[E.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Event Details"}),E.jsxs("div",{className:"space-y-2 text-sm",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"font-medium",children:"Event:"}),E.jsx("span",{children:d})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"font-medium",children:"Location:"}),E.jsx("span",{children:l})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"font-medium",children:"Team:"}),E.jsx("span",{children:c})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"font-medium",children:"Progress:"}),E.jsxs("span",{children:[t,"/",o," stops (",s,"%)"]})]})]})]})]}),E.jsx(Ye,{activePage:"event",progressPercent:s,completeCount:t,totalStops:o,onEventClick:()=>{},onChallengesClick:()=>{e("hunt")},onSocialClick:()=>{e("feed")}})]})}const dt=class e{static getInstance(){return e.instance||(e.instance=new e),e.instance}async readJson(e){try{const t=await D.get(`/kv-get?key=${encodeURIComponent(e)}`);if(t.error)throw new Error(`Failed to read blob ${e}: ${t.error}`);if(!t.data)throw new Error(`Blob ${e} not found`);return{data:t.data,etag:t.etag}}catch(t){throw t}}async writeJson(e,t,a){try{const o={key:e,value:t};a&&(o.expectedEtag=a);const s=await D.post("/kv-upsert",o);if(s.error)throw new Error(`Failed to write blob ${e}: ${s.error}`);return{etag:s.etag,key:s.key,timestamp:s.timestamp}}catch(o){throw o}}async exists(e){try{return await this.readJson(e),!0}catch(t){return!1}}async listWithPrefix(e){try{return[]}catch(t){throw t}}async delete(e){}};t(dt,"instance");let ut=dt;const ht=ut.getInstance();const pt=new class{constructor(){t(this,"registry",{})}registerMigration(e,t){this.registry[e]||(this.registry[e]=[]),this.registry[e].push(t)}getMigrations(e){return this.registry[e]||[]}findMigrationPath(e,t,a){const o=this.getMigrations(e),s=[];let n=t;for(;n!==a;){const e=o.find(e=>e.from===n);if(!e)return null;if(s.push(e),n=e.to,s.length>20)return null}return s}migrate(e,t,a,o){if(a===o)return{success:!0,data:t,finalVersion:a,migrationsApplied:[]};const s=this.findMigrationPath(e,a,o);if(!s)return{success:!1,error:`No migration path found from ${a} to ${o} for ${e}`};let n=t;const r=[];try{for(const e of s){if(n=e.migrate(n),r.push(`${e.from}->${e.to}`),e.validate){const t=e.validate.safeParse(n);if(!t.success)throw new Error(`Migration validation failed: ${t.error.message}`);n=t.data}}return{success:!0,data:n,finalVersion:o,migrationsApplied:r}}catch(i){return{success:!1,error:i instanceof Error?i.message:String(i),migrationsApplied:r}}}needsMigration(e,t,a){return t!==a&&null!==this.findMigrationPath(e,t,a)}getAvailableVersions(e){const t=this.getMigrations(e),a=new Set;return t.forEach(e=>{a.add(e.from),a.add(e.to)}),Array.from(a).sort()}validateMigrationChain(e){const t=this.getMigrations(e),a=new Set(t.map(e=>e.from));new Set(t.map(e=>e.to));for(const o of t){if(!!t.some(e=>e.from===o.to)&&!a.has(o.to))return!1}return!0}};function mt(e,t=[]){return{...e,migrate:a=>{const o=e.migrate(a),s=function(e,t,a=[]){const o=[];if(t){!function e(t,a=""){if(null!=t)if("object"!=typeof t||Array.isArray(t))Array.isArray(t)&&t.forEach((t,o)=>{e(t,`${a}[${o}]`)});else for(const[s,n]of Object.entries(t)){const t=a?`${a}.${s}`:s;null===n&&(s.includes("At")||s.includes("Url")||s.includes("Path")||s.includes("Code")||s.includes("Email")||s.endsWith("Id")||s.endsWith("Name"))&&o.push(`⚠️  ${t} is null but should be undefined for optional string fields`),"object"==typeof n&&e(n,t)}}(t);for(const e of a)e in t||o.push(`Missing expected field: ${e}`)}else o.push(`Migration ${e} returned null/undefined output`);return{valid:0===o.length,issues:o}}(`${e.from}->${e.to}`,o,t);return s.valid||s.issues.forEach(e=>{}),o}}}const gt=r({name:n(),environment:n(),uiVersion:n().optional()}),ft=r({enableKVEvents:d().default(!1),enableBlobEvents:d().default(!1),enablePhotoUpload:d().default(!0),enableMapPage:d().default(!1)}),vt=r({timezone:n().default("America/Denver"),locale:n().default("en-US")}),xt=r({tileProvider:n().optional(),tileUrl:n().optional(),attribution:n().optional()}),yt=r({fromAddress:n().email().optional(),sendingEnabled:d().default(!1)}),bt=r({mediaRetentionDays:l().default(365),dataDeletionContact:n().email().optional()}),wt=r({maxUploadSizeMB:l().default(10),maxPhotosPerTeam:l().default(100),allowedMediaTypes:i(n()).default(["image/jpeg","image/png"])}),Nt=r({huntsTotal:l().default(0),teamsCommon:i(n()).default([])}),jt=r({orgSlug:n(),orgName:n(),primaryContactEmail:n().email(),createdAt:n(),orgBlobKey:n(),summary:Nt.optional()}),kt=r({orgSlug:n(),huntId:n()}),St=h(n(),i(kt)),Ct=r({schemaVersion:n().default("1.0.0"),etag:n().optional(),updatedAt:n(),app:r({metadata:gt,features:ft,defaults:vt,map:xt.optional(),email:yt.optional(),privacy:bt.optional(),limits:wt.optional()}),organizations:i(jt),byDate:St.optional()}),Et={from:"1.0.0",to:"1.1.0",description:"Add privacy and limits configuration sections",migrate:e=>({...e,schemaVersion:"1.1.0",updatedAt:(new Date).toISOString(),app:{...e.app,privacy:{mediaRetentionDays:365,dataDeletionContact:void 0},limits:{maxUploadSizeMB:10,maxPhotosPerTeam:100,allowedMediaTypes:["image/jpeg","image/png","image/gif"]}}}),validate:Ct},Lt={from:"1.1.0",to:"1.2.0",description:"Add video upload support and enhanced feature flags",migrate:e=>({...e,schemaVersion:"1.2.0",updatedAt:(new Date).toISOString(),app:{...e.app,features:{...e.app.features,enableVideoUpload:!0,enableAdvancedValidation:!1},limits:{...e.app.limits,maxUploadSizeMB:200,allowedMediaTypes:[...e.app.limits.allowedMediaTypes,"video/mp4","video/quicktime","video/webm"]}}}),validate:Ct},At={from:"0.9.0",to:"1.0.0",description:"Transform legacy app format to current schema structure",migrate:e=>{var t,a,o,s,n,r,i;const l=e.metadata?e:{metadata:e};return{schemaVersion:"1.0.0",etag:l.etag||void 0,updatedAt:(new Date).toISOString(),app:{metadata:{name:(null==(t=l.metadata)?void 0:t.appName)||l.appName||"Vail Hunt",environment:(null==(a=l.metadata)?void 0:a.environment)||"production",uiVersion:(null==(o=l.metadata)?void 0:o.version)||void 0},features:{enableKVEvents:(null==(s=l.features)?void 0:s.useKVStore)||!1,enableBlobEvents:(null==(n=l.features)?void 0:n.useBlobStore)||!1,enablePhotoUpload:!1!==(null==(r=l.features)?void 0:r.photoUploads),enableMapPage:(null==(i=l.features)?void 0:i.showMap)||!1},defaults:{timezone:l.defaultTimezone||"America/Denver",locale:l.defaultLocale||"en-US"},map:l.mapConfig?{tileProvider:l.mapConfig.provider,tileUrl:l.mapConfig.tileUrl,attribution:l.mapConfig.attribution}:void 0,email:l.emailConfig?{fromAddress:l.emailConfig.from,sendingEnabled:l.emailConfig.enabled||!1}:void 0},organizations:Array.isArray(l.orgs)?l.orgs.map(e=>{var t;return{orgSlug:e.slug||e.id,orgName:e.name,primaryContactEmail:e.contactEmail||(null==(t=e.contact)?void 0:t.email),createdAt:e.createdAt||(new Date).toISOString(),orgBlobKey:`orgs/${e.slug||e.id}.json`,summary:{huntsTotal:e.huntCount||0,teamsCommon:e.commonTeams||[]}}}):[],byDate:l.dateIndex||void 0}},validate:Ct};const Tt=r({firstName:n(),lastName:n(),email:n().email(),role:n().optional()}),It=r({defaultTeams:i(n()).default(["RED","GREEN","BLUE","YELLOW","ORANGE"]),timezone:n().optional()}),Dt=r({visibility:p(["public","invite","private"]).default("public"),joinCode:n().optional(),pinRequired:d().default(!1)}),Ot=r({basePerStop:l().default(10),bonusCreative:l().default(5)}),Pt=r({required:d().default(!1),reviewers:i(n()).default([])}),Mt=r({start:n().optional(),end:n().optional(),timezone:n().optional()}),$t=r({firstName:n(),lastName:n(),email:n().email()}),Vt=r({firstName:n(),lastName:n(),email:n().email().optional()}),Bt=r({total:l().default(0),photos:l().default(0),videos:l().default(0),lastUploadedAt:n().optional()}),Rt=r({name:n(),captain:$t,members:i(Vt).default([]),uploads:Bt.optional()}),Ft=r({blobsPrefix:n().optional(),cloudinaryFolder:n().optional()}),zt=r({total:l().default(0),photos:l().default(0),videos:l().default(0),lastUploadedAt:n().optional()}),Ut=r({store:Ft.optional(),summary:zt}),Ht=r({text:n(),delay:l().optional()}),_t=r({type:p(["photo","video","text"]).default("photo"),required:d().default(!0),description:n().optional()}),qt=r({type:p(["image","video","audio"]),url:n().url(),caption:n().optional()}),Wt=r({createdBy:n(),createdAt:n(),lastModifiedBy:n().optional(),lastModifiedAt:n().optional()}),Gt=r({id:n(),title:n(),lat:l(),lng:l(),radiusMeters:l().default(50),description:n().optional(),difficulty:p(["easy","medium","hard"]).optional(),hints:i(Ht).default([]),requirements:i(_t).default([]),assets:i(qt).default([]),audit:Wt.optional()}),Kt=r({required:d().default(!1),text:n().default("I acknowledge that I have read and agree to follow these rules.")}),Yt=r({format:p(["markdown","plain","html"]).default("markdown"),body:n()}),Jt=r({id:n(),version:n().default("1.0"),updatedAt:n(),acknowledgement:Kt,content:Yt,categories:i(n()).optional()}),Zt=r({teamsRegistered:l().default(0),photosSubmitted:l().default(0),completedStops:l().default(0)}),Qt=r({city:n(),state:n(),zip:n()}),Xt=r({id:n(),slug:n(),name:n(),startDate:n(),endDate:n(),time:Mt.optional(),location:Qt.optional(),status:p(["scheduled","active","completed","archived"]).default("scheduled"),access:Dt,scoring:Ot,moderation:Pt,teams:i(Rt).optional(),teamCaptain:$t.optional(),teamMembers:i(Vt).optional(),uploads:Ut.optional(),stops:i(Gt).default([]),rules:Jt.optional(),geo:c().optional(),stats:Zt.optional(),audit:r({createdBy:n(),createdAt:n(),archivedAt:n().optional()}).optional()}),ea=r({schemaVersion:n().default("1.0.0"),etag:n().optional(),updatedAt:n(),org:r({orgSlug:n(),orgName:n(),contacts:i(Tt),settings:It}),hunts:i(Xt).default([])}),ta={from:"1.0.0",to:"1.1.0",description:"Add team upload tracking and enhanced hunt metadata",migrate:e=>{var t;return{...e,schemaVersion:"1.1.0",updatedAt:(new Date).toISOString(),hunts:(null==(t=e.hunts)?void 0:t.map((e,t)=>{var a;const o=null==(a=e.teams)?void 0:a.map((e,t)=>({...e,uploads:e.uploads||{total:0,photos:0,videos:0,lastUploadedAt:void 0}})),s={store:{blobsPrefix:`hunts/${e.id}/uploads`,cloudinaryFolder:`scavenger/entries/${e.slug}`},summary:{total:0,photos:0,videos:0,lastUploadedAt:void 0}};return{...e,teams:o,uploads:e.uploads||s}}))||[]}},validate:ea},aa={from:"1.1.0",to:"1.2.0",description:"Add video requirements and enhanced stop metadata",migrate:e=>{var t;return{...e,schemaVersion:"1.2.0",updatedAt:(new Date).toISOString(),hunts:(null==(t=e.hunts)?void 0:t.map(e=>{var t;return{...e,stops:(null==(t=e.stops)?void 0:t.map(e=>{var t;return{...e,requirements:(null==(t=e.requirements)?void 0:t.map(e=>({...e,type:e.type||"photo"})))||[{type:"photo",required:!0,description:"Photo required"}],assets:e.assets||[]}}))||[]}}))||[]}},validate:ea},oa={from:"0.9.0",to:"1.0.0",description:"Transform legacy organization format to current schema structure",migrate:e=>{const t=e;return{schemaVersion:"1.0.0",etag:t.etag||void 0,updatedAt:(new Date).toISOString(),org:{orgSlug:t.orgSlug||t.slug||"unknown-org",orgName:t.orgName||t.name||"Unknown Organization",contacts:Array.isArray(t.contacts)?t.contacts.map(e=>({firstName:e.firstName||e.first_name||"Unknown",lastName:e.lastName||e.last_name||"Contact",email:e.email||e.contactEmail,role:e.role||e.position})):t.contact?[{firstName:t.contact.firstName||"Unknown",lastName:t.contact.lastName||"Contact",email:t.contact.email,role:t.contact.role}]:[{firstName:"Unknown",lastName:"Contact",email:t.contactEmail||"unknown@example.com"}],settings:{defaultTeams:t.defaultTeams||t.teams||["RED","GREEN","BLUE","YELLOW","ORANGE"],timezone:t.timezone||t.defaultTimezone||void 0}},hunts:Array.isArray(t.hunts)?t.hunts.map(e=>{var t,a,o,s,n,r,i,l,c,d,u,h,p,m;return{id:e.id||e.huntId,slug:e.slug||(null==(t=e.id)?void 0:t.replace(/[^a-z0-9-]/gi,"-").toLowerCase()),name:e.name||e.title,startDate:e.startDate||e.date,endDate:e.endDate||e.date,time:e.time?{start:e.time.start,end:e.time.end,timezone:e.time.timezone}:void 0,location:e.location?{city:e.location.city,state:e.location.state,zip:e.location.zip}:void 0,status:e.status||"scheduled",access:{visibility:e.visibility||(null==(a=e.access)?void 0:a.visibility)||"public",joinCode:e.joinCode||(null==(o=e.access)?void 0:o.joinCode),pinRequired:e.pinRequired||(null==(s=e.access)?void 0:s.pinRequired)||!1},scoring:{basePerStop:(null==(n=e.scoring)?void 0:n.basePerStop)||e.pointsPerStop||10,bonusCreative:(null==(r=e.scoring)?void 0:r.bonusCreative)||e.bonusPoints||5},moderation:{required:(null==(i=e.moderation)?void 0:i.required)||e.requiresApproval||!1,reviewers:(null==(l=e.moderation)?void 0:l.reviewers)||e.reviewers||[]},teams:null==(c=e.teams)?void 0:c.map(e=>{var t,a,o,s,n;return{name:e.name||e.teamName,captain:{firstName:(null==(t=e.captain)?void 0:t.firstName)||(null==(a=e.captainName)?void 0:a.split(" ")[0])||"Unknown",lastName:(null==(o=e.captain)?void 0:o.lastName)||(null==(s=e.captainName)?void 0:s.split(" ").slice(1).join(" "))||"Captain",email:(null==(n=e.captain)?void 0:n.email)||e.captainEmail||""},members:e.members||[]}}),teamCaptain:e.teamCaptain?{firstName:e.teamCaptain.firstName||"Unknown",lastName:e.teamCaptain.lastName||"Captain",email:e.teamCaptain.email||""}:void 0,teamMembers:e.teamMembers||void 0,uploads:{summary:{total:e.uploadCount||0,photos:e.photoCount||0,videos:e.videoCount||0,lastUploadedAt:e.lastUpload||void 0}},stops:(null==(d=e.stops)?void 0:d.map(e=>{var t;return{id:e.id||e.stopId,title:e.title||e.name,lat:parseFloat(e.lat||e.latitude||0),lng:parseFloat(e.lng||e.longitude||0),radiusMeters:e.radiusMeters||e.radius||50,description:e.description,difficulty:e.difficulty,hints:Array.isArray(e.hints)?e.hints.map(e=>({text:"string"==typeof e?e:e.text,delay:e.delay})):[],requirements:(null==(t=e.requirements)?void 0:t.map(e=>({type:e.type||"photo",required:!1!==e.required,description:e.description})))||[{type:"photo",required:!0,description:"Photo required"}],assets:e.assets||[],audit:e.audit||void 0}}))||[],rules:e.rules?{id:e.rules.id||`${e.id}-rules`,version:e.rules.version||"1.0",updatedAt:e.rules.updatedAt||(new Date).toISOString(),acknowledgement:{required:(null==(u=e.rules.acknowledgement)?void 0:u.required)||!1,text:(null==(h=e.rules.acknowledgement)?void 0:h.text)||"I acknowledge the hunt rules"},content:{format:(null==(p=e.rules.content)?void 0:p.format)||"markdown",body:(null==(m=e.rules.content)?void 0:m.body)||e.rules.text||""},categories:e.rules.categories}:void 0,audit:e.audit||void 0}}):[]}},validate:ea};const sa=new class{constructor(){t(this,"registry",{})}registerVersion(e,t){this.registry[e]||(this.registry[e]={}),this.registry[e][t.version]=t}getSchema(e,t){var a,o;return(null==(o=null==(a=this.registry[e])?void 0:a[t])?void 0:o.schema)||null}getVersions(e){return Object.keys(this.registry[e]||{}).sort()}getLatestVersion(e){const t=this.getVersions(e);return t[t.length-1]||null}isDeprecated(e,t){var a,o;return(null==(o=null==(a=this.registry[e])?void 0:a[t])?void 0:o.deprecated)||!1}getMigrationTarget(e,t){var a,o;return(null==(o=null==(a=this.registry[e])?void 0:a[t])?void 0:o.migrationTarget)||null}validate(e,t,a){const o=this.getSchema(e,t);if(!o)return{success:!1,error:`Schema version ${t} not found for ${e}`};try{return{success:!0,data:o.parse(a)}}catch(s){return{success:!1,error:s instanceof Error?s.message:String(s)}}}detectVersion(e){return(null==e?void 0:e.schemaVersion)||null}validateWithMigration(e,t,a){const o=this.detectVersion(t),s=a||this.getLatestVersion(e);if(!o||!s)return{success:!1,error:`Cannot determine version for ${e} validation`};if(o===s){return{...this.validate(e,s,t),version:s,migrationApplied:!1}}return{success:!1,error:"Migration integration not yet implemented in this version"}}},na=r({schemaVersion:n().default("0.9.0"),appName:n(),environment:n().optional(),version:n().optional(),etag:n().optional(),useKVStore:d().optional(),useBlobStore:d().optional(),photoUploads:d().default(!0),showMap:d().default(!1),defaultTimezone:n().default("America/Denver"),defaultLocale:n().default("en-US"),mapConfig:r({provider:n().optional(),tileUrl:n().optional(),attribution:n().optional()}).optional(),emailConfig:r({from:n().email().optional(),enabled:d().default(!1)}).optional(),orgs:i(r({slug:n(),name:n(),contactEmail:n().email(),createdAt:n().optional(),huntCount:l().optional(),commonTeams:i(n()).optional()})).optional(),dateIndex:h(n(),i(r({orgSlug:n(),huntId:n()}))).optional(),updatedAt:n().optional()}),ra=r({schemaVersion:n().default("1.0.0"),etag:n().optional(),updatedAt:n(),app:r({metadata:r({name:n(),environment:n(),uiVersion:n().optional()}),features:r({enableKVEvents:d().default(!1),enableBlobEvents:d().default(!1),enablePhotoUpload:d().default(!0),enableMapPage:d().default(!1)}),defaults:r({timezone:n().default("America/Denver"),locale:n().default("en-US")}),map:r({tileProvider:n().optional(),tileUrl:n().optional(),attribution:n().optional()}).optional(),email:r({fromAddress:n().email().optional(),sendingEnabled:d().default(!1)}).optional()}),organizations:i(r({orgSlug:n(),orgName:n(),primaryContactEmail:n().email(),createdAt:n(),orgBlobKey:n(),summary:r({huntsTotal:l().default(0),teamsCommon:i(n()).default([])}).optional()})),byDate:h(n(),i(r({orgSlug:n(),huntId:n()}))).optional()}),ia=r({schemaVersion:n().default("1.1.0"),etag:n().optional(),updatedAt:n(),app:r({metadata:r({name:n(),environment:n(),uiVersion:n().optional()}),features:r({enableKVEvents:d().default(!1),enableBlobEvents:d().default(!1),enablePhotoUpload:d().default(!0),enableMapPage:d().default(!1)}),defaults:r({timezone:n().default("America/Denver"),locale:n().default("en-US")}),map:r({tileProvider:n().optional(),tileUrl:n().optional(),attribution:n().optional()}).optional(),email:r({fromAddress:n().email().optional(),sendingEnabled:d().default(!1)}).optional(),privacy:r({mediaRetentionDays:l().default(365),dataDeletionContact:n().email().optional()}).optional(),limits:r({maxUploadSizeMB:l().default(10),maxPhotosPerTeam:l().default(100),allowedMediaTypes:i(n()).default(["image/jpeg","image/png"])}).optional()}),organizations:i(r({orgSlug:n(),orgName:n(),primaryContactEmail:n().email(),createdAt:n(),orgBlobKey:n(),summary:r({huntsTotal:l().default(0),teamsCommon:i(n()).default([])}).optional()})),byDate:h(n(),i(r({orgSlug:n(),huntId:n()}))).optional()});const la=r({schemaVersion:n().default("0.9.0"),etag:n().optional(),orgSlug:n().optional(),orgName:n().optional(),name:n().optional(),slug:n().optional(),contact:r({firstName:n().optional(),lastName:n().optional(),first_name:n().optional(),last_name:n().optional(),email:n().email(),contactEmail:n().email().optional(),role:n().optional(),position:n().optional()}).optional(),contactEmail:n().email().optional(),contacts:i(c()).optional(),defaultTeams:i(n()).optional(),teams:i(n()).optional(),timezone:n().optional(),defaultTimezone:n().optional(),hunts:i(r({id:n().optional(),huntId:n().optional(),slug:n().optional(),name:n().optional(),title:n().optional(),date:n().optional(),startDate:n().optional(),endDate:n().optional(),time:r({start:n().optional(),end:n().optional(),timezone:n().optional()}).optional(),location:r({city:n().optional(),state:n().optional(),zip:n().optional()}).optional(),status:n().optional(),visibility:n().optional(),access:r({visibility:n().optional(),joinCode:n().optional(),pinRequired:d().optional()}).optional(),joinCode:n().optional(),pinRequired:d().optional(),pointsPerStop:l().optional(),bonusPoints:l().optional(),scoring:r({basePerStop:l().optional(),bonusCreative:l().optional()}).optional(),requiresApproval:d().optional(),reviewers:i(n()).optional(),moderation:r({required:d().optional(),reviewers:i(n()).optional()}).optional(),teams:i(r({name:n().optional(),teamName:n().optional(),captain:r({firstName:n().optional(),lastName:n().optional(),email:n().optional()}).optional(),captainName:n().optional(),captainEmail:n().optional(),members:i(c()).optional()})).optional(),teamCaptain:r({firstName:n().optional(),lastName:n().optional(),email:n().optional()}).optional(),teamMembers:i(c()).optional(),uploadCount:l().optional(),photoCount:l().optional(),videoCount:l().optional(),lastUpload:n().optional(),stops:i(r({id:n().optional(),stopId:n().optional(),name:n().optional(),title:n().optional(),lat:m([l(),n()]).optional(),lng:m([l(),n()]).optional(),latitude:m([l(),n()]).optional(),longitude:m([l(),n()]).optional(),radius:l().optional(),radiusMeters:l().optional(),description:n().optional(),difficulty:n().optional(),hints:i(m([n(),r({text:n(),delay:l().optional()})])).optional(),requirements:i(r({type:n().optional(),required:d().optional(),description:n().optional()})).optional(),assets:i(c()).optional(),audit:c().optional()})).optional(),rules:r({id:n().optional(),version:n().optional(),updatedAt:n().optional(),text:n().optional(),content:r({format:n().optional(),body:n().optional()}).optional(),acknowledgement:r({required:d().optional(),text:n().optional()}).optional(),categories:i(n()).optional()}).optional(),audit:c().optional()})).optional(),updatedAt:n().optional()}),ca=r({schemaVersion:n().default("1.0.0"),etag:n().optional(),updatedAt:n(),org:r({orgSlug:n(),orgName:n(),contacts:i(r({firstName:n(),lastName:n(),email:n().email(),role:n().optional()})),settings:r({defaultTeams:i(n()).default(["RED","GREEN","BLUE","YELLOW","ORANGE"]),timezone:n().optional()})}),hunts:i(r({id:n(),slug:n(),name:n(),startDate:n(),endDate:n(),status:p(["scheduled","active","completed","archived"]).default("scheduled")})).default([])}),da=ca.extend({schemaVersion:n().default("1.1.0"),hunts:i(r({id:n(),slug:n(),name:n(),startDate:n(),endDate:n(),status:p(["scheduled","active","completed","archived"]).default("scheduled"),uploads:r({store:r({blobsPrefix:n().optional(),cloudinaryFolder:n().optional()}).optional(),summary:r({total:l().default(0),photos:l().default(0),videos:l().default(0),lastUploadedAt:n().optional()})}).optional()})).default([])});const ua=new class{async validate(e,t,a={}){const{strict:o=!1,autoMigrate:s=!0,targetVersion:n,includeWarnings:r=!0,transformDeprecated:i=!0}=a;try{const a=this.detectVersion(t),i=n||sa.getLatestVersion(e);if(!a&&o)return{success:!1,errors:[{code:"MISSING_SCHEMA_VERSION",message:"Schema version not found in data",severity:"error",suggestion:"Add schemaVersion field to your data"}]};const l=a||this.getDefaultVersion(e),c=i||l;if(!l||!c)return{success:!1,errors:[{code:"NO_SCHEMA_AVAILABLE",message:`No schema available for ${e}`,severity:"error",suggestion:"Register schema versions for this data type"}]};let d,u=t,h=!1;if(s&&l!==c&&pt.needsMigration(e,l,c))if(d=await pt.migrate(e,t,l,c),d.success)u=d.data,h=!0;else if(o)return{success:!1,errors:[{code:"MIGRATION_FAILED",message:`Migration failed: ${d.error}`,severity:"error",suggestion:"Check data format and migration definitions"}],migrationDetails:d};const p=sa.getSchema(e,c);if(!p)return{success:!1,errors:[{code:"SCHEMA_NOT_FOUND",message:`Schema version ${c} not found for ${e}`,severity:"error"}]};const m=p.safeParse(u);if(!m.success){return{success:!1,errors:this.formatZodErrors(m.error),version:c,migrationApplied:h,migrationDetails:d}}const g=[];return r&&g.push(...this.generateWarnings(e,m.data,l,c)),{success:!0,data:m.data,version:c,migrationApplied:h,migrationDetails:d,warnings:g.length>0?g:void 0}}catch(l){return{success:!1,errors:[{code:"VALIDATION_EXCEPTION",message:`Validation failed with exception: ${l instanceof Error?l.message:String(l)}`,severity:"error"}]}}}validateOnly(e,t,a){try{const o=a||this.detectVersion(t)||this.getDefaultVersion(e);if(!o)return{success:!1,errors:[{code:"NO_VERSION_SPECIFIED",message:"No schema version specified or detected",severity:"error"}]};const s=sa.getSchema(e,o);if(!s)return{success:!1,errors:[{code:"SCHEMA_NOT_FOUND",message:`Schema version ${o} not found`,severity:"error"}]};const n=s.safeParse(t);return n.success?{success:!0,data:n.data,version:o}:{success:!1,errors:this.formatZodErrors(n.error),version:o}}catch(o){return{success:!1,errors:[{code:"VALIDATION_EXCEPTION",message:`Validation failed: ${o instanceof Error?o.message:String(o)}`,severity:"error"}]}}}detectVersion(e){return(null==e?void 0:e.schemaVersion)||null}getDefaultVersion(e){return sa.getLatestVersion(e)}formatZodErrors(e){return e.issues.map(e=>({code:e.code.toUpperCase(),message:e.message,path:e.path.length>0?e.path.map(String):void 0,severity:"error",suggestion:this.getSuggestionForZodIssue(e)}))}getSuggestionForZodIssue(e){switch(e.code){case g.invalid_type:return`Expected ${e.expected}, received ${e.received}. Check data type at path: ${e.path.join(".")}`;case g.too_small:return"string"===e.type?`String must be at least ${e.minimum} characters long`:`Value must be at least ${e.minimum}`;case g.too_big:return"string"===e.type?`String must be at most ${e.maximum} characters long`:`Value must be at most ${e.maximum}`;case g.invalid_string:return"email"===e.validation?"Provide a valid email address":`String format validation failed: ${e.validation}`;case g.invalid_enum_value:return`Must be one of: ${e.options.join(", ")}`;default:return}}generateWarnings(e,t,a,o){var s,n;const r=[];if(a&&sa.isDeprecated(e,a)){const t=sa.getMigrationTarget(e,a);r.push({code:"DEPRECATED_VERSION",message:`Schema version ${a} is deprecated`,suggestion:t?`Consider migrating to version ${t}`:"Upgrade to a newer version"})}return"appData"===e&&((null==(s=t.app)?void 0:s.map)||r.push({code:"MISSING_OPTIONAL_CONFIG",message:"Map configuration not provided",path:["app","map"],suggestion:"Consider adding map configuration for location features"}),(null==(n=t.app)?void 0:n.privacy)||r.push({code:"MISSING_PRIVACY_CONFIG",message:"Privacy configuration not provided",path:["app","privacy"],suggestion:"Consider adding privacy settings for compliance"})),r}async validateWithHealthReport(e,t,a={}){var o,s;const n=await this.validate(e,t,{...a,includeWarnings:!0});if(!n.success)return n;const r=(null==(o=n.errors)?void 0:o.length)||0,i=(null==(s=n.warnings)?void 0:s.length)||0,l=Math.max(0,100-20*r-5*i),c=[];return n.migrationApplied&&c.push("Data was migrated - consider updating source to use latest schema version"),i>0&&c.push("Address validation warnings to improve data quality"),l<80&&c.push("Multiple data quality issues detected - review validation errors and warnings"),{...n,healthScore:l,recommendations:c.length>0?c:void 0}}};async function ha(e,t){return ua.validate("appData",e,t)}async function pa(e,t){return ua.validate("orgData",e,t)}let ma=!1;ma||(ma=function(){try{return pt.registerMigration("appData",At),pt.registerMigration("appData",Et),pt.registerMigration("appData",Lt),function(){const e=mt(ta,["schemaVersion","updatedAt","org","hunts"]);pt.registerMigration("orgData",oa),pt.registerMigration("orgData",e),pt.registerMigration("orgData",aa)}(),sa.registerVersion("appData",{version:"0.9.0",schema:na,description:"Legacy flat structure before nested organization",deprecated:!0,migrationTarget:"1.0.0"}),sa.registerVersion("appData",{version:"1.0.0",schema:ra,description:"Current structured format with nested app configuration"}),sa.registerVersion("appData",{version:"1.1.0",schema:ia,description:"Adds privacy and limits configuration sections"}),sa.registerVersion("appData",{version:"1.2.0",schema:Ct,description:"Latest version with video support and enhanced feature flags"}),sa.registerVersion("orgData",{version:"0.9.0",schema:la,description:"Legacy structure before comprehensive team and hunt modeling",deprecated:!0,migrationTarget:"1.0.0"}),sa.registerVersion("orgData",{version:"1.0.0",schema:ca,description:"Current structured format with comprehensive modeling"}),sa.registerVersion("orgData",{version:"1.1.0",schema:da,description:"Adds team upload tracking and enhanced hunt metadata"}),sa.registerVersion("orgData",{version:"1.2.0",schema:ea,description:"Latest version with video requirements and enhanced stop metadata"}),!0}catch(e){return!1}}());const ga=class e{static getInstance(){return e.instance||(e.instance=new e),e.instance}static getOrgKey(e){return`orgs/${e}.json`}static generateHuntSlug(e){return Je(e)}static generateHuntId(e,t){return`${this.generateHuntSlug(e)}-${t.replace(/-/g,"")}`}async loadApp(){var t,a;try{const o=await ht.readJson(e.APP_KEY),s=await ha(o.data,{autoMigrate:!0,includeWarnings:!0});if(!s.success)throw new Error(`App JSON validation failed: ${null==(t=s.errors)?void 0:t.map(e=>e.message).join(", ")}`);return s.migrationApplied&&await ht.writeJson(e.APP_KEY,s.data,o.etag),null==(a=s.warnings)||a.length,{data:s.data,etag:o.etag}}catch(o){return{data:{schemaVersion:"1.2.0",updatedAt:(new Date).toISOString(),app:{metadata:{name:"Vail Hunt",environment:"development"},features:{enableKVEvents:!1,enableBlobEvents:!1,enablePhotoUpload:!0,enableMapPage:!1,enableVideoUpload:!0,enableAdvancedValidation:!1},defaults:{timezone:"America/Denver",locale:"en-US"}},organizations:[]}}}}async loadOrg(t){var a,o;try{const s=e.getOrgKey(t),n=await ht.readJson(s),r=await pa(n.data,{autoMigrate:!0,includeWarnings:!0});if(!r.success)throw new Error(`Org JSON validation failed: ${null==(a=r.errors)?void 0:a.map(e=>e.message).join(", ")}`);return r.migrationApplied&&await ht.writeJson(s,r.data,n.etag),null==(o=r.warnings)||o.length,{data:r.data,etag:n.etag}}catch(s){throw s}}async upsertApp(t,a){var o;try{const s={...t,updatedAt:(new Date).toISOString()},n=await ha(s,{strict:!0});if(!n.success)throw new Error(`App JSON validation failed: ${null==(o=n.errors)?void 0:o.map(e=>e.message).join(", ")}`);const r=n.data;return(await ht.writeJson(e.APP_KEY,r,a)).etag}catch(s){throw s}}async upsertOrg(t,a,o){var s;try{const n=e.getOrgKey(a),r={...t,updatedAt:(new Date).toISOString()},i=await pa(r,{strict:!0});if(!i.success)throw new Error(`Org JSON validation failed: ${null==(s=i.errors)?void 0:s.map(e=>e.message).join(", ")}`);const l=i.data;return(await ht.writeJson(n,l,o)).etag}catch(n){throw n}}async addOrganization(e,t){const a=e.organizations.findIndex(e=>e.orgSlug===t.orgSlug);return a>=0?e.organizations[a]=t:e.organizations.push(t),e}async addHuntToOrg(e,t){const a=e.hunts.findIndex(e=>e.id===t.id);return a>=0?e.hunts[a]=t:e.hunts.push(t),e}async updateByDateIndex(e,t,a,o){e.byDate||(e.byDate={}),e.byDate[t]||(e.byDate[t]=[]);const s=e.byDate[t].findIndex(e=>e.orgSlug===a&&e.huntId===o),n={orgSlug:a,huntId:o};return s>=0?e.byDate[t][s]=n:e.byDate[t].push(n),e}createNewOrg(e,t,a){return{schemaVersion:"1.0.0",updatedAt:(new Date).toISOString(),org:{orgSlug:e,orgName:t,contacts:a,settings:{defaultTeams:["RED","GREEN","BLUE","YELLOW","ORANGE"]}},hunts:[]}}createNewHunt(t,a,o,s,n){const r=e.generateHuntSlug(t);return{id:e.generateHuntId(t,a),slug:r,name:t,startDate:a,endDate:o,...n&&{location:n},status:"scheduled",access:{visibility:"public",pinRequired:!1},scoring:{basePerStop:10,bonusCreative:5},moderation:{required:!1,reviewers:[]},stops:[],audit:{createdBy:s,createdAt:(new Date).toISOString()}}}};t(ga,"instance"),t(ga,"APP_KEY","app.json");const fa=ga.getInstance();async function va(e=""){const t=`${(a=new Date).getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`;var a;try{const a=await async function(e,t){try{const a=e?`${e}/api/events`:"/api/events",o=t?`${a}?date=${t}`:a,s=await fetch(o);if(!s.ok)throw new Error(`API responded with ${s.status}: ${s.statusText}`);return((await s.json()).events||[]).map(e=>({key:e.key,orgSlug:e.orgSlug,orgName:e.orgName,eventName:e.eventName,startAt:e.startDate,endAt:e.endDate,data:{description:`${e.eventName} - ${e.orgName}`,huntId:e.huntId,status:e.status}}))}catch(a){throw a}}(e,t);if(a.length>0)return a}catch(s){}const o=await async function(e){var t,a;try{const s=(await fa.loadApp()).data;if(!s.byDate||!s.byDate[e])return[];const n=s.byDate[e],r=[];for(const e of n)try{const o=(await fa.loadOrg(e.orgSlug)).data,s=o.hunts.find(t=>t.id===e.huntId);s&&r.push({key:`events/${s.startDate}/${e.orgSlug}`,orgSlug:e.orgSlug,orgName:o.org.orgName,eventName:s.name,startAt:s.startDate,endAt:s.endDate,data:{description:`${s.name} - ${o.org.orgName}`,huntId:s.id,status:s.status,createdBy:null==(t=s.audit)?void 0:t.createdBy,createdAt:null==(a=s.audit)?void 0:a.createdAt}})}catch(o){}return r.sort((e,t)=>e.orgName.localeCompare(t.orgName))}catch(s){return[]}}(t);return o.length>0?o:[]}const xa={sm:{width:48,height:48},md:{width:64,height:64},lg:{width:96,height:96},xl:{width:128,height:128}};function ya({size:e="md",className:t="",animated:a=!1}){const{width:o,height:s}=xa[e];return E.jsxs("div",{className:`inline-block ${t} ${a?"mountain-logo-animated":""}`,children:[E.jsxs("svg",{width:o,height:s,viewBox:"0 0 128 128",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"drop-shadow-lg",children:[E.jsx("circle",{cx:"64",cy:"64",r:"62",fill:"url(#backgroundGradient)",stroke:"var(--color-cabernet)",strokeWidth:"2",className:"backdrop-blur-sm"}),E.jsx("path",{d:"M32 88 L64 32 L96 88 Z",fill:"url(#mountainGradient)",stroke:"var(--color-cabernet)",strokeWidth:"1.5",strokeLinejoin:"round"}),E.jsx("path",{d:"M20 88 L48 48 L76 88 Z",fill:"url(#secondaryMountainGradient)",stroke:"var(--color-cabernet-hover)",strokeWidth:"1",strokeLinejoin:"round",opacity:"0.8"}),E.jsx("path",{d:"M52 88 L80 40 L108 88 Z",fill:"url(#tertiaryMountainGradient)",stroke:"var(--color-cabernet-light)",strokeWidth:"1",strokeLinejoin:"round",opacity:"0.6"}),E.jsx("path",{d:"M56 48 L64 32 L72 48 Z",fill:"white",opacity:"0.9"}),E.jsx("path",{d:"M72 56 L80 40 L88 56 Z",fill:"white",opacity:"0.7"}),E.jsx("circle",{cx:"88",cy:"40",r:"6",fill:"var(--color-cream)",stroke:"var(--color-cabernet)",strokeWidth:"1",opacity:"0.8"}),E.jsx("line",{x1:"16",y1:"88",x2:"112",y2:"88",stroke:"var(--color-cabernet)",strokeWidth:"2",strokeLinecap:"round"}),E.jsxs("defs",{children:[E.jsxs("linearGradient",{id:"backgroundGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[E.jsx("stop",{offset:"0%",stopColor:"var(--color-cream)",stopOpacity:"0.3"}),E.jsx("stop",{offset:"100%",stopColor:"var(--color-light-pink)",stopOpacity:"0.1"})]}),E.jsxs("linearGradient",{id:"mountainGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[E.jsx("stop",{offset:"0%",stopColor:"var(--color-cabernet)"}),E.jsx("stop",{offset:"100%",stopColor:"var(--color-cabernet-active)"})]}),E.jsxs("linearGradient",{id:"secondaryMountainGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[E.jsx("stop",{offset:"0%",stopColor:"var(--color-cabernet-hover)"}),E.jsx("stop",{offset:"100%",stopColor:"var(--color-cabernet)"})]}),E.jsxs("linearGradient",{id:"tertiaryMountainGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[E.jsx("stop",{offset:"0%",stopColor:"var(--color-cabernet-light)"}),E.jsx("stop",{offset:"100%",stopColor:"var(--color-cabernet-hover)"})]}),a&&E.jsx(E.Fragment,{children:E.jsx("animateTransform",{attributeName:"transform",attributeType:"XML",type:"rotate",from:"0 64 64",to:"360 64 64",dur:"20s",repeatCount:"indefinite"})})]})]}),a&&E.jsx("style",{children:"\n          .mountain-logo-animated {\n            animation: gentle-glow 3s ease-in-out infinite alternate;\n          }\n          \n          @keyframes gentle-glow {\n            from {\n              filter: drop-shadow(0 0 5px rgba(85, 36, 72, 0.3));\n            }\n            to {\n              filter: drop-shadow(0 0 15px rgba(85, 36, 72, 0.6));\n            }\n          }\n        "})]})}const ba=["RED","GREEN","BLUE","YELLOW","ORANGE"];function wa({onSelectEvent:e,onSetupNew:t,onClose:o,initialStep:s="events"}){const{warning:n}=ze(),[r,i]=a.useState(null),[l,c]=a.useState(!0),[d,u]=a.useState(null),[h,p]=a.useState(null),[m,g]=a.useState(null),[f,v]=a.useState(s),[x,y]=a.useState({firstName:"",lastName:"",email:""}),[b,w]=a.useState({organizationName:"",firstName:"",lastName:"",email:""}),[N,j]=a.useState({organizationName:"",firstName:"",lastName:"",email:""}),[k,S]=a.useState({huntName:"",huntDate:"",city:"",state:"",zip:""}),[C,L]=a.useState({huntName:"",huntDate:"",city:"",state:"",zip:""}),[A,T]=a.useState([]),[I,D]=a.useState([]),[O,P]=a.useState(!1),M=["image/jpeg","image/png","image/gif","image/webp"],$=["video/mp4","video/webm","video/ogg","video/quicktime"],V=({file:e,onRemove:t})=>{const a=e.type.startsWith("video/"),o=URL.createObjectURL(e);return E.jsxs("div",{className:"relative",children:[a?E.jsx("video",{src:o,className:"w-20 h-20 object-cover rounded-lg border border-white/20",controls:!1,muted:!0,onLoadedMetadata:e=>{e.target.currentTime=1}}):E.jsx("img",{src:o,alt:"Step preview",className:"w-20 h-20 object-cover rounded-lg border border-white/20"}),E.jsx("div",{className:"absolute -top-1 -right-1",children:E.jsx("button",{type:"button",onClick:t,className:"w-5 h-5 rounded-full bg-red-500 hover:bg-red-600 text-white text-xs flex items-center justify-center transition-colors","aria-label":"Remove media",children:"×"})}),E.jsxs("div",{className:"mt-1 text-xs text-white/60 text-center",children:[a?"🎥":"🖼️"," ",(e.size/1024/1024).toFixed(1),"MB"]})]})};a.useEffect(()=>{let e=!0;return(async()=>{try{c(!0);const t=await va();if(!e)return;i(t)}catch(t){if(!e)return;u("Failed to load events")}finally{e&&c(!1)}})(),()=>{e=!1}},[]);const B=()=>{p(null),g(null),v("events")},R=(e,t)=>{y(a=>({...a,[e]:t}))},F=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),z=(e,t)=>{w(a=>({...a,[e]:t})),N[e]&&j(t=>({...t,[e]:""}))},U=()=>""!==b.organizationName.trim()&&""!==b.firstName.trim()&&""!==b.lastName.trim()&&""!==b.email.trim()&&F(b.email),H=e=>{if(!e)return!1;const t=new Date(e);return!isNaN(t.getTime())&&e.match(/^\d{4}-\d{2}-\d{2}$/)},_=e=>2===e.length&&/^[A-Z]{2}$/.test(e.toUpperCase()),q=e=>/^\d{5}(-\d{4})?$/.test(e),W=()=>{const e={id:`step-${Date.now()}`,title:"",hints:[""]};T(t=>[...t,e])},G=(e,t)=>{if(!t)return void T(t=>t.map((t,a)=>a===e?{...t,media:void 0,mediaType:void 0}:t));const a=(e=>{if(!e)return{isValid:!1,error:"No file provided"};const t=M.includes(e.type),a=$.includes(e.type);if(!t&&!a)return{isValid:!1,error:"File must be an image or video"};const o=t?"image":"video",s=t?12582912:209715200,n=t?"12MB":"200MB";return e.size>s?{isValid:!1,error:`File size must be under ${n}`}:{isValid:!0,mediaType:o}})(t);a.isValid?T(o=>o.map((o,s)=>s===e?{...o,media:t,mediaType:a.mediaType}:o)):n(a.error||"Invalid file",{duration:4e3})},K=()=>{const e=[];return 0===A.length&&e.push("At least one step is required"),A.forEach((t,a)=>{t.title.trim()?0!==t.hints.length&&t.hints.some(e=>e.trim())||(e[a]=`Step ${a+1}: At least one hint is required`):e[a]=`Step ${a+1}: Title is required`}),D(e),0===e.length},Y=()=>A.length>0&&A.every(e=>""!==e.title.trim()&&e.hints.some(e=>""!==e.trim())),J=()=>""!==k.huntName.trim()&&""!==k.huntDate.trim()&&H(k.huntDate)&&""!==k.city.trim()&&""!==k.state.trim()&&_(k.state)&&""!==k.zip.trim()&&q(k.zip),Z=()=>A.length>0&&A.every(e=>""!==e.title.trim()&&e.hints.some(e=>""!==e.trim())),Q=(e,t)=>{S(a=>({...a,[e]:t})),C[e]&&L(t=>({...t,[e]:""}))},X=()=>{const e={huntName:"",huntDate:"",city:"",state:"",zip:""};let t=!0;return k.huntName.trim()||(e.huntName="Hunt name is required",t=!1),k.huntDate.trim()?H(k.huntDate)||(e.huntDate="Please enter a valid date (YYYY-MM-DD)",t=!1):(e.huntDate="Hunt date is required",t=!1),k.city.trim()||(e.city="City is required",t=!1),k.state.trim()?_(k.state)||(e.state="Please enter a valid 2-letter state code (e.g., CO)",t=!1):(e.state="State is required",t=!1),k.zip.trim()?q(k.zip)||(e.zip="Please enter a valid ZIP code (e.g., 12345 or 12345-6789)",t=!1):(e.zip="ZIP code is required",t=!1),L(e),t},ee=()=>""!==k.huntName.trim()&&""!==k.huntDate.trim()&&H(k.huntDate)&&""!==k.city.trim()&&""!==k.state.trim()&&_(k.state)&&""!==k.zip.trim()&&q(k.zip),te=async(e,t,a)=>{try{const s={firstName:b.firstName,lastName:b.lastName,email:b.email};let n,r;try{n=(await fa.loadApp()).data}catch(o){n={schemaVersion:"1.0.0",updatedAt:a,app:{metadata:{name:"Vail Hunt",environment:"development"},features:{enableKVEvents:!1,enableBlobEvents:!1,enablePhotoUpload:!0,enableMapPage:!1},defaults:{timezone:"America/Denver",locale:"en-US"}},organizations:[]}}try{r=(await fa.loadOrg(e)).data}catch(o){r=fa.createNewOrg(e,b.organizationName,[s])}const i={city:k.city,state:k.state,zip:k.zip},l=fa.createNewHunt(k.huntName,k.huntDate,k.huntDate,t,i),c=A.map((e,a)=>{const o=[];if(e.media&&e.mediaType){const t="video"===e.mediaType?"video":"image";o.push({type:t,url:"",caption:`${"video"===e.mediaType?"Video":"Image"} for ${e.title}`})}const s=[{type:e.mediaType||"photo",required:!0,description:"video"===e.mediaType?"Record a video at this location":"Take a photo at this location"}];return{id:`stop-${a+1}`,title:e.title,lat:0,lng:0,radiusMeters:50,description:`Step ${a+1}: ${e.title}`,hints:e.hints.filter(e=>e.trim()).map(e=>({text:e})),requirements:s,assets:o,audit:{createdBy:t,createdAt:(new Date).toISOString()}}});l.stops=c,r=await fa.addHuntToOrg(r,l);const d={orgSlug:e,orgName:b.organizationName,primaryContactEmail:b.email,createdAt:a,orgBlobKey:`orgs/${e}.json`};n=await fa.addOrganization(n,d),n=await fa.updateByDateIndex(n,k.huntDate,e,l.id),await fa.upsertOrg(r,e),await fa.upsertApp(n)}catch(o){throw o}};return E.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center modern-splash-screen",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-800",style:{background:"\n            radial-gradient(circle at 20% 30%, rgba(85, 36, 72, 0.4) 0%, transparent 50%),\n            radial-gradient(circle at 80% 70%, rgba(234, 227, 212, 0.2) 0%, transparent 50%),\n            linear-gradient(135deg, \n              rgba(85, 36, 72, 0.9) 0%, \n              rgba(107, 48, 87, 0.8) 25%,\n              rgba(68, 29, 57, 0.9) 50%,\n              rgba(85, 36, 72, 0.95) 100%\n            )\n          "}}),E.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:E.jsx("div",{className:"floating-particles",children:[...Array(20)].map((e,t)=>E.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full opacity-20",style:{left:100*Math.random()+"%",top:100*Math.random()+"%",animation:`float ${3+4*Math.random()}s ease-in-out infinite`,animationDelay:2*Math.random()+"s"}},t))})}),E.jsxs("div",{className:"relative z-10 h-full flex flex-col mx-auto p-4 sm:p-6 text-center",style:{maxWidth:["new-steps","review-submit"].includes(f)?"48rem":"32rem"},children:[E.jsxs("div",{className:"flex-shrink-0",children:[!["new-org","new-hunt","new-steps","review-submit"].includes(f)&&E.jsxs("div",{className:"mb-6 scale-in-animation",children:[E.jsx(ya,{size:"lg",animated:!0,className:"mx-auto mb-4"}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white tracking-tight",children:"Vail Hunt"}),E.jsx("p",{className:"text-base sm:text-lg font-light tracking-wide",style:{color:"var(--color-cream)"},children:"Mountain Adventure Awaits"})]})]}),E.jsxs("div",{className:"mb-6 fade-in-up-animation",style:{animationDelay:"0.3s"},children:[["new-org","new-hunt","new-steps","review-submit"].includes(f)&&E.jsxs("div",{className:"mb-4",children:[E.jsx("div",{className:"flex items-center justify-center space-x-2 mb-2",children:["new-org","new-hunt","new-steps","review-submit"].map((e,t)=>E.jsxs("div",{className:"flex items-center",children:[E.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium transition-all duration-300 "+(e===f?"bg-white/30 text-white ring-2 ring-white/50":["new-org","new-hunt","new-steps","review-submit"].indexOf(f)>t?"bg-white/20 text-white":"bg-white/10 text-white/50"),children:t+1}),t<3&&E.jsx("div",{className:"w-8 h-0.5 mx-2 transition-all duration-300 "+(["new-org","new-hunt","new-steps","review-submit"].indexOf(f)>t?"bg-white/30":"bg-white/10")})]},e))}),E.jsxs("div",{className:"text-xs text-white/60 text-center",children:["Step ",["new-org","new-hunt","new-steps","review-submit"].indexOf(f)+1," of 4"]})]}),E.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[("teams"===f||"form"===f||"new-org"===f||"new-hunt"===f||"new-steps"===f||"review-submit"===f)&&E.jsx("button",{onClick:"teams"===f?B:"form"===f?()=>{g(null),v("teams")}:"new-org"===f?B:"new-hunt"===f?()=>v("new-org"):"new-steps"===f?()=>v("new-hunt"):"review-submit"===f?()=>v("new-steps"):B,className:"p-2 rounded-full bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 transition-all duration-200 group","aria-label":"teams"===f?"Back to events":"form"===f?"Back to teams":"new-org"===f?"Back to events":"new-hunt"===f?"Back to organization setup":"new-steps"===f?"Back to hunt details":"review-submit"===f?"Back to steps setup":"Back",children:E.jsx("svg",{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),E.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-white",children:"events"===f?"Welcome to Your Adventure":"teams"===f?"Select Your Team":"form"===f?"Enter Your Information":"new-org"===f?"Set Up Your Organization":"new-hunt"===f?"Create Your Adventure":"new-steps"===f?"Build Your Hunt Steps":"review-submit"===f?"Review & Submit":"Welcome to Your Adventure"})]}),E.jsx("p",{className:"text-sm sm:text-base leading-relaxed max-w-md mx-auto px-2",style:{color:"rgba(234, 227, 212, 0.9)"},children:"events"===f?"Choose your organization for today's event, or set up a new mountain expedition.":"teams"===f?`Choose your team for ${null==h?void 0:h.eventName} - ${null==h?void 0:h.orgName}`:"form"===f?`Complete your registration for Team ${m} - ${null==h?void 0:h.eventName}`:"new-org"===f?"Provide your organization details to create a new scavenger hunt experience.":"new-hunt"===f?"Design your adventure with custom locations and challenges.":"new-steps"===f?"Create the steps participants will complete during your hunt adventure.":"review-submit"===f?"Review all details and submit to create your adventure.":"Choose your adventure path."})]})]}),E.jsxs("div",{className:"flex-1 flex flex-col min-h-0 fade-in-up-animation",style:{animationDelay:"0.6s"},children:["events"===f&&E.jsxs(E.Fragment,{children:[l&&E.jsxs("div",{className:"flex items-center justify-center space-x-3 text-white",children:[E.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-white border-t-transparent"}),E.jsx("span",{className:"text-lg",children:"Discovering today's adventures…"})]}),d&&E.jsx("div",{className:"bg-red-500/20 border border-red-400/30 rounded-xl p-4 text-red-200 backdrop-blur-sm",children:d}),!l&&!d&&E.jsx("div",{className:"space-y-4",children:r&&r.length>0?E.jsxs("div",{className:"space-y-3",children:[E.jsx("h3",{className:"text-lg font-medium text-white/90 mb-4",children:"Available Adventures"}),E.jsx("div",{className:"space-y-2",children:r.map((e,t)=>E.jsx("button",{className:"w-full max-w-md mx-auto group",onClick:()=>(e=>{p(e),v("teams")})(e),style:{animationDelay:.8+.1*t+"s"},children:E.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/20 hover:border-white/30 transition-all duration-300 hover:scale-105 hover:shadow-xl fade-in-up-animation",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"text-left",children:[E.jsx("div",{className:"font-semibold text-white text-lg",children:e.orgName}),E.jsxs("div",{className:"text-sm",style:{color:"rgba(234, 227, 212, 0.8)"},children:["Event: ",e.eventName]})]}),E.jsx("div",{className:"bg-white/20 p-2 rounded-full group-hover:bg-white/30 transition-colors",children:E.jsx("svg",{className:"w-5 h-5 text-white group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})},e.key))})]}):E.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl p-6 text-white/80",children:"No adventures scheduled for today. Ready to create one?"})})]}),"teams"===f&&E.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[E.jsx("div",{className:"flex-shrink-0 mb-4",children:E.jsx("h3",{className:"text-base font-medium text-white/90",children:"Choose Your Team"})}),E.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:E.jsx("div",{className:"grid grid-cols-2 gap-3 pb-4",children:ba.map((e,t)=>E.jsx("button",{className:"group",onClick:()=>(e=>{g(e),v("form")})(e),style:{animationDelay:.8+.05*t+"s"},children:E.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/20 hover:border-white/30 transition-all duration-300 hover:scale-105 hover:shadow-xl fade-in-up-animation h-full",children:E.jsxs("div",{className:"flex flex-col items-center gap-3",children:[E.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-white text-lg shadow-lg",style:{backgroundColor:"red"===e.toLowerCase()?"#DC2626":"green"===e.toLowerCase()?"#16A34A":"blue"===e.toLowerCase()?"#2563EB":"yellow"===e.toLowerCase()?"#CA8A04":"orange"===e.toLowerCase()?"#EA580C":"rgba(255, 255, 255, 0.2)"},children:e.charAt(0)}),E.jsxs("div",{className:"text-center",children:[E.jsxs("div",{className:"font-semibold text-white text-sm",children:["Team ",e]}),E.jsxs("div",{className:"text-xs mt-1",style:{color:"rgba(234, 227, 212, 0.7)"},children:["Join ",e.toLowerCase()]})]})]})})},e))})})]}),"form"===f&&E.jsxs("form",{onSubmit:t=>{t.preventDefault(),h&&m&&e(h,m)},className:"space-y-5",children:[E.jsxs("div",{className:"space-y-4",children:[E.jsx("div",{children:E.jsx("input",{type:"text",id:"firstName",required:!0,value:x.firstName,onChange:e=>R("firstName",e.target.value),className:"form-field",placeholder:"First name"})}),E.jsx("div",{children:E.jsx("input",{type:"text",id:"lastName",required:!0,value:x.lastName,onChange:e=>R("lastName",e.target.value),className:"form-field",placeholder:"Last name"})}),E.jsx("div",{children:E.jsx("input",{type:"email",id:"email",required:!0,value:x.email,onChange:e=>R("email",e.target.value),className:"form-field",placeholder:"Email address"})})]}),E.jsx("div",{className:"pt-4",children:E.jsxs("button",{type:"submit",className:"w-full group relative overflow-hidden text-white font-semibold text-base sm:text-lg px-6 sm:px-8 py-3 sm:py-4 rounded-full shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 modern-action-button",children:[E.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[E.jsx("span",{children:"Start Your Adventure"}),E.jsx("svg",{className:"w-5 h-5 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})})]}),"new-org"===f&&E.jsxs("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e={organizationName:"",firstName:"",lastName:"",email:""};let t=!0;return b.organizationName.trim()||(e.organizationName="Organization name is required",t=!1),b.firstName.trim()||(e.firstName="First name is required",t=!1),b.lastName.trim()||(e.lastName="Last name is required",t=!1),b.email.trim()?F(b.email)||(e.email="Please enter a valid email address",t=!1):(e.email="Email is required",t=!1),j(e),t})()&&v("new-hunt")},className:"space-y-5",children:[E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("input",{type:"text",id:"organizationName",required:!0,value:b.organizationName,onChange:e=>z("organizationName",e.target.value),className:"form-field "+(N.organizationName?"error-field":""),placeholder:"Organization name","aria-invalid":N.organizationName?"true":"false"}),N.organizationName&&E.jsxs("p",{className:"error-message",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),N.organizationName]})]}),E.jsxs("div",{children:[E.jsx("input",{type:"text",id:"orgFirstName",required:!0,value:b.firstName,onChange:e=>z("firstName",e.target.value),className:"form-field "+(N.firstName?"error-field":""),placeholder:"First name","aria-invalid":N.firstName?"true":"false"}),N.firstName&&E.jsxs("p",{className:"error-message",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),N.firstName]})]}),E.jsxs("div",{children:[E.jsx("input",{type:"text",id:"orgLastName",required:!0,value:b.lastName,onChange:e=>z("lastName",e.target.value),className:"form-field "+(N.lastName?"error-field":""),placeholder:"Last name","aria-invalid":N.lastName?"true":"false"}),N.lastName&&E.jsxs("p",{className:"error-message",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),N.lastName]})]}),E.jsxs("div",{children:[E.jsx("input",{type:"email",id:"orgEmail",required:!0,value:b.email,onChange:e=>z("email",e.target.value),className:"form-field "+(N.email?"error-field":""),placeholder:"Email address","aria-invalid":N.email?"true":"false"}),N.email&&E.jsxs("p",{className:"error-message",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),N.email]})]})]}),E.jsx("div",{className:"pt-4",children:E.jsxs("button",{type:"submit",disabled:!U(),className:"w-full group relative overflow-hidden font-semibold text-base sm:text-lg px-6 sm:px-8 py-3 sm:py-4 rounded-full shadow-xl transition-all duration-300 modern-action-button "+(U()?"text-white hover:shadow-2xl transform hover:scale-105":"text-white/50 cursor-not-allowed opacity-50"),children:[E.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[E.jsx("span",{children:"Continue to Adventure Setup"}),E.jsx("svg",{className:"w-5 h-5 transition-transform "+(U()?"group-hover:translate-x-1":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),U()&&E.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})})]}),"new-hunt"===f&&E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"summary-card mb-4",children:[E.jsx("h4",{className:"text-sm font-medium text-white/90 mb-3",children:"Organization Details"}),E.jsxs("div",{className:"space-y-2 text-sm",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-white/70",children:"Organization:"}),E.jsx("span",{className:"text-white",children:b.organizationName})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-white/70",children:"Contact:"}),E.jsxs("span",{className:"text-white",children:[b.firstName," ",b.lastName]})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-white/70",children:"Email:"}),E.jsx("span",{className:"text-white",children:b.email})]})]})]}),E.jsxs("form",{onSubmit:e=>{e.preventDefault(),X()&&v("new-steps")},className:"space-y-4",children:[E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("input",{type:"text",id:"huntName",required:!0,value:k.huntName,onChange:e=>Q("huntName",e.target.value),className:"form-field "+(C.huntName?"error-field":""),placeholder:"Hunt name (e.g., Mountain Adventure 2025)","aria-invalid":C.huntName?"true":"false"}),C.huntName&&E.jsxs("p",{className:"error-message",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),C.huntName]})]}),E.jsxs("div",{children:[E.jsx("input",{type:"date",id:"huntDate",required:!0,value:k.huntDate,onChange:e=>Q("huntDate",e.target.value),className:"form-field "+(C.huntDate?"error-field":""),"aria-invalid":C.huntDate?"true":"false"}),C.huntDate&&E.jsxs("p",{className:"error-message",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),C.huntDate]})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("input",{type:"text",id:"city",required:!0,value:k.city,onChange:e=>Q("city",e.target.value),className:"form-field "+(C.city?"error-field":""),placeholder:"City (e.g., Vail)","aria-invalid":C.city?"true":"false"}),C.city&&E.jsxs("p",{className:"error-message",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),C.city]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsxs("div",{children:[E.jsx("input",{type:"text",id:"state",required:!0,maxLength:2,value:k.state,onChange:e=>Q("state",e.target.value.toUpperCase()),className:"form-field "+(C.state?"error-field":""),placeholder:"State (CO)","aria-invalid":C.state?"true":"false"}),C.state&&E.jsxs("p",{className:"error-message",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),C.state]})]}),E.jsxs("div",{children:[E.jsx("input",{type:"text",id:"zip",required:!0,value:k.zip,onChange:e=>Q("zip",e.target.value),className:"form-field "+(C.zip?"error-field":""),placeholder:"ZIP (81657)","aria-invalid":C.zip?"true":"false"}),C.zip&&E.jsxs("p",{className:"error-message",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),C.zip]})]})]})]})]}),E.jsx("div",{className:"pt-4",children:E.jsxs("button",{type:"submit",disabled:!ee(),className:"w-full group relative overflow-hidden font-semibold text-base sm:text-lg px-6 sm:px-8 py-3 sm:py-4 rounded-full shadow-xl transition-all duration-300 modern-action-button "+(ee()?"text-white hover:shadow-2xl transform hover:scale-105":"text-white/50 cursor-not-allowed opacity-50"),children:[E.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[E.jsx("span",{children:"Create Adventure"}),E.jsx("svg",{className:"w-5 h-5 transition-transform "+(ee()?"group-hover:translate-x-1":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),ee()&&E.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})})]}),E.jsx("div",{className:"text-center",children:E.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:E.jsx("p",{className:"text-xs text-white/60",children:"Creating your adventure will take you to the event page where you can add locations and challenges."})})})]}),"new-steps"===f&&E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"summary-card mb-4",children:[E.jsx("h4",{className:"text-sm font-medium text-white/90 mb-3",children:"Hunt Details"}),E.jsxs("div",{className:"space-y-2 text-sm",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-white/70",children:"Hunt Name:"}),E.jsx("span",{className:"text-white",children:k.huntName})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-white/70",children:"Date:"}),E.jsx("span",{className:"text-white",children:k.huntDate})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-white/70",children:"Location:"}),E.jsxs("span",{className:"text-white",children:[k.city,", ",k.state," ",k.zip]})]})]})]}),E.jsxs("form",{onSubmit:e=>{e.preventDefault(),K()&&v("review-submit")},className:"space-y-6",children:[E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"space-y-4",children:0===A.length?E.jsxs("div",{className:"text-center py-8 bg-white/5 border border-white/10 rounded-xl",children:[E.jsxs("div",{className:"text-white/60 mb-4",children:[E.jsx("svg",{className:"w-12 h-12 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"No steps created yet"]}),E.jsx("p",{className:"text-white/40 text-sm mb-4",children:"Create your first hunt step to get started"}),E.jsx("button",{type:"button",onClick:W,className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors",children:"Add First Step"})]}):E.jsxs(E.Fragment,{children:[A.map((e,t)=>E.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4",children:[E.jsxs("div",{className:"flex items-start justify-between mb-4",children:[E.jsxs("h5",{className:"text-white font-medium",children:["Step ",t+1]}),E.jsxs("div",{className:"flex items-center gap-2",children:[A.length>1&&E.jsxs(E.Fragment,{children:[E.jsx("button",{type:"button",onClick:()=>(e=>{0!==e&&T(t=>{const a=[...t],o=a[e];return a[e]=a[e-1],a[e-1]=o,a})})(t),disabled:0===t,className:"p-1 rounded "+(0===t?"text-white/30 cursor-not-allowed":"text-white/70 hover:text-white hover:bg-white/10"),"aria-label":"Move step up",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),E.jsx("button",{type:"button",onClick:()=>(e=>{e!==A.length-1&&T(t=>{const a=[...t],o=a[e];return a[e]=a[e+1],a[e+1]=o,a})})(t),disabled:t===A.length-1,className:"p-1 rounded "+(t===A.length-1?"text-white/30 cursor-not-allowed":"text-white/70 hover:text-white hover:bg-white/10"),"aria-label":"Move step down",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),E.jsx("button",{type:"button",onClick:()=>(e=>{T(t=>t.filter((t,a)=>a!==e))})(t),className:"p-1 rounded text-red-400 hover:text-red-300 hover:bg-red-400/10","aria-label":"Remove step",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),E.jsx("div",{className:"mb-4",children:E.jsx("input",{type:"text",value:e.title,onChange:e=>((e,t)=>{T(a=>a.map((a,o)=>o===e?{...a,title:t}:a))})(t,e.target.value),placeholder:"Step title (e.g., Find the red mailbox)",className:"form-field",required:!0})}),E.jsxs("div",{className:"mb-4",children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsx("label",{className:"text-sm text-white/80",children:"Hints"}),e.hints.length<3&&E.jsx("button",{type:"button",onClick:()=>{return e=t,void T(t=>t.map((t,a)=>a===e?{...t,hints:[...t.hints,""]}:t));var e},className:"text-xs bg-white/20 hover:bg-white/30 text-white px-2 py-1 rounded transition-colors",children:"+ Add Hint"})]}),E.jsx("div",{className:"space-y-2",children:e.hints.map((a,o)=>E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"text",value:a,onChange:e=>((e,t,a)=>{T(o=>o.map((o,s)=>s===e?{...o,hints:o.hints.map((e,o)=>o===t?a:e)}:o))})(t,o,e.target.value),placeholder:`Hint ${o+1}`,className:"form-field flex-1 text-sm",required:0===o}),e.hints.length>1&&E.jsx("button",{type:"button",onClick:()=>((e,t)=>{T(a=>a.map((a,o)=>o===e?{...a,hints:a.hints.filter((e,a)=>a!==t)}:a))})(t,o),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-400/10 rounded","aria-label":`Remove hint ${o+1}`,children:E.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},o))})]}),E.jsxs("div",{children:[E.jsx("label",{className:"text-sm text-white/80 mb-2 block",children:"Optional Media"}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("input",{type:"file",accept:"image/*,video/*",onChange:e=>{var a;return G(t,(null==(a=e.target.files)?void 0:a[0])||null)},className:"hidden",id:`step-media-${t}`}),E.jsx("label",{htmlFor:`step-media-${t}`,className:"cursor-pointer bg-white/10 hover:bg-white/20 border border-white/20 text-white px-3 py-2 rounded-lg text-sm transition-colors",children:e.media?"Change Media":"Add Image/Video"}),e.media&&E.jsxs(E.Fragment,{children:[E.jsxs("span",{className:"text-white/70 text-sm",children:["video"===e.mediaType?"🎥":"🖼️"," ",e.media.name]}),E.jsx("button",{type:"button",onClick:()=>G(t,null),className:"text-red-400 hover:text-red-300 text-sm",children:"Clear"})]})]}),e.media&&E.jsx("div",{className:"mt-3",children:E.jsx(V,{file:e.media,onRemove:()=>G(t,null)})}),E.jsxs("div",{className:"mt-2 text-xs text-white/50",children:["Images: JPEG, PNG, GIF, WebP (max 12MB)",E.jsx("br",{}),"Videos: MP4, WebM, OGG, QuickTime (max 200MB)"]})]}),I[t]&&E.jsxs("div",{className:"error-message mt-3",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),I[t]]})]},e.id)),E.jsx("div",{className:"text-center",children:E.jsxs("button",{type:"button",onClick:W,className:"bg-white/10 hover:bg-white/20 border border-white/20 text-white px-6 py-3 rounded-xl transition-colors flex items-center gap-2 mx-auto",children:[E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Another Step"]})})]})}),I.length>0&&I.some(e=>e&&!e.startsWith("Step"))&&E.jsx("div",{className:"bg-red-500/20 border border-red-400/30 rounded-xl p-4 text-red-200",children:I.filter(e=>e&&!e.startsWith("Step")).map((e,t)=>E.jsx("div",{role:"alert",children:e},t))})]}),A.length>0&&E.jsx("div",{className:"pt-4",children:E.jsxs("button",{type:"submit",disabled:!Y(),className:"w-full group relative overflow-hidden font-semibold text-base sm:text-lg px-6 sm:px-8 py-3 sm:py-4 rounded-full shadow-xl transition-all duration-300 modern-action-button "+(Y()?"text-white hover:shadow-2xl transform hover:scale-105":"text-white/50 cursor-not-allowed opacity-50"),children:[E.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[E.jsx("span",{children:"Continue to Review"}),E.jsx("svg",{className:"w-5 h-5 transition-transform "+(Y()?"group-hover:translate-x-1":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),Y()&&E.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})})]}),E.jsx("div",{className:"text-center",children:E.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:E.jsx("p",{className:"text-xs text-white/60",children:"Create 1-10 steps that participants will complete. Each step needs a title and at least one hint. Images and videos are optional but help guide participants."})})})]}),"review-submit"===f&&E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{className:"summary-card",children:[E.jsx("h4",{className:"text-sm font-medium text-white/90 mb-3",children:"Organization"}),E.jsxs("div",{className:"space-y-2 text-sm",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-white/70",children:"Name:"}),E.jsx("span",{className:"text-white",children:b.organizationName})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-white/70",children:"Contact:"}),E.jsxs("span",{className:"text-white",children:[b.firstName," ",b.lastName]})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-white/70",children:"Email:"}),E.jsx("span",{className:"text-white",children:b.email})]})]})]}),E.jsxs("div",{className:"summary-card",children:[E.jsx("h4",{className:"text-sm font-medium text-white/90 mb-3",children:"Hunt Details"}),E.jsxs("div",{className:"space-y-2 text-sm",children:[E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-white/70",children:"Hunt Name:"}),E.jsx("span",{className:"text-white",children:k.huntName})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-white/70",children:"Date:"}),E.jsx("span",{className:"text-white",children:k.huntDate})]}),E.jsxs("div",{className:"flex justify-between",children:[E.jsx("span",{className:"text-white/70",children:"Location:"}),E.jsxs("span",{className:"text-white",children:[k.city,", ",k.state," ",k.zip]})]})]})]}),E.jsxs("div",{className:"summary-card",children:[E.jsxs("h4",{className:"text-sm font-medium text-white/90 mb-3",children:["Hunt Steps (",A.length,")"]}),E.jsx("div",{className:"space-y-3",children:A.map((e,t)=>E.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:E.jsxs("div",{className:"flex items-start gap-3",children:[E.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-white/20 flex items-center justify-center text-white text-xs font-medium",children:t+1}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsx("div",{className:"text-white font-medium text-sm mb-1",children:e.title}),E.jsxs("div",{className:"text-white/60 text-xs mb-2",children:[e.hints.filter(e=>e.trim()).length," hint",1!==e.hints.filter(e=>e.trim()).length?"s":"",e.media&&E.jsxs("span",{className:"ml-2",children:["• Has ","video"===e.mediaType?"video 🎥":"image 🖼️"]})]}),E.jsx("div",{className:"space-y-1",children:e.hints.filter(e=>e.trim()).map((e,t)=>E.jsxs("div",{className:"text-white/50 text-xs",children:["• ",e]},t))})]})]})},e.id))})]})]}),E.jsx("form",{onSubmit:async t=>{if(t.preventDefault(),X()&&K()){P(!0);try{const t=Je(b.organizationName),a=(new Date).toISOString(),o=`${b.firstName} ${b.lastName}`,s={key:`events/${k.huntDate}/${t}`,orgSlug:t,orgName:b.organizationName,eventName:k.huntName,startAt:k.huntDate,endAt:k.huntDate,data:{description:`${k.huntName} - ${b.organizationName}`,createdBy:o,createdByEmail:b.email,createdAt:a}};e(s),te(t,o,a).catch(e=>{n("Hunt created successfully, but saving to storage failed",{duration:6e3})})}catch(a){n("Failed to create hunt. Please try again.",{duration:6e3})}finally{P(!1)}}},className:"space-y-6",children:E.jsx("div",{className:"pt-4",children:E.jsxs("button",{type:"submit",disabled:!J()||!Z()||O,className:"w-full group relative overflow-hidden font-semibold text-base sm:text-lg px-6 sm:px-8 py-3 sm:py-4 rounded-full shadow-xl transition-all duration-300 modern-action-button "+(J()&&Z()&&!O?"text-white hover:shadow-2xl transform hover:scale-105":"text-white/50 cursor-not-allowed opacity-50"),children:[E.jsx("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:O?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),E.jsx("span",{children:"Creating Adventure..."})]}):E.jsxs(E.Fragment,{children:[E.jsx("span",{children:"Create Adventure"}),E.jsx("svg",{className:"w-5 h-5 transition-transform "+(J()&&Z()?"group-hover:translate-x-1":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})}),J()&&Z()&&E.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})})}),E.jsx("div",{className:"text-center",children:E.jsx("div",{className:"bg-white/5 border border-white/10 rounded-lg p-3",children:E.jsx("p",{className:"text-xs text-white/60",children:"Ready to create your adventure? This will set up your organization and hunt, then take you to the event page where participants can join and start their journey."})})})]})]}),"events"===f&&E.jsx("div",{className:"fade-in-up-animation",style:{animationDelay:"0.9s"},children:E.jsxs("button",{onClick:()=>{v("new-org")},className:"group relative overflow-hidden text-white font-semibold text-base sm:text-lg px-6 sm:px-8 py-3 sm:py-4 rounded-full shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 w-full max-w-sm sm:min-w-[250px] modern-action-button",children:[E.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[E.jsx("span",{children:"Set up a new adventure"}),E.jsx("svg",{className:"w-5 h-5 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})})]}),E.jsx("style",{children:"\n        .modern-splash-screen {\n          backdrop-filter: blur(8px);\n        }\n        \n        .modern-action-button {\n          background: linear-gradient(135deg, \n            var(--color-cabernet) 0%, \n            var(--color-cabernet-hover) 100%\n          );\n          box-shadow: 0 10px 30px rgba(85, 36, 72, 0.4);\n        }\n        \n        .scale-in-animation {\n          animation: scaleIn 0.8s ease-out forwards;\n        }\n        \n        .fade-in-up-animation {\n          animation: fadeInUp 0.8s ease-out forwards;\n          opacity: 0;\n          transform: translateY(30px);\n        }\n        \n        /* Improved scrollbar styling */\n        .scrollbar-hide {\n          -ms-overflow-style: none;\n          scrollbar-width: none;\n        }\n        \n        .scrollbar-hide::-webkit-scrollbar {\n          display: none;\n        }\n        \n        /* Enhanced form field styling */\n        .form-field {\n          width: 100%;\n          padding: 0.75rem 1rem;\n          border-radius: 0.75rem;\n          background: rgba(255, 255, 255, 0.1);\n          backdrop-filter: blur(12px);\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          color: white;\n          outline: none;\n          transition: all 0.2s;\n        }\n        \n        .form-field::placeholder {\n          color: rgba(255, 255, 255, 0.5);\n        }\n        \n        .form-field:focus {\n          background: rgba(255, 255, 255, 0.2);\n          border-color: rgba(255, 255, 255, 0.4);\n          box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);\n        }\n        \n        /* Summary card improvements */\n        .summary-card {\n          background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);\n          backdrop-filter: blur(12px);\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          border-radius: 0.75rem;\n          padding: 1rem;\n        }\n        \n        /* Enhanced error styling */\n        .error-field {\n          border-color: #f87171 !important;\n          background: linear-gradient(135deg, rgba(248, 113, 113, 0.1) 0%, rgba(248, 113, 113, 0.05) 100%);\n          box-shadow: 0 0 0 3px rgba(248, 113, 113, 0.1);\n        }\n        \n        .error-message {\n          color: #fca5a5;\n          font-size: 0.75rem;\n          margin-top: 0.25rem;\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n        }\n        \n        /* Button enhancements */\n        .modern-action-button:not(:disabled):hover {\n          transform: translateY(-1px) scale(1.02);\n        }\n        \n        .modern-action-button:not(:disabled):active {\n          transform: translateY(0) scale(0.98);\n        }\n        \n        @keyframes scaleIn {\n          from {\n            opacity: 0;\n            transform: scale(0.8);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n        \n        @keyframes fadeInUp {\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        \n        @keyframes float {\n          0%, 100% {\n            transform: translateY(0px);\n          }\n          50% {\n            transform: translateY(-20px);\n          }\n        }\n      "})]})}const Na=class e{constructor(){}static getInstance(){return e.instance||(e.instance=new e),e.instance}async sendMagicLink(e){try{return await D.post("/auth/magic-link",e)}catch(t){throw t}}async verifyMagicLink(e){try{return await D.get(`/auth/verify?token=${e}`)}catch(t){throw t}}async getAuthStatus(){try{return await D.get("/auth/status")}catch(e){return{authenticated:!1,user:null}}}extractTokenFromUrl(){if("undefined"==typeof window)return null;return new URLSearchParams(window.location.search).get("token")}generateReturnUrl(e){if("undefined"==typeof window)return"";const t=`${window.location.protocol}//${window.location.host}`;return e?`${t}${e}`:`${t}/auth/callback`}clearAuthParams(){if("undefined"==typeof window)return;const e=new URL(window.location.href);e.searchParams.delete("token"),window.history.replaceState({},"",e.toString())}};t(Na,"instance");const ja=Na.getInstance(),ka=["RED","GREEN","BLUE","YELLOW","ORANGE"];function Sa({onContinueHunt:e,onJoinEvent:t,onPlanFuture:o,onCreateNew:s,onClose:n}){const{success:r}=ze(),[i,l]=a.useState("main"),[c,d]=a.useState(null),[u,h]=a.useState(null),[p,m]=a.useState(null),[g,f]=a.useState(!1),[v,x]=a.useState(null),[y,b]=a.useState(""),[w,N]=a.useState(!1),[j,k]=a.useState(""),[S,C]=a.useState({firstName:"",lastName:"",email:"",teamName:""}),[L,A]=a.useState({email:"",firstName:"",interests:[]}),[T,I]=a.useState({firstName:"",lastName:"",email:""});a.useEffect(()=>{D()},[]);const D=async()=>{try{f(!0);const e=await va();d(e)}catch(e){x("Failed to load events")}finally{f(!1)}},O=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),P=(e,t)=>{C(a=>({...a,[e]:t})),T[e]&&I(t=>({...t,[e]:""}))};return E.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center modern-splash-screen",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-800",style:{background:"\n            radial-gradient(circle at 20% 30%, rgba(85, 36, 72, 0.4) 0%, transparent 50%),\n            radial-gradient(circle at 80% 70%, rgba(234, 227, 212, 0.2) 0%, transparent 50%),\n            linear-gradient(135deg, \n              rgba(85, 36, 72, 0.9) 0%, \n              rgba(107, 48, 87, 0.8) 25%,\n              rgba(68, 29, 57, 0.9) 50%,\n              rgba(85, 36, 72, 0.95) 100%\n            )\n          "}}),E.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:E.jsx("div",{className:"floating-particles",children:[...Array(20)].map((e,t)=>E.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full opacity-20",style:{left:100*Math.random()+"%",top:100*Math.random()+"%",animation:`float ${3+4*Math.random()}s ease-in-out infinite`,animationDelay:2*Math.random()+"s"}},t))})}),E.jsxs("div",{className:"relative z-10 h-full flex flex-col mx-auto p-4 sm:p-6 text-center max-w-lg",children:[E.jsxs("div",{className:"flex-shrink-0",children:["main"!==i&&E.jsx("div",{className:"mb-4",children:E.jsx("button",{onClick:()=>{"continue-hunt"===i||"magic-link-sent"===i||"join-event"===i||"plan-future"===i?l("main"):"select-team"===i||"enter-info"===i?l("join-event"):"interests"===i?l("plan-future"):"details"===i&&l("interests")},className:"p-2 rounded-full bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 transition-all duration-200 group","aria-label":"Go back",children:E.jsx("svg",{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})}),"main"===i&&E.jsxs("div",{className:"mb-6 scale-in-animation",children:[E.jsx(ya,{size:"lg",animated:!0,className:"mx-auto mb-4"}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white tracking-tight",children:"Vail Hunt"}),E.jsx("p",{className:"text-base sm:text-lg font-light tracking-wide",style:{color:"var(--color-cream)"},children:"Mountain Adventure Awaits"})]})]})]}),E.jsxs("div",{className:"flex-1 flex flex-col min-h-0 fade-in-up-animation",children:["main"===i&&E.jsxs("div",{className:"space-y-4",children:[E.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"What brings you here today?"}),E.jsx("button",{onClick:()=>l("continue-hunt"),className:"w-full p-4 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl hover:bg-white/20 hover:border-white/30 transition-all duration-300 group",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500/20 flex items-center justify-center",children:E.jsx("span",{className:"text-2xl",children:"🎯"})}),E.jsxs("div",{className:"flex-1 text-left",children:[E.jsx("div",{className:"font-semibold text-white",children:"Continue Your Hunt"}),E.jsx("div",{className:"text-sm text-white/70",children:"Already participating? Jump back in!"})]}),E.jsx("svg",{className:"w-5 h-5 text-white/70 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),E.jsx("button",{onClick:()=>l("join-event"),className:"w-full p-4 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl hover:bg-white/20 hover:border-white/30 transition-all duration-300 group",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center",children:E.jsx("span",{className:"text-2xl",children:"🏃"})}),E.jsxs("div",{className:"flex-1 text-left",children:[E.jsx("div",{className:"font-semibold text-white",children:"Join Today's Event"}),E.jsx("div",{className:"text-sm text-white/70",children:"New participant? Sign up now!"})]}),E.jsx("svg",{className:"w-5 h-5 text-white/70 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),E.jsx("button",{onClick:()=>l("plan-future"),className:"w-full p-4 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl hover:bg-white/20 hover:border-white/30 transition-all duration-300 group",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center",children:E.jsx("span",{className:"text-2xl",children:"📅"})}),E.jsxs("div",{className:"flex-1 text-left",children:[E.jsx("div",{className:"font-semibold text-white",children:"Plan Future Event"}),E.jsx("div",{className:"text-sm text-white/70",children:"Interested? Get personalized recommendations"})]}),E.jsx("svg",{className:"w-5 h-5 text-white/70 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),E.jsx("button",{onClick:s,className:"w-full p-4 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl hover:bg-white/20 hover:border-white/30 transition-all duration-300 group",children:E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-500/20 flex items-center justify-center",children:E.jsx("span",{className:"text-2xl",children:"➕"})}),E.jsxs("div",{className:"flex-1 text-left",children:[E.jsx("div",{className:"font-semibold text-white",children:"Create New Hunt"}),E.jsx("div",{className:"text-sm text-white/70",children:"Organize your own adventure"})]}),E.jsx("svg",{className:"w-5 h-5 text-white/70 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]}),"continue-hunt"===i&&E.jsxs("form",{onSubmit:async e=>{var t;if(e.preventDefault(),k(""),y.trim())if(O(y))try{N(!0);const e=ja.generateReturnUrl("/hunt"),t=await ja.sendMagicLink({email:y,returnUrl:e});t.success?(r(t.message),l("magic-link-sent"),t.token):k(t.message)}catch(a){const e=(null==(t=null==a?void 0:a.body)?void 0:t.message)||(null==a?void 0:a.message)||"Failed to send magic link. Please try again.";k(e)}finally{N(!1)}else k("Please enter a valid email address");else k("Email is required")},className:"space-y-6",children:[E.jsxs("div",{className:"text-center space-y-3",children:[E.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-green-500/20 flex items-center justify-center mb-4",children:E.jsx("span",{className:"text-3xl",children:"🔐"})}),E.jsx("h2",{className:"text-xl font-semibold text-white",children:"Welcome Back!"}),E.jsx("p",{className:"text-white/80",children:"Enter your email address and we'll send you a secure link to continue your hunt."})]}),E.jsx("div",{className:"space-y-4",children:E.jsxs("div",{children:[E.jsx("input",{type:"email",value:y,onChange:e=>{b(e.target.value),k("")},className:"form-field "+(j?"error-field":""),placeholder:"Enter your email address",required:!0,disabled:w}),j&&E.jsxs("p",{className:"error-message",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01"})}),j]})]})}),E.jsxs("button",{type:"submit",disabled:w,className:"w-full group relative overflow-hidden text-white font-semibold text-base px-6 py-3 rounded-full shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 modern-action-button disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[E.jsx("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:w?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),E.jsx("span",{children:"Sending Magic Link..."})]}):E.jsxs(E.Fragment,{children:[E.jsx("span",{children:"Send Magic Link"}),E.jsx("svg",{className:"w-5 h-5 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})]})}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})]}),"magic-link-sent"===i&&E.jsxs("div",{className:"space-y-6 text-center",children:[E.jsx("div",{className:"w-20 h-20 mx-auto rounded-full bg-green-500/20 flex items-center justify-center mb-4",children:E.jsx("span",{className:"text-4xl",children:"✉️"})}),E.jsx("h2",{className:"text-xl font-semibold text-white",children:"Check Your Email!"}),E.jsxs("p",{className:"text-white/80",children:["We've sent a secure login link to ",E.jsx("span",{className:"font-semibold text-white",children:y})]}),E.jsxs("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 text-left",children:[E.jsx("h4",{className:"font-semibold text-white mb-2",children:"Next Steps:"}),E.jsxs("ul",{className:"space-y-2 text-sm text-white/80",children:[E.jsxs("li",{className:"flex items-start gap-2",children:[E.jsx("span",{className:"text-green-400 mt-0.5",children:"1."}),"Check your email (including spam folder)"]}),E.jsxs("li",{className:"flex items-start gap-2",children:[E.jsx("span",{className:"text-green-400 mt-0.5",children:"2."}),"Click the secure login link"]}),E.jsxs("li",{className:"flex items-start gap-2",children:[E.jsx("span",{className:"text-green-400 mt-0.5",children:"3."}),"Continue your hunt adventure!"]})]})]}),E.jsx("button",{onClick:()=>{b(""),l("continue-hunt")},className:"text-white/70 hover:text-white underline text-sm",children:"Try a different email address"})]}),"join-event"===i&&E.jsxs("div",{className:"space-y-6",children:[E.jsx("h2",{className:"text-xl font-semibold text-white",children:"Join Today's Adventure"}),E.jsx("p",{className:"text-white/80",children:"Select an event to join as a new participant."}),g&&E.jsxs("div",{className:"flex items-center justify-center space-x-3 text-white",children:[E.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-white border-t-transparent"}),E.jsx("span",{children:"Loading events..."})]}),c&&c.length>0&&E.jsxs("div",{className:"space-y-3",children:[E.jsx("h3",{className:"text-lg font-medium text-white/90",children:"Available Events"}),E.jsx("div",{className:"space-y-2",children:c.map(e=>E.jsx("button",{onClick:()=>{h(e),l("select-team")},className:"w-full group",children:E.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/20 hover:border-white/30 transition-all duration-300",children:E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"text-left",children:[E.jsx("div",{className:"font-semibold text-white",children:e.orgName}),E.jsx("div",{className:"text-sm text-white/70",children:e.eventName})]}),E.jsx("svg",{className:"w-5 h-5 text-white/70 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})},e.key))})]}),c&&0===c.length&&E.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-6 text-white/80",children:"No events scheduled for today. Would you like to create one?"})]}),"select-team"===i&&u&&E.jsxs("div",{className:"space-y-6",children:[E.jsx("h2",{className:"text-xl font-semibold text-white",children:"Choose Your Team"}),E.jsxs("p",{className:"text-white/80",children:["Joining: ",E.jsx("span",{className:"font-semibold",children:u.eventName})]}),E.jsx("div",{className:"grid grid-cols-2 gap-3",children:ka.map(e=>E.jsx("button",{onClick:()=>{m(e),C(t=>({...t,teamName:e})),l("enter-info")},className:"group",children:E.jsx("div",{className:"bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-4 hover:bg-white/20 hover:border-white/30 transition-all duration-300",children:E.jsxs("div",{className:"flex flex-col items-center gap-3",children:[E.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center font-bold text-white text-lg shadow-lg",style:{backgroundColor:"red"===e.toLowerCase()?"#DC2626":"green"===e.toLowerCase()?"#16A34A":"blue"===e.toLowerCase()?"#2563EB":"yellow"===e.toLowerCase()?"#CA8A04":"orange"===e.toLowerCase()?"#EA580C":"rgba(255, 255, 255, 0.2)"},children:e.charAt(0)}),E.jsxs("div",{className:"text-center",children:[E.jsxs("div",{className:"font-semibold text-white text-sm",children:["Team ",e]}),E.jsxs("div",{className:"text-xs text-white/70",children:["Join ",e.toLowerCase()]})]})]})})},e))})]}),"enter-info"===i&&E.jsxs("form",{onSubmit:t=>{t.preventDefault(),(()=>{const e={firstName:"",lastName:"",email:""};let t=!0;return S.firstName.trim()||(e.firstName="First name is required",t=!1),S.lastName.trim()||(e.lastName="Last name is required",t=!1),S.email.trim()?O(S.email)||(e.email="Please enter a valid email address",t=!1):(e.email="Email is required",t=!1),I(e),t})()&&u&&e(u,S)},className:"space-y-6",children:[E.jsx("h2",{className:"text-xl font-semibold text-white",children:p?`Joining Team ${p}`:"Confirm Your Details"}),E.jsxs("p",{className:"text-white/80",children:["Event: ",E.jsx("span",{className:"font-semibold",children:null==u?void 0:u.eventName})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("input",{type:"text",value:S.firstName,onChange:e=>P("firstName",e.target.value),className:"form-field "+(T.firstName?"error-field":""),placeholder:"First name",required:!0}),T.firstName&&E.jsxs("p",{className:"error-message",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01"})}),T.firstName]})]}),E.jsxs("div",{children:[E.jsx("input",{type:"text",value:S.lastName,onChange:e=>P("lastName",e.target.value),className:"form-field "+(T.lastName?"error-field":""),placeholder:"Last name",required:!0}),T.lastName&&E.jsxs("p",{className:"error-message",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01"})}),T.lastName]})]}),E.jsxs("div",{children:[E.jsx("input",{type:"email",value:S.email,onChange:e=>P("email",e.target.value),className:"form-field "+(T.email?"error-field":""),placeholder:"Email address",required:!0}),T.email&&E.jsxs("p",{className:"error-message",role:"alert",children:[E.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01"})}),T.email]})]})]}),E.jsxs("button",{type:"submit",className:"w-full group relative overflow-hidden text-white font-semibold text-base px-6 py-3 rounded-full shadow-xl hover:shadow-2xl transform hover:scale-105 transition-all duration-300 modern-action-button",children:[E.jsxs("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:[E.jsx("span",{children:"Start Your Adventure"}),E.jsx("svg",{className:"w-5 h-5 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})]}),"plan-future"===i&&E.jsxs("div",{className:"space-y-6",children:[E.jsx("h2",{className:"text-xl font-semibold text-white",children:"Plan Your Adventure"}),E.jsx("p",{className:"text-white/80",children:"Tell us about your interests and we'll send you personalized recommendations."}),E.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{id:"adventure",label:"Outdoor Adventures",icon:"🏔️"},{id:"team-building",label:"Team Building",icon:"👥"},{id:"date-night",label:"Date Experiences",icon:"💕"},{id:"family",label:"Family Activities",icon:"👨‍👩‍👧‍👦"},{id:"photography",label:"Photo Challenges",icon:"📸"},{id:"local-culture",label:"Local Culture",icon:"🏘️"}].map(e=>E.jsxs("button",{onClick:()=>{const t=L.interests.includes(e.id)?L.interests.filter(t=>t!==e.id):[...L.interests,e.id];A(e=>({...e,interests:t}))},className:"p-3 rounded-xl border transition-all duration-300 "+(L.interests.includes(e.id)?"bg-white/20 border-white/40 text-white":"bg-white/5 border-white/20 text-white/80 hover:bg-white/10"),children:[E.jsx("div",{className:"text-2xl mb-1",children:e.icon}),E.jsx("div",{className:"text-xs font-medium",children:e.label})]},e.id))}),E.jsxs("button",{onClick:()=>{L.interests.length>0&&o(L)},disabled:0===L.interests.length,className:"w-full px-6 py-3 rounded-full transition-all duration-300 "+(L.interests.length>0?"bg-white/20 hover:bg-white/30 text-white border border-white/30":"bg-white/5 text-white/50 cursor-not-allowed border border-white/10"),children:["Get Recommendations (",L.interests.length," selected)"]})]})]})]}),E.jsx("style",{children:"\n        .modern-splash-screen {\n          backdrop-filter: blur(8px);\n        }\n        \n        .modern-action-button {\n          background: linear-gradient(135deg, \n            var(--color-cabernet) 0%, \n            var(--color-cabernet-hover) 100%\n          );\n          box-shadow: 0 10px 30px rgba(85, 36, 72, 0.4);\n        }\n        \n        .scale-in-animation {\n          animation: scaleIn 0.8s ease-out forwards;\n        }\n        \n        .fade-in-up-animation {\n          animation: fadeInUp 0.8s ease-out forwards;\n          opacity: 0;\n          transform: translateY(30px);\n        }\n        \n        .form-field {\n          width: 100%;\n          padding: 0.75rem 1rem;\n          border-radius: 0.75rem;\n          background: rgba(255, 255, 255, 0.1);\n          backdrop-filter: blur(12px);\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          color: white;\n          outline: none;\n          transition: all 0.2s;\n        }\n        \n        .form-field::placeholder {\n          color: rgba(255, 255, 255, 0.5);\n        }\n        \n        .form-field:focus {\n          background: rgba(255, 255, 255, 0.2);\n          border-color: rgba(255, 255, 255, 0.4);\n          box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);\n        }\n        \n        .error-field {\n          border-color: #f87171 !important;\n          background: linear-gradient(135deg, rgba(248, 113, 113, 0.1) 0%, rgba(248, 113, 113, 0.05) 100%);\n          box-shadow: 0 0 0 3px rgba(248, 113, 113, 0.1);\n        }\n        \n        .error-message {\n          color: #fca5a5;\n          font-size: 0.75rem;\n          margin-top: 0.25rem;\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n        }\n        \n        @keyframes scaleIn {\n          from {\n            opacity: 0;\n            transform: scale(0.8);\n          }\n          to {\n            opacity: 1;\n            transform: scale(1);\n          }\n        }\n        \n        @keyframes fadeInUp {\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n        \n        @keyframes float {\n          0%, 100% {\n            transform: translateY(0px);\n          }\n          50% {\n            transform: translateY(-20px);\n          }\n        }\n      "})]})}const Ca={preferredEventTypes:[],locationPreferences:["vail","denver","boulder"],timePreferences:["weekend","evening"],communicationStyle:"regular"},Ea=f()(J(X((e,t)=>({currentCustomer:null,onboardingProgress:null,preferences:null,leads:[],showNewCustomerFlow:!1,isOnboardingComplete:!1,setCurrentCustomer:t=>{e({currentCustomer:{...t,leadStatus:t.leadStatus||"prospect",createdAt:t.createdAt||(new Date).toISOString(),lastInteraction:(new Date).toISOString()}})},updateCustomer:a=>{const o=t().currentCustomer;if(o){const t={...o,...a,lastInteraction:(new Date).toISOString()};e({currentCustomer:t})}},clearCurrentCustomer:()=>{e({currentCustomer:null,onboardingProgress:null,isOnboardingComplete:!1})},startOnboarding:(a="organic")=>{const o={currentStep:"welcome",completedSteps:[],startedAt:(new Date).toISOString(),resumeToken:`onboard_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};e({onboardingProgress:o,showNewCustomerFlow:!0,isOnboardingComplete:!1});t().currentCustomer&&t().updateCustomer({source:a})},updateOnboardingProgress:a=>{const o=t().onboardingProgress;if(o){const t=o.completedSteps.includes(o.currentStep)?o.completedSteps:[...o.completedSteps,o.currentStep];e({onboardingProgress:{...o,currentStep:a,completedSteps:t}})}},completeOnboarding:()=>{const a=t().onboardingProgress,o=t().currentCustomer;a&&(e({onboardingProgress:{...a,currentStep:"completed",completedAt:(new Date).toISOString(),completedSteps:[...a.completedSteps,a.currentStep]},isOnboardingComplete:!0}),o&&t().addLead({...o,leadStatus:"qualified"}))},abandonOnboarding:()=>{const a=t().onboardingProgress;a&&e({onboardingProgress:{...a,abandonedAt:(new Date).toISOString()},showNewCustomerFlow:!1})},resumeOnboarding:a=>{const o=t().onboardingProgress;return!(!o||o.resumeToken!==a)&&(e({showNewCustomerFlow:!0}),!0)},updatePreferences:a=>{const o={...t().preferences||Ca,...a};e({preferences:o})},getRecommendations:()=>{const e=t().currentCustomer,a=t().preferences;if(!e||!a)return[];const o=[];return e.interests.includes("adventure")&&o.push("Mountain Photo Challenge","Outdoor Scavenger Hunt"),e.interests.includes("team-building")&&o.push("Corporate Team Challenge","Leadership Adventure"),e.interests.includes("date-night")&&o.push("Romantic Vail Discovery","Couples Photo Journey"),e.interests.includes("family")&&o.push("Family Fun Hunt","Multi-Generational Adventure"),"corporate"===e.eventType&&o.push("Professional Networking Hunt","Innovation Challenge"),o.slice(0,6)},addLead:a=>{const o=t().leads,s=o.findIndex(e=>e.email===a.email);if(s>=0){const t=[...o];t[s]={...t[s],...a,lastInteraction:(new Date).toISOString()},e({leads:t})}else{const t={...a,leadStatus:a.leadStatus||"prospect",createdAt:a.createdAt||(new Date).toISOString(),lastInteraction:(new Date).toISOString()};e({leads:[...o,t]})}},updateLead:(a,o)=>{const s=t().leads.map(e=>e.email===a?{...e,...o,lastInteraction:(new Date).toISOString()}:e);e({leads:s})},convertLead:e=>{t().updateLead(e,{leadStatus:"converted"})},showFlow:()=>{e({showNewCustomerFlow:!0})},hideFlow:()=>{e({showNewCustomerFlow:!1})},resetStore:()=>{e({currentCustomer:null,onboardingProgress:null,preferences:null,leads:[],showNewCustomerFlow:!1,isOnboardingComplete:!1})},exportCustomerData:()=>t().currentCustomer}),{name:"customer-storage",partialize:e=>({currentCustomer:e.currentCustomer,preferences:e.preferences,leads:e.leads,onboardingProgress:e.onboardingProgress,isOnboardingComplete:e.isOnboardingComplete,showNewCustomerFlow:e.showNewCustomerFlow})}))),La=class e{constructor(){t(this,"blobService"),t(this,"LEADS_COLLECTION","customer-leads"),t(this,"ANALYTICS_KEY","lead-analytics.json"),this.blobService=new ut}static getInstance(){return e.instance||(e.instance=new e),e.instance}async captureLead(e,t="organic"){try{const a=`lead_${Date.now()}_${Je(e.email)}`,o=(new Date).toISOString(),s={id:a,email:e.email,firstName:e.firstName,interests:e.interests||[],eventType:e.eventType,preferredLocation:e.preferredLocation,source:e.source||t,leadStatus:e.leadStatus||"prospect",contactPreferences:e.contactPreferences||{email:!0,sms:!1,frequency:"weekly"},createdAt:e.createdAt||o,lastInteraction:o,notes:[],behaviorData:{pageViews:1,timeOnSite:0,eventsCompleted:0}};return await this.storeLead(s),await this.updateAnalytics(s),s}catch(a){throw new Error(`Failed to capture lead: ${a}`)}}async updateLead(e,t){try{const a=await this.getLead(e);if(!a)throw new Error(`Lead not found: ${e}`);const o={...a,...t,lastInteraction:(new Date).toISOString()};return"converted"!==t.leadStatus||a.conversionDate||(o.conversionDate=(new Date).toISOString()),await this.storeLead(o),await this.updateAnalytics(o),o}catch(a){throw a}}async getLead(e){try{const t=`${e}.json`;return(await this.blobService.getObject(this.LEADS_COLLECTION,t)).data}catch(t){return null}}async getLeadByEmail(e){try{return(await this.getAllLeads()).find(t=>t.email.toLowerCase()===e.toLowerCase())||null}catch(t){return null}}async getAllLeads(e){try{const a=await this.blobService.listBlobs(this.LEADS_COLLECTION),o=[];for(const s of a)if(s.key.endsWith(".json")&&s.key!==this.ANALYTICS_KEY)try{const t=(await this.blobService.getObject(this.LEADS_COLLECTION,s.key)).data;if(e){if(e.status&&t.leadStatus!==e.status)continue;if(e.source&&t.source!==e.source)continue;if(e.interest&&!t.interests.includes(e.interest))continue;if(e.dateRange){const a=new Date(t.createdAt).getTime(),o=new Date(e.dateRange.start).getTime(),s=new Date(e.dateRange.end).getTime();if(a<o||a>s)continue}}o.push(t)}catch(t){}return o.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),o}catch(t){return[]}}async convertLead(e,t){try{const a={leadStatus:"converted",conversionDate:(new Date).toISOString()};if(t){const o=await this.getLead(e);a.notes=[...(null==o?void 0:o.notes)||[],t]}return await this.updateLead(e,a)}catch(a){throw a}}async trackBehavior(e,t){try{const a=await this.getLead(e);if(!a)return;const o={...a.behaviorData,...t};await this.updateLead(e,{behaviorData:o})}catch(a){}}async getAnalytics(e){try{const t=await this.getAllLeads(e?{dateRange:e}:void 0),a=new Date,o=new Date(a.getTime()-2592e6),s=t.filter(e=>new Date(e.createdAt)>=o).length,n=t.filter(e=>"qualified"===e.leadStatus).length,r=t.filter(e=>"converted"===e.leadStatus).length,i=t.length>0?r/t.length*100:0,l={};t.forEach(e=>{const t=e.source||"unknown";l[t]=(l[t]||0)+1});const c={};t.forEach(e=>{e.interests.forEach(e=>{c[e]=(c[e]||0)+1})});const d={};t.forEach(e=>{e.eventType&&(d[e.eventType]=(d[e.eventType]||0)+1)});const u=[];for(let e=29;e>=0;e--){const o=new Date(a.getTime()-24*e*60*60*1e3).toISOString().split("T")[0],s=t.filter(e=>e.createdAt.startsWith(o)).length,n=t.filter(e=>e.conversionDate&&e.conversionDate.startsWith(o)).length;u.push({date:o,leads:s,conversions:n})}return{totalLeads:t.length,newLeads:s,qualifiedLeads:n,convertedLeads:r,conversionRate:Math.round(100*i)/100,sourceBreakdown:l,interestBreakdown:c,eventTypeBreakdown:d,timeSeriesData:u}}catch(t){throw t}}async exportLeads(e="json"){try{const t=await this.getAllLeads();if("json"===e)return JSON.stringify(t,null,2);if("csv"===e){const e=[["ID","Email","FirstName","Interests","EventType","Source","LeadStatus","CreatedAt","LastInteraction","ConversionDate"].join(",")];return t.forEach(t=>{const a=[t.id,t.email,t.firstName,t.interests.join(";"),t.eventType||"",t.source||"",t.leadStatus,t.createdAt,t.lastInteraction,t.conversionDate||""];e.push(a.map(e=>`"${e}"`).join(","))}),e.join("\n")}throw new Error(`Unsupported export format: ${e}`)}catch(t){throw t}}async storeLead(e){const t=`${e.id}.json`;await this.blobService.upsertObject(this.LEADS_COLLECTION,t,e)}async updateAnalytics(e){}};t(La,"instance");const Aa=La.getInstance(),Ta={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_DEBUG_LOGS:"true",VITE_ENABLE_BLOB_EVENTS:"true",VITE_ENABLE_NEW_CUSTOMER_FLOW:"true"};var Ia={};function Da(e){try{if(void 0!==import.meta&&Ta)return Ta[e]}catch{}return Ia[e]}const Oa={repository:{enableBlobEvents:"true"===Da("VITE_ENABLE_BLOB_EVENTS")||"true"===Da("ENABLE_BLOB_EVENTS")||!1,enableKvEvents:"true"===Da("VITE_ENABLE_KV_EVENTS")||!1,useHttpRepo:"true"===Da("VITE_USE_HTTP_REPO")||!1,enableEtagConcurrency:"true"===Da("VITE_ENABLE_ETAG_CONCURRENCY")||!1},media:{enableVideoUpload:"false"!==Da("VITE_ENABLE_VIDEO_UPLOAD"),useSignedUploads:"true"===Da("VITE_USE_SIGNED_UPLOADS")||!1,enableMediaProcessing:"false"!==Da("VITE_ENABLE_MEDIA_PROCESSING")},ui:{enableReactQuery:"true"===Da("VITE_ENABLE_REACT_QUERY")||!1,enableNewWizardForms:"true"===Da("VITE_ENABLE_NEW_WIZARD_FORMS")||!1,enableOfflineMode:"true"===Da("VITE_ENABLE_OFFLINE_MODE")||!1,enableDarkMode:"true"===Da("VITE_ENABLE_DARK_MODE")||!1},geo:{enableBrowserGeo:"false"!==Da("VITE_ENABLE_BROWSER_GEO"),enableIpGeo:"false"!==Da("VITE_ENABLE_IP_GEO"),enableLocationNotifications:"true"===Da("VITE_ENABLE_LOCATION_NOTIFICATIONS")||!1},observability:{enablePerformanceMonitoring:"true"===Da("VITE_ENABLE_PERFORMANCE_MONITORING")||!1,enableErrorTracking:"true"===Da("VITE_ENABLE_ERROR_TRACKING")||!1,enableDebugLogs:"true"===Da("VITE_ENABLE_DEBUG_LOGS")||"true"===Da("DEV"),enableAuditLogs:"true"===Da("VITE_ENABLE_AUDIT_LOGS")||!1},experimental:{enableNewEventFlow:"true"===Da("VITE_ENABLE_NEW_EVENT_FLOW")||!1,enableTeamCollaboration:"true"===Da("VITE_ENABLE_TEAM_COLLABORATION")||!1,enableAiHints:"true"===Da("VITE_ENABLE_AI_HINTS")||!1,enableNewCustomerFlow:"true"===Da("VITE_ENABLE_NEW_CUSTOMER_FLOW")||!1}};function Pa(){const{sessionId:e,teamPhotos:t,saveTeamPhoto:o,getTeamPhotos:s,clearTeamPhotos:n,clearAllTeamData:r,switchTeam:i}=Xe(),{currentPage:l,navigate:c,taskTab:d,setTaskTab:u}=et(),{locationName:h,eventName:p,teamName:m,lockedByQuery:g,setLocationName:f,setEventName:v,setTeamName:x,setLockedByQuery:y,requestOpenEventSettings:b}=ee(),{progress:w,setProgress:N,updateStopProgress:j,resetProgress:k,resetHints:S}=Ue(),{currentCustomer:C,setCurrentCustomer:L,completeOnboarding:T}=Ea(),[I,D]=a.useState(()=>st(h||"BHHS")),[O,P]=a.useState(!1),[M,$]=a.useState(!1),[V,B]=a.useState(!1),[R,F]=a.useState(!1),H=a.useMemo(()=>I.reduce((e,t)=>{var a;return e+((null==(a=w[t.id])?void 0:a.done)?1:0)},0),[w,I]),q=0===I.length?0:Math.round(H/I.length*100),[W,K]=a.useState(!1),[J,Z]=a.useState(null),[Q,X]=a.useState(!1),[ae,oe]=a.useState(null),[se,ne]=a.useState(null),[re,ie]=a.useState({}),[le,ce]=a.useState(new Set),[de,ue]=a.useState(new Set),[he,pe]=a.useState(!1),me=e=>{u(e)},ge=e=>{const t=["current","completed"],a=t.indexOf(d);switch(e.key){case"ArrowLeft":case"ArrowRight":e.preventDefault();const o=t[(a+("ArrowLeft"===e.key?-1:1)+t.length)%t.length];me(o),setTimeout(()=>{var e;null==(e=document.getElementById(`${o}-tab`))||e.focus()},0);break;case"Home":e.preventDefault(),me("current"),setTimeout(()=>{var e;null==(e=document.getElementById("current-tab"))||e.focus()},0);break;case"End":e.preventDefault(),me("completed"),setTimeout(()=>{var e;null==(e=document.getElementById("completed-tab"))||e.focus()},0);break;case"Enter":case" ":e.preventDefault()}},fe=Oa.experimental.enableNewCustomerFlow&&!g;a.useEffect(()=>{const e=()=>{try{const e=function(e){try{const t=(e||"").trim().replace(/^\/+|\/+$/g,"");if(!t)return{};const a=t.split("/").filter(Boolean);if(3!==a.length)return{};const[o,s,n]=a.map(e=>e.trim()).filter(e=>"string"==typeof e);return o&&s&&n?{location:o,event:s,team:n}:{}}catch{return{}}}(window.location.pathname);if(function(e){return!!(e.location&&e.event&&e.team)}(e)){const{location:t,event:a,team:o}=function(e){const t=e=>(e??"").toString().trim().replace(/\s+/g," "),a=t(e.location),o=t(e.event),s=t(e.team);return{location:{bhhs:"BHHS","vail valley":"Vail Valley","vail village":"Vail Village"}[a.toLowerCase()]??a,event:o,team:s}}(e);f(t),v(a),x(o),y(!0),P(!1)}else y(!1)}catch(e){y(!1)}};e();const t=()=>e();window.addEventListener("popstate",t);return(async()=>{try{await async function(e={skipExisting:!0}){return G.seedAppData(e)}({skipExisting:!0});const e=await _.get("app-settings");e&&(e.location&&f(e.location),e.team&&x(e.team),e.event&&v(e.event));const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),a={id:t,location:h,startTime:(new Date).toISOString(),userAgent:navigator.userAgent};await _.createSession(t,a);S()}catch(e){}})(),"/"!==window.location.pathname||g||Oa.experimental.enableNewCustomerFlow||B(!0),()=>{window.removeEventListener("popstate",t)}},[]),a.useEffect(()=>{const e=st(h);D(e)},[h]),a.useEffect(()=>{if(!m||!h||!p)return;ie({}),ce(new Set),ue(new Set),oe(null),ne(null),Z(null);const e=s(h,p,m),{getState:t}=Ue,a=t().progress,o={};e.forEach(e=>{const t=a[e.locationId],s=(null==t?void 0:t.revealedHints)||1;o[e.locationId]={done:!0,notes:"",photo:e.photoUrl,completedAt:e.uploadedAt,revealedHints:s}}),N(o)},[m,h,p,s,N]),a.useEffect(()=>{const e=e=>{M&&!e.target.closest("header")&&$(!1)};if(M)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[M]);const ve=async(t,a)=>{const n=I.find(e=>e.id===t),r=w[t]||{done:!1,notes:"",photo:null,revealedHints:1};ue(e=>new Set([...e,t]));try{const l=m||"Blue",c=s(h,p,l).find(e=>e.locationId===t);if(c)j(t,{...r,photo:c.photoUrl,done:!0,completedAt:(new Date).toISOString()});else{const s=await z.uploadMedia(a,n.title,e,{resourceType:a.type.startsWith("video/")?"video":"image",teamName:l,locationName:h,eventName:p}),c={...s,locationId:t};o(h,p,l,c);try{await U.saveTeamPhoto(h,p,l,c)}catch(i){}j(t,{...r,photo:s.photoUrl,done:!0,completedAt:(new Date).toISOString()})}ue(e=>{const a=new Set(e);return a.delete(t),a}),setTimeout(()=>{ce(e=>new Set([...e,t])),setTimeout(()=>{ce(e=>{const a=new Set(e);return a.delete(t),a})},600)},150)}catch(l){ue(e=>{const a=new Set(e);return a.delete(t),a});try{const e=await((e,t=800,a=.8)=>new Promise(o=>{const s=document.createElement("canvas"),n=s.getContext("2d"),r=new Image;r.onload=()=>{const e=Math.min(t/r.width,t/r.height);s.width=r.width*e,s.height=r.height*e,null==n||n.drawImage(r,0,0,s.width,s.height);const i=s.toDataURL("image/jpeg",a);o(i)},r.src=URL.createObjectURL(e)}))(a);N(a=>({...a,[t]:{...r,photo:e,done:!0,completedAt:(new Date).toISOString()}}))}catch(c){const e=new FileReader;e.onloadend=()=>{const a=e.result;N(e=>({...e,[t]:{...r,photo:a,done:!0,completedAt:(new Date).toISOString()}})),setTimeout(()=>{ce(e=>new Set([...e,t])),setTimeout(()=>{ce(e=>{const a=new Set(e);return a.delete(t),a})},600)},150)},e.readAsDataURL(a)}}},xe=e=>{if("function"==typeof e){const t=e(w);N(t)}else N(e)},ye=e=>{ie(t=>({...t,[e]:!t[e]}))};return E.jsx(Qe,{location:h,team:m,sessionId:e,eventName:p,children:E.jsxs("div",{className:"min-h-screen text-slate-900 bg-gray-50",children:[fe&&E.jsx(Sa,{onContinueHunt:(e,t)=>{e.orgName&&f(e.orgName),e.eventName&&v(e.eventName),x(t.teamName),c("event"),B(!1),sessionStorage.setItem("recent-session",(new Date).toISOString()),sessionStorage.setItem("participant-info",JSON.stringify(t))},onJoinEvent:(e,t)=>{e.orgName&&f(e.orgName),e.eventName&&v(e.eventName),x(t),c("event"),B(!1),b(),sessionStorage.setItem("recent-session",(new Date).toISOString())},onPlanFuture:async e=>{try{L(e),await Aa.captureLead(e,"plan-future-flow"),T(),B(!0)}catch(t){B(!0)}},onCreateNew:()=>{F(!0),B(!0)},onClose:()=>{}}),V&&E.jsx(wa,{onSelectEvent:(e,t)=>{e.orgName&&f(e.orgName),e.eventName&&v(e.eventName),t&&x(t),c("event"),B(!1),F(!1),b(),sessionStorage.setItem("recent-session",(new Date).toISOString())},onSetupNew:()=>{c("event"),B(!1),F(!1),b(),sessionStorage.setItem("recent-session",(new Date).toISOString())},onClose:()=>{B(!1),F(!1)},initialStep:R?"new-org":"events"}),E.jsx(te,{isMenuOpen:M,onToggleMenu:()=>$(!M),completeCount:H,totalStops:I.length,percent:q,onReset:async()=>{try{k();const{PhotoUploadService:e}=await function(e,t){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),o=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));a=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in A)return;A[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,o&&s.setAttribute("nonce",o),document.head.appendChild(s),t?new Promise((t,a)=>{s.addEventListener("load",t),s.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)})}(async()=>{const{PhotoUploadService:e}=await import("../chunks/PhotoUploadService-C1w0eNR1.js");return{PhotoUploadService:e}},__vite__mapDeps([0,1,2,3]));await e.clearTeamPhotos(m,h,p),oe(null),Z(null),ne(null),ie({}),ce(new Set)}catch(e){}},onToggleTips:()=>K(!W),onNavigate:c}),W&&E.jsxs("div",{className:"fixed inset-0 z-30",children:[E.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>K(!1),style:{animation:"fadeIn 0.2s ease-out forwards"}}),E.jsx("div",{className:"absolute inset-x-0 bottom-0 rounded-t-3xl p-5 shadow-2xl pb-safe",style:{backgroundColor:"var(--color-white)",animation:"slideUpModal 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards",marginBottom:"80px",maxHeight:"calc(100vh - 160px)",overflowY:"auto"},children:E.jsxs("div",{className:"mx-auto max-w-screen-sm",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h3",{className:"text-lg font-semibold flex items-center gap-2",style:{color:"var(--color-cabernet)"},children:"📖 Rules"}),E.jsx("button",{className:"p-2 rounded-lg transition-all duration-150 transform hover:scale-110 active:scale-95",style:{backgroundColor:"transparent"},onMouseEnter:e=>e.target.style.backgroundColor="var(--color-light-pink)",onMouseLeave:e=>e.target.style.backgroundColor="transparent",onClick:()=>K(!1),"aria-label":"Close",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{color:"var(--color-medium-grey)"},children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),E.jsxs("div",{className:"mt-3 space-y-3 text-sm",style:{color:"var(--color-dark-neutral)"},children:[E.jsx("p",{className:"font-medium",children:"Navigate to each location and solve the clues to complete your scavenger hunt."}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("p",{className:"font-medium",children:"Competition goals:"}),E.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[E.jsx("li",{children:"Complete all locations to finish the hunt."}),E.jsx("li",{children:"Use hints strategically to solve challenging clues."})]})]}),E.jsx("p",{children:"Pay attention to your surroundings — details you notice along the way might help you solve the clues."}),E.jsx("p",{children:"Work together, explore strategically, and enjoy discovering Vail Village!"})]})]})})]}),E.jsx("div",{id:"status-announcements","aria-live":"polite","aria-atomic":"true",className:"sr-only"}),E.jsxs(E.Fragment,{children:["hunt"===l&&E.jsxs("div",{children:[E.jsxs("main",{id:"main-content",className:"max-w-screen-sm mx-auto px-4 py-2",role:"main","aria-label":"Scavenger hunt main content",style:{paddingBottom:"calc(72px + env(safe-area-inset-bottom))"},children:[E.jsx(Y,{collageUrl:ae,imageUrl:se,initialExpanded:!0}),E.jsx("div",{className:"max-w-screen-sm mx-auto px-4 mt-6",children:E.jsxs("div",{role:"tablist","aria-label":"Switch between current tasks and completed tasks",className:"flex border-b",style:{borderColor:"var(--color-light-grey)"},children:[E.jsx("button",{role:"tab","aria-selected":"current"===d,"aria-controls":"current-tabpanel",id:"current-tab",tabIndex:"current"===d?0:-1,className:"flex-1 px-4 py-4 text-center font-medium border-b-2 transition-all duration-200 "+("current"===d?"border-current font-semibold":"border-transparent hover:border-gray-300"),style:{color:"current"===d?"var(--color-cabernet)":"var(--color-medium-grey)",borderBottomColor:"current"===d?"var(--color-cabernet)":"transparent"},onClick:()=>me("current"),onKeyDown:ge,children:"Current Tasks"}),E.jsxs("button",{role:"tab","aria-selected":"completed"===d,"aria-controls":"completed-tabpanel",id:"completed-tab",tabIndex:"completed"===d?0:-1,className:"flex-1 px-4 py-4 text-center font-medium border-b-2 transition-all duration-200 "+("completed"===d?"border-current font-semibold":"border-transparent hover:border-gray-300"),style:{color:"completed"===d?"var(--color-cabernet)":"var(--color-medium-grey)",borderBottomColor:"completed"===d?"var(--color-cabernet)":"transparent"},onClick:()=>me("completed"),onKeyDown:ge,children:["Completed (",I.filter(e=>{var t;return(null==(t=w[e.id])?void 0:t.done)&&!le.has(e.id)}).length,")"]})]})}),E.jsx("div",{role:"tabpanel",id:"current-tabpanel","aria-labelledby":"current-tab",hidden:"current"!==d,className:"max-w-screen-sm mx-auto px-4 mt-3 space-y-2",children:E.jsx(Ke,{stops:I,progress:w,transitioningStops:le,completedSectionExpanded:he,onToggleCompletedSection:()=>pe(!he),expandedStops:re,onToggleExpanded:ye,uploadingStops:de,onPhotoUpload:ve,setProgress:xe,view:"current"})}),E.jsx("div",{role:"tabpanel",id:"completed-tabpanel","aria-labelledby":"completed-tab",hidden:"completed"!==d,className:"max-w-screen-sm mx-auto px-4 mt-3 space-y-2",children:E.jsx(Ke,{stops:I,progress:w,transitioningStops:le,completedSectionExpanded:he,onToggleCompletedSection:()=>pe(!he),expandedStops:re,onToggleExpanded:ye,uploadingStops:de,onPhotoUpload:ve,setProgress:xe,view:"completed"})})]}),E.jsx(Ye,{activePage:"challenges",progressPercent:q,completeCount:H,totalStops:I.length,onEventClick:()=>{c("event")},onChallengesClick:()=>{c("hunt")},onSocialClick:()=>{c("feed")}})]}),"feed"===l&&E.jsx(lt,{onNavigate:c,percent:q,completeCount:H,totalStops:I.length}),"event"===l&&E.jsx(ct,{onNavigate:c,completeCount:H,totalStops:I.length,percent:q,stops:I,progress:w,onSaveSettings:async()=>{try{const e={location:h,team:m,event:p,updatedAt:(new Date).toISOString()};await _.saveSettings(e)}catch(e){}P(!1)}})]})]})})}class Ma extends a.Component{constructor(e){super(e),t(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorId:""})}),this.state={hasError:!1,error:null,errorId:""}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:`error-${Date.now()}-${Math.random().toString(36).substring(2,9)}`}}componentDidCatch(e,t){}render(){return this.state.hasError&&this.state.error?this.props.fallback?this.props.fallback(this.state.error,this.handleRetry):E.jsx("div",{className:"min-h-[200px] flex items-center justify-center p-6 bg-red-50 border-2 border-red-200 rounded-lg",children:E.jsxs("div",{className:"text-center max-w-md",children:[E.jsx("div",{className:"text-red-600 text-5xl mb-4",children:"⚠️"}),E.jsx("h2",{className:"text-xl font-semibold text-red-900 mb-2",children:"Something went wrong"}),E.jsx("p",{className:"text-red-700 text-sm mb-4",children:"An unexpected error occurred in this part of the application."}),!1,E.jsx("button",{onClick:this.handleRetry,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors","aria-label":"Retry and attempt to recover from the error",children:"Try Again"}),E.jsxs("p",{className:"text-xs text-red-600 mt-3",children:["Error ID: ",this.state.errorId]})]})}):this.props.children}}const $a=e=>"string"==typeof e,Va=()=>{let e,t;const a=new Promise((a,o)=>{e=a,t=o});return a.resolve=e,a.reject=t,a},Ba=e=>null==e?"":""+e,Ra=/###/g,Fa=e=>e&&e.indexOf("###")>-1?e.replace(Ra,"."):e,za=e=>!e||$a(e),Ua=(e,t,a)=>{const o=$a(t)?t.split("."):t;let s=0;for(;s<o.length-1;){if(za(e))return{};const t=Fa(o[s]);!e[t]&&a&&(e[t]=new a),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return za(e)?{}:{obj:e,k:Fa(o[s])}},Ha=(e,t,a)=>{const{obj:o,k:s}=Ua(e,t,Object);if(void 0!==o||1===t.length)return void(o[s]=a);let n=t[t.length-1],r=t.slice(0,t.length-1),i=Ua(e,r,Object);for(;void 0===i.obj&&r.length;)n=`${r[r.length-1]}.${n}`,r=r.slice(0,r.length-1),i=Ua(e,r,Object),(null==i?void 0:i.obj)&&void 0!==i.obj[`${i.k}.${n}`]&&(i.obj=void 0);i.obj[`${i.k}.${n}`]=a},_a=(e,t)=>{const{obj:a,k:o}=Ua(e,t);if(a&&Object.prototype.hasOwnProperty.call(a,o))return a[o]},qa=(e,t,a)=>{for(const o in t)"__proto__"!==o&&"constructor"!==o&&(o in e?$a(e[o])||e[o]instanceof String||$a(t[o])||t[o]instanceof String?a&&(e[o]=t[o]):qa(e[o],t[o],a):e[o]=t[o]);return e},Wa=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ga={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Ka=e=>$a(e)?e.replace(/[&<>"'\/]/g,e=>Ga[e]):e;const Ya=[" ",",","?","!",";"],Ja=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const a=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,a),this.regExpQueue.push(e),a}}(20),Za=(e,t,a=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const o=t.split(a);let s=e;for(let n=0;n<o.length;){if(!s||"object"!=typeof s)return;let e,t="";for(let r=n;r<o.length;++r)if(r!==n&&(t+=a),t+=o[r],e=s[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&r<o.length-1)continue;n+=r-n+1;break}s=e}return s},Qa=e=>null==e?void 0:e.replace("_","-"),Xa={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var a,o;null==(o=null==(a=null==console?void 0:console[e])?void 0:a.apply)||o.call(a,console,t)}};class eo{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||Xa,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,a,o){return o&&!this.debug?null:($a(e[0])&&(e[0]=`${a}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new eo(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new eo(this.logger,e)}}var to=new eo;class ao{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const a=this.observers[e].get(t)||0;this.observers[e].set(t,a+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e,...t){if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(([e,a])=>{for(let o=0;o<a;o++)e(...t)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(([a,o])=>{for(let s=0;s<o;s++)a.apply(a,[e,...t])})}}}class oo extends ao{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,a,o={}){var s,n;const r=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator,i=void 0!==o.ignoreJSONStructure?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],a&&(Array.isArray(a)?l.push(...a):$a(a)&&r?l.push(...a.split(r)):l.push(a)));const c=_a(this.data,l);return!c&&!t&&!a&&e.indexOf(".")>-1&&(e=l[0],t=l[1],a=l.slice(2).join(".")),!c&&i&&$a(a)?Za(null==(n=null==(s=this.data)?void 0:s[e])?void 0:n[t],a,r):c}addResource(e,t,a,o,s={silent:!1}){const n=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator;let r=[e,t];a&&(r=r.concat(n?a.split(n):a)),e.indexOf(".")>-1&&(r=e.split("."),o=t,t=r[1]),this.addNamespaces(t),Ha(this.data,r,o),s.silent||this.emit("added",e,t,a,o)}addResources(e,t,a,o={silent:!1}){for(const s in a)($a(a[s])||Array.isArray(a[s]))&&this.addResource(e,t,s,a[s],{silent:!0});o.silent||this.emit("added",e,t,a)}addResourceBundle(e,t,a,o,s,n={silent:!1,skipCopy:!1}){let r=[e,t];e.indexOf(".")>-1&&(r=e.split("."),o=a,a=t,t=r[1]),this.addNamespaces(t);let i=_a(this.data,r)||{};n.skipCopy||(a=JSON.parse(JSON.stringify(a))),o?qa(i,a,s):i={...i,...a},Ha(this.data,r,i),n.silent||this.emit("added",e,t,a)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var so={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,a,o,s){return e.forEach(e=>{var n;t=(null==(n=this.processors[e])?void 0:n.process(t,a,o,s))??t}),t}};const no=Symbol("i18next/PATH_KEY");function ro(e,t){const{[no]:a}=e(function(){const e=[],t=Object.create(null);let a;return t.get=(o,s)=>{var n;return null==(n=null==a?void 0:a.revoke)||n.call(a),s===no?e:(e.push(s),a=Proxy.revocable(o,t),a.proxy)},Proxy.revocable(Object.create(null),t).proxy}());return a.join((null==t?void 0:t.keySeparator)??".")}const io={},lo=e=>!$a(e)&&"boolean"!=typeof e&&"number"!=typeof e;class co extends ao{constructor(e,t={}){var a,o;super(),a=e,o=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(e=>{a[e]&&(o[e]=a[e])}),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=to.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const a={...t};if(null==e)return!1;const o=this.resolve(e,a);return void 0!==(null==o?void 0:o.res)}extractFromKey(e,t){let a=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===a&&(a=":");const o=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const n=a&&e.indexOf(a)>-1,r=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,a)=>{t=t||"",a=a||"";const o=Ya.filter(e=>t.indexOf(e)<0&&a.indexOf(e)<0);if(0===o.length)return!0;const s=Ja.getRegExp(`(${o.map(e=>"?"===e?"\\?":e).join("|")})`);let n=!s.test(e);if(!n){const t=e.indexOf(a);t>0&&!s.test(e.substring(0,t))&&(n=!0)}return n})(e,a,o));if(n&&!r){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:$a(s)?[s]:s};const n=e.split(a);(a!==o||a===o&&this.options.ns.indexOf(n[0])>-1)&&(s=n.shift()),e=n.join(o)}return{key:e,namespaces:$a(s)?[s]:s}}translate(e,t,a){let o="object"==typeof t?{...t}:t;if("object"!=typeof o&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof o&&(o={...o}),o||(o={}),null==e)return"";"function"==typeof e&&(e=ro(e,{...this.options,...o})),Array.isArray(e)||(e=[String(e)]);const s=void 0!==o.returnDetails?o.returnDetails:this.options.returnDetails,n=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator,{key:r,namespaces:i}=this.extractFromKey(e[e.length-1],o),l=i[i.length-1];let c=void 0!==o.nsSeparator?o.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const d=o.lng||this.language,u=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null==d?void 0:d.toLowerCase()))return u?s?{res:`${l}${c}${r}`,usedKey:r,exactUsedKey:r,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(o)}:`${l}${c}${r}`:s?{res:r,usedKey:r,exactUsedKey:r,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(o)}:r;const h=this.resolve(e,o);let p=null==h?void 0:h.res;const m=(null==h?void 0:h.usedKey)||r,g=(null==h?void 0:h.exactUsedKey)||r,f=void 0!==o.joinArrays?o.joinArrays:this.options.joinArrays,v=!this.i18nFormat||this.i18nFormat.handleAsObject,x=void 0!==o.count&&!$a(o.count),y=co.hasDefaultValue(o),b=x?this.pluralResolver.getSuffix(d,o.count,o):"",w=o.ordinal&&x?this.pluralResolver.getSuffix(d,o.count,{ordinal:!1}):"",N=x&&!o.ordinal&&0===o.count,j=N&&o[`defaultValue${this.options.pluralSeparator}zero`]||o[`defaultValue${b}`]||o[`defaultValue${w}`]||o.defaultValue;let k=p;v&&!p&&y&&(k=j);const S=lo(k),C=Object.prototype.toString.apply(k);if(!(v&&k&&S&&["[object Number]","[object Function]","[object RegExp]"].indexOf(C)<0)||$a(f)&&Array.isArray(k))if(v&&$a(f)&&Array.isArray(p))p=p.join(f),p&&(p=this.extendTranslation(p,e,o,a));else{let t=!1,s=!1;!this.isValidLookup(p)&&y&&(t=!0,p=j),this.isValidLookup(p)||(s=!0,p=r);const i=(o.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:p,u=y&&j!==p&&this.options.updateMissing;if(s||t||u){if(this.logger.log(u?"updateKey":"missingKey",d,l,r,u?j:p),n){const e=this.resolve(r,{...o,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let o=0;o<t.length;o++)e.push(t[o]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(o.lng||this.language):e.push(o.lng||this.language);const a=(e,t,a)=>{var s;const n=y&&a!==p?a:i;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,n,u,o):(null==(s=this.backendConnector)?void 0:s.saveMissing)&&this.backendConnector.saveMissing(e,l,t,n,u,o),this.emit("missingKey",e,l,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&x?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,o);N&&o[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{a([e],r+t,o[`defaultValue${t}`]||j)})}):a(e,r,j))}p=this.extendTranslation(p,e,o,h,a),s&&p===r&&this.options.appendNamespaceToMissingKey&&(p=`${l}${c}${r}`),(s||t)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${c}${r}`:r,t?p:void 0,o))}else{if(!o.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,k,{...o,ns:i}):`key '${r} (${this.language})' returned an object instead of string.`;return s?(h.res=e,h.usedParams=this.getUsedParamsDetails(o),h):e}if(n){const e=Array.isArray(k),t=e?[]:{},a=e?g:m;for(const s in k)if(Object.prototype.hasOwnProperty.call(k,s)){const e=`${a}${n}${s}`;t[s]=y&&!p?this.translate(e,{...o,defaultValue:lo(j)?j[s]:void 0,joinArrays:!1,ns:i}):this.translate(e,{...o,joinArrays:!1,ns:i}),t[s]===e&&(t[s]=k[s])}p=t}}return s?(h.res=p,h.usedParams=this.getUsedParamsDetails(o),h):p}extendTranslation(e,t,a,o,s){var n,r;if(null==(n=this.i18nFormat)?void 0:n.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...a},a.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init({...a,interpolation:{...this.options.interpolation,...a.interpolation}});const n=$a(e)&&(void 0!==(null==(r=null==a?void 0:a.interpolation)?void 0:r.skipOnVariables)?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let i;if(n){const t=e.match(this.interpolator.nestingRegexp);i=t&&t.length}let l=a.replace&&!$a(a.replace)?a.replace:a;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,a.lng||this.language||o.usedLng,a),n){const t=e.match(this.interpolator.nestingRegexp);i<(t&&t.length)&&(a.nest=!1)}!a.lng&&o&&o.res&&(a.lng=this.language||o.usedLng),!1!==a.nest&&(e=this.interpolator.nest(e,(...e)=>(null==s?void 0:s[0])!==e[0]||a.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),a)),a.interpolation&&this.interpolator.reset()}const i=a.postProcess||this.options.postProcess,l=$a(i)?[i]:i;return null!=e&&(null==l?void 0:l.length)&&!1!==a.applyPostProcessor&&(e=so.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(a)},...a}:a,this)),e}resolve(e,t={}){let a,o,s,n,r;return $a(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(a))return;const i=this.extractFromKey(e,t),l=i.key;o=l;let c=i.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=void 0!==t.count&&!$a(t.count),u=d&&!t.ordinal&&0===t.count,h=void 0!==t.context&&($a(t.context)||"number"==typeof t.context)&&""!==t.context,p=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);c.forEach(e=>{var i,c;this.isValidLookup(a)||(r=e,io[`${p[0]}-${e}`]||!(null==(i=this.utils)?void 0:i.hasLoadedNamespace)||(null==(c=this.utils)?void 0:c.hasLoadedNamespace(r))||(io[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${o}" for languages "${p.join(", ")}" won't get resolved as namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(o=>{var r;if(this.isValidLookup(a))return;n=o;const i=[l];if(null==(r=this.i18nFormat)?void 0:r.addLookupKeys)this.i18nFormat.addLookupKeys(i,l,o,e,t);else{let e;d&&(e=this.pluralResolver.getSuffix(o,t.count,t));const a=`${this.options.pluralSeparator}zero`,s=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(t.ordinal&&0===e.indexOf(s)&&i.push(l+e.replace(s,this.options.pluralSeparator)),i.push(l+e),u&&i.push(l+a)),h){const o=`${l}${this.options.contextSeparator||"_"}${t.context}`;i.push(o),d&&(t.ordinal&&0===e.indexOf(s)&&i.push(o+e.replace(s,this.options.pluralSeparator)),i.push(o+e),u&&i.push(o+a))}}let c;for(;c=i.pop();)this.isValidLookup(a)||(s=c,a=this.getResource(o,e,c,t))}))})}),{res:a,usedKey:o,exactUsedKey:s,usedLng:n,usedNS:r}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,a,o={}){var s;return(null==(s=this.i18nFormat)?void 0:s.getResource)?this.i18nFormat.getResource(e,t,a,o):this.resourceStore.getResource(e,t,a,o)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],a=e.replace&&!$a(e.replace);let o=a?e.replace:e;if(a&&void 0!==e.count&&(o.count=e.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!a){o={...o};for(const e of t)delete o[e]}return o}static hasDefaultValue(e){const t="defaultValue";for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t===a.substring(0,12)&&void 0!==e[a])return!0;return!1}}class uo{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=to.create("languageUtils")}getScriptPartFromCode(e){if(!(e=Qa(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=Qa(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if($a(e)&&e.indexOf("-")>-1){let a;try{a=Intl.getCanonicalLocales(e)[0]}catch(t){}return a&&this.options.lowerCaseLng&&(a=a.toLowerCase()),a||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const a=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(a)||(t=a)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const a=this.getScriptPartFromCode(e);if(this.isSupportedCode(a))return t=a;const o=this.getLanguagePartFromCode(e);if(this.isSupportedCode(o))return t=o;t=this.options.supportedLngs.find(e=>e===o?e:e.indexOf("-")<0&&o.indexOf("-")<0?void 0:e.indexOf("-")>0&&o.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===o||0===e.indexOf(o)&&o.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),$a(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let a=e[t];return a||(a=e[this.getScriptPartFromCode(t)]),a||(a=e[this.formatLanguageCode(t)]),a||(a=e[this.getLanguagePartFromCode(t)]),a||(a=e.default),a||[]}toResolveHierarchy(e,t){const a=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),o=[],s=e=>{e&&(this.isSupportedCode(e)?o.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return $a(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):$a(e)&&s(this.formatLanguageCode(e)),a.forEach(e=>{o.indexOf(e)<0&&s(this.formatLanguageCode(e))}),o}}const ho={zero:0,one:1,two:2,few:3,many:4,other:5},po={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class mo{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=to.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const a=Qa("dev"===e?"en":e),o=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:a,type:o});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let n;try{n=new Intl.PluralRules(a,{type:o})}catch(r){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),po;if(!e.match(/-|_/))return po;const a=this.languageUtils.getLanguagePartFromCode(e);n=this.getRule(a,t)}return this.pluralRulesCache[s]=n,n}needsPlural(e,t={}){let a=this.getRule(e,t);return a||(a=this.getRule("dev",t)),(null==a?void 0:a.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,a={}){return this.getSuffixes(e,a).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let a=this.getRule(e,t);return a||(a=this.getRule("dev",t)),a?a.resolvedOptions().pluralCategories.sort((e,t)=>ho[e]-ho[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,a={}){const o=this.getRule(e,a);return o?`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${o.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,a))}}const go=(e,t,a,o=".",s=!0)=>{let n=((e,t,a)=>{const o=_a(e,a);return void 0!==o?o:_a(t,a)})(e,t,a);return!n&&s&&$a(a)&&(n=Za(e,a,o),void 0===n&&(n=Za(t,a,o))),n},fo=e=>e.replace(/\$/g,"$$$$");class vo{constructor(e={}){var t;this.logger=to.create("interpolator"),this.options=e,this.format=(null==(t=null==e?void 0:e.interpolation)?void 0:t.format)||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:a,useRawValueToEscape:o,prefix:s,prefixEscaped:n,suffix:r,suffixEscaped:i,formatSeparator:l,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:u,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:g,maxReplaces:f,alwaysFormat:v}=e.interpolation;this.escape=void 0!==t?t:Ka,this.escapeValue=void 0===a||a,this.useRawValueToEscape=void 0!==o&&o,this.prefix=s?Wa(s):n||"{{",this.suffix=r?Wa(r):i||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=u?Wa(u):h||Wa("$t("),this.nestingSuffix=p?Wa(p):m||Wa(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=f||1e3,this.alwaysFormat=void 0!==v&&v,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null==e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,a,o){var s;let n,r,i;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const s=go(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(s,void 0,a,{...o,...t,interpolationkey:e}):s}const s=e.split(this.formatSeparator),n=s.shift().trim(),r=s.join(this.formatSeparator).trim();return this.format(go(t,l,n,this.options.keySeparator,this.options.ignoreJSONStructure),r,a,{...o,...t,interpolationkey:n})};this.resetRegExp();const d=(null==o?void 0:o.missingInterpolationHandler)||this.options.missingInterpolationHandler,u=void 0!==(null==(s=null==o?void 0:o.interpolation)?void 0:s.skipOnVariables)?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>fo(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?fo(this.escape(e)):fo(e)}].forEach(t=>{for(i=0;n=t.regex.exec(e);){const a=n[1].trim();if(r=c(a),void 0===r)if("function"==typeof d){const t=d(e,n,o);r=$a(t)?t:""}else if(o&&Object.prototype.hasOwnProperty.call(o,a))r="";else{if(u){r=n[0];continue}this.logger.warn(`missed to pass in variable ${a} for interpolating ${e}`),r=""}else $a(r)||this.useRawValueToEscape||(r=Ba(r));const s=t.safeValue(r);if(e=e.replace(n[0],s),u?(t.regex.lastIndex+=r.length,t.regex.lastIndex-=n[0].length):t.regex.lastIndex=0,i++,i>=this.maxReplaces)break}}),e}nest(e,t,a={}){let o,s,n;const r=(e,t)=>{const a=this.nestingOptionsSeparator;if(e.indexOf(a)<0)return e;const o=e.split(new RegExp(`${a}[ ]*{`));let s=`{${o[1]}`;e=o[0],s=this.interpolate(s,n);const r=s.match(/'/g),i=s.match(/"/g);(((null==r?void 0:r.length)??0)%2==0&&!i||i.length%2!=0)&&(s=s.replace(/'/g,'"'));try{n=JSON.parse(s),t&&(n={...t,...n})}catch(l){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,l),`${e}${a}${s}`}return n.defaultValue&&n.defaultValue.indexOf(this.prefix)>-1&&delete n.defaultValue,e};for(;o=this.nestingRegexp.exec(e);){let i=[];n={...a},n=n.replace&&!$a(n.replace)?n.replace:n,n.applyPostProcessor=!1,delete n.defaultValue;const l=/{.*}/.test(o[1])?o[1].lastIndexOf("}")+1:o[1].indexOf(this.formatSeparator);if(-1!==l&&(i=o[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),o[1]=o[1].slice(0,l)),s=t(r.call(this,o[1].trim(),n),n),s&&o[0]===e&&!$a(s))return s;$a(s)||(s=Ba(s)),s||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${e}`),s=""),i.length&&(s=i.reduce((e,t)=>this.format(e,t,a.lng,{...a,interpolationkey:o[1].trim()}),s.trim())),e=e.replace(o[0],s),this.regexp.lastIndex=0}return e}}const xo=e=>{const t={};return(a,o,s)=>{let n=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(n={...n,[s.interpolationkey]:void 0});const r=o+JSON.stringify(n);let i=t[r];return i||(i=e(Qa(o),s),t[r]=i),i(a)}},yo=e=>(t,a,o)=>e(Qa(a),o)(t);class bo{constructor(e={}){this.logger=to.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const a=t.cacheInBuiltFormats?xo:yo;this.formats={number:a((e,t)=>{const a=new Intl.NumberFormat(e,{...t});return e=>a.format(e)}),currency:a((e,t)=>{const a=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>a.format(e)}),datetime:a((e,t)=>{const a=new Intl.DateTimeFormat(e,{...t});return e=>a.format(e)}),relativetime:a((e,t)=>{const a=new Intl.RelativeTimeFormat(e,{...t});return e=>a.format(e,t.range||"day")}),list:a((e,t)=>{const a=new Intl.ListFormat(e,{...t});return e=>a.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=xo(t)}format(e,t,a,o={}){const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(e=>e.indexOf(")")>-1)){const e=s.findIndex(e=>e.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,e)].join(this.formatSeparator)}return s.reduce((e,t)=>{var s;const{formatName:n,formatOptions:r}=(e=>{let t=e.toLowerCase().trim();const a={};if(e.indexOf("(")>-1){const o=e.split("(");t=o[0].toLowerCase().trim();const s=o[1].substring(0,o[1].length-1);"currency"===t&&s.indexOf(":")<0?a.currency||(a.currency=s.trim()):"relativetime"===t&&s.indexOf(":")<0?a.range||(a.range=s.trim()):s.split(";").forEach(e=>{if(e){const[t,...o]=e.split(":"),s=o.join(":").trim().replace(/^'+|'+$/g,""),n=t.trim();a[n]||(a[n]=s),"false"===s&&(a[n]=!1),"true"===s&&(a[n]=!0),isNaN(s)||(a[n]=parseInt(s,10))}})}return{formatName:t,formatOptions:a}})(t);if(this.formats[n]){let t=e;try{const i=(null==(s=null==o?void 0:o.formatParams)?void 0:s[o.interpolationkey])||{},l=i.locale||i.lng||o.locale||o.lng||a;t=this.formats[n](e,l,{...r,...o,...i})}catch(i){this.logger.warn(i)}return t}return this.logger.warn(`there was no format function for ${n}`),e},e)}}class wo extends ao{constructor(e,t,a,o={}){var s,n;super(),this.backend=e,this.store=t,this.services=a,this.languageUtils=a.languageUtils,this.options=o,this.logger=to.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],null==(n=null==(s=this.backend)?void 0:s.init)||n.call(s,a,o.backend,o)}queueLoad(e,t,a,o){const s={},n={},r={},i={};return e.forEach(e=>{let o=!0;t.forEach(t=>{const r=`${e}|${t}`;!a.reload&&this.store.hasResourceBundle(e,t)?this.state[r]=2:this.state[r]<0||(1===this.state[r]?void 0===n[r]&&(n[r]=!0):(this.state[r]=1,o=!1,void 0===n[r]&&(n[r]=!0),void 0===s[r]&&(s[r]=!0),void 0===i[t]&&(i[t]=!0)))}),o||(r[e]=!0)}),(Object.keys(s).length||Object.keys(n).length)&&this.queue.push({pending:n,pendingCount:Object.keys(n).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(s),pending:Object.keys(n),toLoadLanguages:Object.keys(r),toLoadNamespaces:Object.keys(i)}}loaded(e,t,a){const o=e.split("|"),s=o[0],n=o[1];t&&this.emit("failedLoading",s,n,t),!t&&a&&this.store.addResourceBundle(s,n,a,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&a&&(this.state[e]=0);const r={};this.queue.forEach(a=>{((e,t,a)=>{const{obj:o,k:s}=Ua(e,t,Object);o[s]=o[s]||[],o[s].push(a)})(a.loaded,[s],n),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(a,e),t&&a.errors.push(t),0!==a.pendingCount||a.done||(Object.keys(a.loaded).forEach(e=>{r[e]||(r[e]={});const t=a.loaded[e];t.length&&t.forEach(t=>{void 0===r[e][t]&&(r[e][t]=!0)})}),a.done=!0,a.errors.length?a.callback(a.errors):a.callback())}),this.emit("loaded",r),this.queue=this.queue.filter(e=>!e.done)}read(e,t,a,o=0,s=this.retryTimeout,n){if(!e.length)return n(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:a,tried:o,wait:s,callback:n});this.readingCalls++;const r=(r,i)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}r&&i&&o<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,a,o+1,2*s,n)},s):n(r,i)},i=this.backend[a].bind(this.backend);if(2!==i.length)return i(e,t,r);try{const a=i(e,t);a&&"function"==typeof a.then?a.then(e=>r(null,e)).catch(r):r(null,a)}catch(l){r(l)}}prepareLoading(e,t,a={},o){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();$a(e)&&(e=this.languageUtils.toResolveHierarchy(e)),$a(t)&&(t=[t]);const s=this.queueLoad(e,t,a,o);if(!s.toLoad.length)return s.pending.length||o(),null;s.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,a){this.prepareLoading(e,t,{},a)}reload(e,t,a){this.prepareLoading(e,t,{reload:!0},a)}loadOne(e,t=""){const a=e.split("|"),o=a[0],s=a[1];this.read(o,s,"read",void 0,void 0,(a,n)=>{a&&this.logger.warn(`${t}loading namespace ${s} for language ${o} failed`,a),!a&&n&&this.logger.log(`${t}loaded namespace ${s} for language ${o}`,n),this.loaded(e,a,n)})}saveMissing(e,t,a,o,s,n={},r=()=>{}){var i,l,c,d,u;if(!(null==(l=null==(i=this.services)?void 0:i.utils)?void 0:l.hasLoadedNamespace)||(null==(d=null==(c=this.services)?void 0:c.utils)?void 0:d.hasLoadedNamespace(t))){if(null!=a&&""!==a){if(null==(u=this.backend)?void 0:u.create){const i={...n,isUpdate:s},l=this.backend.create.bind(this.backend);if(l.length<6)try{let s;s=5===l.length?l(e,t,a,o,i):l(e,t,a,o),s&&"function"==typeof s.then?s.then(e=>r(null,e)).catch(r):r(null,s)}catch(h){r(h)}else l(e,t,a,o,r,i)}e&&e[0]&&this.store.addResource(e[0],t,a,o)}}else this.logger.warn(`did not save key "${a}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const No=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),$a(e[1])&&(t.defaultValue=e[1]),$a(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const a=e[3]||e[2];Object.keys(a).forEach(e=>{t[e]=a[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),jo=e=>{var t,a;return $a(e.ns)&&(e.ns=[e.ns]),$a(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),$a(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null==(a=null==(t=e.supportedLngs)?void 0:t.indexOf)?void 0:a.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},ko=()=>{};class So extends ao{constructor(e={},t){var a;if(super(),this.options=jo(e),this.services={},this.logger=to,this.modules={external:[]},a=this,Object.getOwnPropertyNames(Object.getPrototypeOf(a)).forEach(e=>{"function"==typeof a[e]&&(a[e]=a[e].bind(a))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&($a(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const a=No();this.options={...a,...this.options,...jo(e)},this.options.interpolation={...a.interpolation,...this.options.interpolation},void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const o=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?to.init(o(this.modules.logger),this.options):to.init(null,this.options),e=this.modules.formatter?this.modules.formatter:bo;const t=new uo(this.options);this.store=new oo(this.options.resources,this.options);const s=this.services;s.logger=to,s.resourceStore=this.store,s.languageUtils=t,s.pluralResolver=new mo(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix});this.options.interpolation.format&&this.options.interpolation.format!==a.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!e||this.options.interpolation.format&&this.options.interpolation.format!==a.interpolation.format||(s.formatter=o(e),s.formatter.init&&s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new vo(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new wo(o(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(s.languageDetector=o(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=o(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new co(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=ko),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const s=Va(),n=()=>{const e=(e,a)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(a),t(e,a)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?n():setTimeout(n,0),s}loadResources(e,t=ko){var a,o;let s=t;const n=$a(e)?e:this.language;if("function"==typeof e&&(s=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===(null==n?void 0:n.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return s();const e=[],t=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(n)t(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e))}null==(o=null==(a=this.options.preload)?void 0:a.forEach)||o.call(a,e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),s(e)})}else s(null)}reloadResources(e,t,a){const o=Va();return"function"==typeof e&&(a=e,e=void 0),"function"==typeof t&&(a=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),a||(a=ko),this.services.backendConnector.reload(e,t,e=>{o.resolve(),a(e)}),o}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&so.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const a=Va();this.emit("languageChanging",e);const o=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},s=(s,n)=>{n?this.isLanguageChangingTo===e&&(o(n),this.translator.changeLanguage(n),this.isLanguageChangingTo=void 0,this.emit("languageChanged",n),this.logger.log("languageChanged",n)):this.isLanguageChangingTo=void 0,a.resolve((...e)=>this.t(...e)),t&&t(s,(...e)=>this.t(...e))},n=t=>{var a,n;e||t||!this.services.languageDetector||(t=[]);const r=$a(t)?t:t&&t[0],i=this.store.hasLanguageSomeTranslations(r)?r:this.services.languageUtils.getBestMatchFromCodes($a(t)?[t]:t);i&&(this.language||o(i),this.translator.language||this.translator.changeLanguage(i),null==(n=null==(a=this.services.languageDetector)?void 0:a.cacheUserLanguage)||n.call(a,i)),this.loadResources(i,e=>{s(e,i)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(n):this.services.languageDetector.detect(n):n(e):n(this.services.languageDetector.detect()),a}getFixedT(e,t,a){const o=(e,t,...s)=>{let n;n="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(s)):{...t},n.lng=n.lng||o.lng,n.lngs=n.lngs||o.lngs,n.ns=n.ns||o.ns,""!==n.keyPrefix&&(n.keyPrefix=n.keyPrefix||a||o.keyPrefix);const r=this.options.keySeparator||".";let i;return n.keyPrefix&&Array.isArray(e)?i=e.map(e=>("function"==typeof e&&(e=ro(e,{...this.options,...t})),`${n.keyPrefix}${r}${e}`)):("function"==typeof e&&(e=ro(e,{...this.options,...t})),i=n.keyPrefix?`${n.keyPrefix}${r}${e}`:e),this.t(i,n)};return $a(e)?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=a,o}t(...e){var t;return null==(t=this.translator)?void 0:t.translate(...e)}exists(...e){var t;return null==(t=this.translator)?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const a=t.lng||this.resolvedLanguage||this.languages[0],o=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===a.toLowerCase())return!0;const n=(e,t)=>{const a=this.services.backendConnector.state[`${e}|${t}`];return-1===a||0===a||2===a};if(t.precheck){const e=t.precheck(this,n);if(void 0!==e)return e}return!!this.hasResourceBundle(a,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!n(a,e)||o&&!n(s,e)))}loadNamespaces(e,t){const a=Va();return this.options.ns?($a(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{a.resolve(),t&&t(e)}),a):(t&&t(),Promise.resolve())}loadLanguages(e,t){const a=Va();$a(e)&&(e=[e]);const o=this.options.preload||[],s=e.filter(e=>o.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return s.length?(this.options.preload=o.concat(s),this.loadResources(e=>{a.resolve(),t&&t(e)}),a):(t&&t(),Promise.resolve())}dir(e){var t,a;if(e||(e=this.resolvedLanguage||((null==(t=this.languages)?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(s){}const o=(null==(a=this.services)?void 0:a.languageUtils)||new uo(No());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(o.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new So(e,t)}cloneInstance(e={},t=ko){const a=e.forkResourceStore;a&&delete e.forkResourceStore;const o={...this.options,...e,isClone:!0},s=new So(o);void 0===e.debug&&void 0===e.prefix||(s.logger=s.logger.clone(e));if(["store","services","language"].forEach(e=>{s[e]=this[e]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},a){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((a,o)=>(a[o]={...e[t][o]},a),e[t]),e),{});s.store=new oo(e,o),s.services.resourceStore=s.store}return s.translator=new co(s.services,o),s.translator.on("*",(e,...t)=>{s.emit(e,...t)}),s.init(o,t),s.translator.options=o,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Co=So.createInstance();Co.createInstance=So.createInstance,Co.createInstance,Co.dir,Co.init,Co.loadResources,Co.reloadResources,Co.use,Co.changeLanguage,Co.getFixedT,Co.t,Co.exists,Co.setDefaultNamespace,Co.hasLoadedNamespace,Co.loadNamespaces,Co.loadLanguages;const{slice:Eo,forEach:Lo}=[];const Ao=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,To={create(e,t,a,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};a&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+60*a*1e3)),o&&(s.domain=o),document.cookie=function(e,t){const a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"};let o=`${e}=${encodeURIComponent(t)}`;if(a.maxAge>0){const e=a.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(e)}`}if(a.domain){if(!Ao.test(a.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${a.domain}`}if(a.path){if(!Ao.test(a.path))throw new TypeError("option path is invalid");o+=`; Path=${a.path}`}if(a.expires){if("function"!=typeof a.expires.toUTCString)throw new TypeError("option expires is invalid");o+=`; Expires=${a.expires.toUTCString()}`}if(a.httpOnly&&(o+="; HttpOnly"),a.secure&&(o+="; Secure"),a.sameSite)switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a.partitioned&&(o+="; Partitioned"),o}(e,t,s)},read(e){const t=`${e}=`,a=document.cookie.split(";");for(let o=0;o<a.length;o++){let e=a[o];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var Io={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!=typeof document)return To.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:a,cookieMinutes:o,cookieDomain:s,cookieOptions:n}=t;a&&"undefined"!=typeof document&&To.create(a,e,o,s,n)}},Do={name:"querystring",lookup(e){var t;let a,{lookupQuerystring:o}=e;if("undefined"!=typeof window){let{search:e}=window.location;!window.location.search&&(null==(t=window.location.hash)?void 0:t.indexOf("?"))>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const s=e.substring(1).split("&");for(let t=0;t<s.length;t++){const e=s[t].indexOf("=");if(e>0){s[t].substring(0,e)===o&&(a=s[t].substring(e+1))}}}return a}},Oo={name:"hash",lookup(e){var t;let a,{lookupHash:o,lookupFromHashIndex:s}=e;if("undefined"!=typeof window){const{hash:e}=window.location;if(e&&e.length>2){const n=e.substring(1);if(o){const e=n.split("&");for(let t=0;t<e.length;t++){const s=e[t].indexOf("=");if(s>0){e[t].substring(0,s)===o&&(a=e[t].substring(s+1))}}}if(a)return a;if(!a&&s>-1){const a=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(a))return;return null==(t=a["number"==typeof s?s:0])?void 0:t.replace("/","")}}}return a}};let Po=null;const Mo=()=>{if(null!==Po)return Po;try{if(Po="undefined"!=typeof window&&null!==window.localStorage,!Po)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){Po=!1}return Po};var $o={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Mo())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:a}=t;a&&Mo()&&window.localStorage.setItem(a,e)}};let Vo=null;const Bo=()=>{if(null!==Vo)return Vo;try{if(Vo="undefined"!=typeof window&&null!==window.sessionStorage,!Vo)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){Vo=!1}return Vo};var Ro={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&Bo())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:a}=t;a&&Bo()&&window.sessionStorage.setItem(a,e)}},Fo={name:"navigator",lookup(e){const t=[];if("undefined"!=typeof navigator){const{languages:e,userLanguage:a,language:o}=navigator;if(e)for(let s=0;s<e.length;s++)t.push(e[s]);a&&t.push(a),o&&t.push(o)}return t.length>0?t:void 0}},zo={name:"htmlTag",lookup(e){let t,{htmlTag:a}=e;const o=a||("undefined"!=typeof document?document.documentElement:null);return o&&"function"==typeof o.getAttribute&&(t=o.getAttribute("lang")),t}},Uo={name:"path",lookup(e){var t;let{lookupFromPathIndex:a}=e;if("undefined"==typeof window)return;const o=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(o))return;return null==(t=o["number"==typeof a?a:0])?void 0:t.replace("/","")}},Ho={name:"subdomain",lookup(e){var t,a;let{lookupFromSubdomainIndex:o}=e;const s="number"==typeof o?o+1:1,n="undefined"!=typeof window&&(null==(a=null==(t=window.location)?void 0:t.hostname)?void 0:a.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(n)return n[s]}};let _o=!1;try{document.cookie,_o=!0}catch(Ko){}const qo=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];_o||qo.splice(1,1);class Wo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return Lo.call(Eo.call(arguments,1),t=>{if(t)for(const a in t)void 0===e[a]&&(e[a]=t[a])}),e}(t,this.options||{},{order:qo,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"==typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=a,this.addDetector(Io),this.addDetector(Do),this.addDetector($o),this.addDetector(Ro),this.addDetector(Fo),this.addDetector(zo),this.addDetector(Uo),this.addDetector(Ho),this.addDetector(Oo)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach(e=>{if(this.detectors[e]){let a=this.detectors[e].lookup(this.options);a&&"string"==typeof a&&(a=[a]),a&&(t=t.concat(a))}}),t=t.filter(e=>{return null!=e&&!("string"==typeof(t=e)&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(e=>e.test(t)));var t}).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)}))}}Wo.type="languageDetector";const Go={en:{translation:{app:{title:"Vail Scavenger Hunt",description:"An interactive couples' date experience exploring romantic locations in Vail"},navigation:{skipToMain:"Skip to main content",settings:"Settings",copyLink:"Copy Link"},settings:{heading:"Edit Settings",description:"Configure your organization, event, and team information for this scavenger hunt.",organization:"Organization",organizationHelp:"Organization selection is currently disabled",event:"Event",eventHelp:"Enter the name of your event or occasion",eventPlaceholder:"Enter event name",team:"Team",teamHelp:"Enter your team or couple name",teamPlaceholder:"Enter your team name",saveChanges:"Save Changes",saveHelp:"Save your organization, event, and team settings",cancel:"Cancel",cancelHelp:"Cancel editing and close settings panel"},progress:{heading:"Scavenger Hunt Progress",label:"Progress",complete:"{{percent}}% Complete",stopsCount:"{{completed}} of {{total}} stops",progressDescription:"Progress: {{completed}} of {{total}} stops completed, {{percent}} percent"},stops:{expandCompleted:"{{action}} completed stop: {{title}}",revealHint:"Reveal hint {{current}} of {{total}} for {{title}}",photoComplete:"✅ Photo Complete",yourPhoto:"✨ Your photo",capturePhoto:"",uploadPhoto:"📸 Upload Photo",uploadPhotoLabel:"Upload photo for {{title}}",uploadHelp:"Select an image file to upload as your photo for this stop",processing:"Processing photo upload",processingText:"Processing..."},completion:{congratulations:"Congratulations! You completed the scavenger hunt.",congratulationsAnnouncement:"All {{count}} stops have been completed successfully. Well done!",celebrationIcon:"Party celebration"},actions:{expand:"Expand",collapse:"Collapse",open:"Open",close:"Close",copy:"Copy",upload:"Upload"},feedback:{linkCopied:"Link copied to clipboard ✨",linkCopyFailed:"Failed to copy link to clipboard"},language:{select:"Select Language",english:"English",spanish:"Español"},accessibility:{settingsPanel:"{{action}} settings panel to change location and team information",shareableLink:"Copy shareable link to clipboard",settingsActions:"Settings panel actions"}}},es:{translation:{app:{title:"Búsqueda del Tesoro en Vail",description:"Una experiencia interactiva de cita para parejas explorando ubicaciones románticas en Vail"},navigation:{skipToMain:"Saltar al contenido principal",settings:"Configuración",copyLink:"Copiar Enlace"},settings:{heading:"Editar Configuración",description:"Configure su organización, evento e información del equipo para esta búsqueda del tesoro.",organization:"Organización",organizationHelp:"La selección de organización está actualmente deshabilitada",event:"Evento",eventHelp:"Ingrese el nombre de su evento u ocasión",eventPlaceholder:"Ingrese el nombre del evento",team:"Equipo",teamHelp:"Ingrese el nombre de su equipo o pareja",teamPlaceholder:"Ingrese el nombre de su equipo",saveChanges:"Guardar Cambios",saveHelp:"Guarde su configuración de organización, evento y equipo",cancel:"Cancelar",cancelHelp:"Cancelar la edición y cerrar el panel de configuración"},progress:{heading:"Progreso de la Búsqueda del Tesoro",label:"Progreso",complete:"{{percent}}% Completado",stopsCount:"{{completed}} de {{total}} paradas",progressDescription:"Progreso: {{completed}} de {{total}} paradas completadas, {{percent}} por ciento"},stops:{expandCompleted:"{{action}} parada completada: {{title}}",revealHint:"Revelar pista {{current}} de {{total}} para {{title}}",photoComplete:"✅ Foto Completa",yourPhoto:"✨ Tu foto",capturePhoto:"📷 Toma una selfie creativa juntos en esta ubicación.",uploadPhoto:"📸 Subir Foto",uploadPhotoLabel:"Subir foto para {{title}}",uploadHelp:"Seleccione un archivo de imagen para subir como su foto para esta parada",processing:"Procesando subida de foto",processingText:"Procesando..."},completion:{congratulations:"¡Felicitaciones! Has completado la búsqueda del tesoro.",congratulationsAnnouncement:"Todas las {{count}} paradas han sido completadas exitosamente. ¡Bien hecho!",celebrationIcon:"Celebración de fiesta"},actions:{expand:"Expandir",collapse:"Colapsar",open:"Abrir",close:"Cerrar",copy:"Copiar",upload:"Subir"},feedback:{linkCopied:"Enlace copiado al portapapeles ✨",linkCopyFailed:"Error al copiar enlace al portapapeles"},language:{select:"Seleccionar Idioma",english:"English",spanish:"Español"},accessibility:{settingsPanel:"{{action}} panel de configuración para cambiar ubicación e información del equipo",shareableLink:"Copiar enlace compartible al portapapeles",settingsActions:"Acciones del panel de configuración"}}}};Co.use(Wo).use(pe).init({resources:Go,fallbackLng:"en",debug:!1,detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"],lookupLocalStorage:"i18nextLng"},interpolation:{escapeValue:!1},defaultNS:"translation",react:{useSuspense:!1}}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller})})}).catch(e=>{})});C(document.getElementById("root")).render(E.jsx(Ma,{children:E.jsx(Ve,{children:E.jsx(Pa,{})})}));export{$ as U,D as a,F as v};
